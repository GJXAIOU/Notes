# 10 | æ¯”è¾ƒï¼šJettyæ¶æ„ç‰¹ç‚¹ä¹‹Handlerç»„ä»¶

åœ¨ä¸“æ ä¸Šä¸€æœŸï¼Œæˆ‘ä»¬å­¦ä¹ äº† Jetty çš„æ•´ä½“æ¶æ„ã€‚å…ˆæ¥å›é¡¾ä¸€ä¸‹ï¼ŒJetty å°±æ˜¯ç”±å¤šä¸ª Connectorï¼ˆè¿æ¥å™¨ï¼‰ã€å¤šä¸ª Handlerï¼ˆå¤„ç†å™¨ï¼‰ï¼Œä»¥åŠä¸€ä¸ªçº¿ç¨‹æ± ç»„æˆï¼Œæ•´ä½“ç»“æ„å›¾å¦‚ä¸‹ã€‚

![image-20220814235938408](10%20%20%E6%AF%94%E8%BE%83%EF%BC%9AJetty%E6%9E%B6%E6%9E%84%E7%89%B9%E7%82%B9%E4%B9%8BHandler%E7%BB%84%E4%BB%B6.resource/image-20220814235938408.png)

ä¸Šä¸€æœŸæˆ‘ä»¬åˆ†æäº† Jetty Connector ç»„ä»¶çš„è®¾è®¡ï¼ŒConnector ä¼šå°† Servlet è¯·æ±‚äº¤ç»™ Handler å»å¤„ç†ï¼Œé‚£ Handler åˆæ˜¯å¦‚ä½•å¤„ç†è¯·æ±‚çš„å‘¢ï¼Ÿ

Jetty çš„ Handler åœ¨è®¾è®¡ä¸Šéå¸¸æœ‰æ„æ€ï¼Œå¯ä»¥è¯´æ˜¯ Jetty çš„çµé­‚ï¼ŒJetty é€šè¿‡ Handler å®ç°äº†é«˜åº¦å¯å®šåˆ¶åŒ–ï¼Œé‚£å…·ä½“æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿæˆ‘ä»¬èƒ½ä»ä¸­å­¦åˆ°æ€æ ·çš„è®¾è®¡æ–¹æ³•å‘¢ï¼Ÿæ¥ä¸‹æ¥ï¼Œæˆ‘å°±æ¥èŠèŠè¿™äº›é—®é¢˜ã€‚

## Handler æ˜¯ä»€ä¹ˆ

**Handler å°±æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒæœ‰ä¸€å †å®ç°ç±»**ï¼ŒJetty çš„ Connector ç»„ä»¶è°ƒç”¨è¿™äº›æ¥å£æ¥å¤„ç† Servlet è¯·æ±‚ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹è¿™ä¸ªæ¥å£å®šä¹‰æˆä»€ä¹ˆæ ·å­ã€‚

```java
public interface Handler extends LifeCycle, Destroyable{
    // å¤„ç†è¯·æ±‚çš„æ–¹æ³•
    public void handle(String target, Request baseRequest, HttpServletRequest request, HttpServletResponse response)
        throws IOException, ServletException;

    // æ¯ä¸ª Handler éƒ½å…³è”ä¸€ä¸ª Server ç»„ä»¶ï¼Œè¢« Server ç®¡ç†
    public void setServer(Server server);
    public Server getServer();

    // é”€æ¯æ–¹æ³•ç›¸å…³çš„èµ„æº
    public void destroy();
}
```

ä½ ä¼šçœ‹åˆ° Handler æ¥å£çš„å®šä¹‰éå¸¸ç®€æ´ï¼Œä¸»è¦å°±æ˜¯ç”¨ handle æ–¹æ³•ç”¨æ¥å¤„ç†è¯·æ±‚ï¼Œè·Ÿ Tomcat å®¹å™¨ç»„ä»¶çš„ service æ–¹æ³•ä¸€æ ·ï¼Œå®ƒæœ‰ ServletRequest å’Œ ServeletResponse ä¸¤ä¸ªå‚æ•°ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿™ä¸ªæ¥å£ä¸­è¿˜æœ‰ setServer å’Œ getServer æ–¹æ³•ï¼Œå› ä¸ºä»»ä½•ä¸€ä¸ª Handler éƒ½éœ€è¦å…³è”ä¸€ä¸ª Server ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´ Handler éœ€è¦è¢« Server ç»„ä»¶æ¥ç®¡ç†ã€‚ä¸€èˆ¬æ¥è¯´ Handler ä¼šåŠ è½½ä¸€äº›èµ„æºåˆ°å†…å­˜ï¼Œå› æ­¤é€šè¿‡è®¾ç½® destroy æ–¹æ³•æ¥é”€æ¯ã€‚

**Handler ç»§æ‰¿å…³ç³»**

Handler åªæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®Œæˆå…·ä½“åŠŸèƒ½çš„è¿˜æ˜¯å®ƒçš„å­ç±»ã€‚é‚£ä¹ˆ Handler æœ‰å“ªäº›å­ç±»å‘¢ï¼Ÿå®ƒä»¬çš„ç»§æ‰¿å…³ç³»åˆæ˜¯æ€æ ·çš„ï¼Ÿè¿™äº›å­ç±»æ˜¯å¦‚ä½•å®ç° Servlet å®¹å™¨åŠŸèƒ½çš„å‘¢ï¼Ÿ

Jetty ä¸­å®šä¹‰äº†ä¸€äº›é»˜è®¤ Handler ç±»ï¼Œå¹¶ä¸”è¿™äº› Handler ç±»ä¹‹é—´çš„ç»§æ‰¿å…³ç³»æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡ä¸€ä¸ªå…¨æ™¯å›¾æ¥äº†è§£ä¸€ä¸‹ã€‚ä¸ºäº†é¿å…è®©ä½ æ„Ÿåˆ°ä¸é€‚ï¼Œæˆ‘å¯¹ç±»å›¾è¿›è¡Œäº†ç®€åŒ–ã€‚

![image-20220814235958404](10%20%20%E6%AF%94%E8%BE%83%EF%BC%9AJetty%E6%9E%B6%E6%9E%84%E7%89%B9%E7%82%B9%E4%B9%8BHandler%E7%BB%84%E4%BB%B6.resource/image-20220814235958404.png)

ä»å›¾ä¸Šä½ å¯ä»¥çœ‹åˆ°ï¼ŒHandler çš„ç§ç±»å’Œå±‚æ¬¡å…³ç³»è¿˜æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼š

Handler æ¥å£ä¹‹ä¸‹æœ‰æŠ½è±¡ç±» AbstractHandlerï¼Œè¿™ä¸€ç‚¹å¹¶ä¸æ„å¤–ï¼Œå› ä¸ºæœ‰æ¥å£ä¸€èˆ¬å°±æœ‰æŠ½è±¡å®ç°ç±»ã€‚

åœ¨ AbstractHandler ä¹‹ä¸‹æœ‰ AbstractHandlerContainerï¼Œä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªç±»å‘¢ï¼Ÿè¿™å…¶å®æ˜¯ä¸ªè¿‡æ¸¡ï¼Œä¸ºäº†å®ç°é“¾å¼è°ƒç”¨ï¼Œä¸€ä¸ª Handler å†…éƒ¨å¿…ç„¶è¦æœ‰å…¶ä»– Handler çš„å¼•ç”¨ï¼Œæ‰€ä»¥è¿™ä¸ªç±»çš„åå­—é‡Œæ‰æœ‰ Containerï¼Œæ„æ€å°±æ˜¯è¿™æ ·çš„ Handler é‡ŒåŒ…å«äº†å…¶ä»– Handler çš„å¼•ç”¨ã€‚

ç†è§£äº†ä¸Šé¢çš„ AbstractHandlerContainerï¼Œæˆ‘ä»¬å°±èƒ½ç†è§£å®ƒçš„ä¸¤ä¸ªå­ç±»äº†ï¼šHandlerWrapper å’Œ HandlerCollectionã€‚ç®€å•æ¥è¯´å°±æ˜¯ï¼ŒHandlerWrapper å’Œ HandlerCollection éƒ½æ˜¯ Handlerï¼Œä½†æ˜¯è¿™äº› Handler é‡Œè¿˜åŒ…æ‹¬å…¶ä»– Handler çš„å¼•ç”¨ã€‚ä¸åŒçš„æ˜¯ï¼ŒHandlerWrapper åªåŒ…å«ä¸€ä¸ªå…¶ä»– Handler çš„å¼•ç”¨ï¼Œè€Œ HandlerCollection ä¸­æœ‰ä¸€ä¸ª Handler æ•°ç»„çš„å¼•ç”¨ã€‚

![image-20220815000014214](10%20%20%E6%AF%94%E8%BE%83%EF%BC%9AJetty%E6%9E%B6%E6%9E%84%E7%89%B9%E7%82%B9%E4%B9%8BHandler%E7%BB%84%E4%BB%B6.resource/image-20220815000014214.png)

æ¥ç€æ¥çœ‹å·¦è¾¹çš„ HandlerWrapperï¼Œå®ƒæœ‰ä¸¤ä¸ªå­ç±»ï¼šServer å’Œ ScopedHandlerã€‚Server æ¯”è¾ƒå¥½ç†è§£ï¼Œå®ƒæœ¬èº«æ˜¯ Handler æ¨¡å—çš„å…¥å£ï¼Œå¿…ç„¶è¦å°†è¯·æ±‚ä¼ é€’ç»™å…¶ä»– Handler æ¥å¤„ç†ï¼Œä¸ºäº†è§¦å‘å…¶ä»– Handler çš„è°ƒç”¨ï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸€ä¸ª HandlerWrapperã€‚

å†çœ‹ ScopedHandlerï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„ Handlerï¼Œå®ç°äº†â€œå…·æœ‰ä¸Šä¸‹æ–‡ä¿¡æ¯â€çš„è´£ä»»é“¾è°ƒç”¨ã€‚ä¸ºä»€ä¹ˆæˆ‘è¦å¼ºè°ƒâ€œå…·æœ‰ä¸Šä¸‹æ–‡ä¿¡æ¯â€å‘¢ï¼Ÿé‚£æ˜¯å› ä¸º Servlet è§„èŒƒè§„å®š Servlet åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ˜¯æœ‰ä¸Šä¸‹æ–‡çš„ã€‚é‚£ä¹ˆè¿™äº› Handler åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚ä½•è®¿é—®è¿™ä¸ªä¸Šä¸‹æ–‡å‘¢ï¼Ÿè¿™ä¸ªä¸Šä¸‹æ–‡åˆå­˜åœ¨ä»€ä¹ˆåœ°æ–¹å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯é€šè¿‡ ScopedHandler æ¥å®ç°çš„ã€‚

è€Œ ScopedHandler æœ‰ä¸€å †çš„å­ç±»ï¼Œè¿™äº›å­ç±»å°±æ˜¯ç”¨æ¥å®ç° Servlet è§„èŒƒçš„ï¼Œæ¯”å¦‚ ServletHandlerã€ContextHandlerã€SessionHandlerã€ServletContextHandler å’Œ WebAppContextã€‚æ¥ä¸‹æ¥æˆ‘ä¼šè¯¦ç»†ä»‹ç»å®ƒä»¬ï¼Œä½†æˆ‘ä»¬å…ˆæŠŠæ€»ä½“ç±»å›¾çœ‹å®Œã€‚

è¯·çœ‹ç±»å›¾çš„å³è¾¹ï¼Œè·Ÿ HandlerWapper å¯¹ç­‰çš„è¿˜æœ‰ HandlerCollectionï¼ŒHandlerCollection å…¶å®ç»´æŠ¤äº†ä¸€ä¸ª Handler æ•°ç»„ã€‚ä½ å¯èƒ½ä¼šé—®ï¼Œä¸ºä»€ä¹ˆè¦å‘æ˜ä¸€ä¸ªè¿™æ ·çš„ Handlerï¼Ÿè¿™æ˜¯å› ä¸º Jetty å¯èƒ½éœ€è¦åŒæ—¶æ”¯æŒå¤šä¸ª Web åº”ç”¨ï¼Œå¦‚æœæ¯ä¸ª Web åº”ç”¨æœ‰ä¸€ä¸ª Handler å…¥å£ï¼Œé‚£ä¹ˆå¤šä¸ª Web åº”ç”¨çš„ Handler å°±æˆäº†ä¸€ä¸ªæ•°ç»„ï¼Œæ¯”å¦‚ Server ä¸­å°±æœ‰ä¸€ä¸ª HandlerCollectionï¼ŒServer ä¼šæ ¹æ®ç”¨æˆ·è¯·æ±‚çš„ URL ä»æ•°ç»„ä¸­é€‰å–ç›¸åº”çš„ Handler æ¥å¤„ç†ï¼Œå°±æ˜¯é€‰æ‹©ç‰¹å®šçš„ Web åº”ç”¨æ¥å¤„ç†è¯·æ±‚ã€‚

**Handler çš„ç±»å‹**

è™½ç„¶ä»ç±»å›¾ä¸Šçœ‹ Handler æœ‰å¾ˆå¤šï¼Œä½†æ˜¯æœ¬è´¨ä¸Šè¿™äº› Handler åˆ†æˆä¸‰ç§ç±»å‹ï¼š

- ç¬¬ä¸€ç§æ˜¯**åè°ƒ Handler**ï¼Œè¿™ç§ Handler è´Ÿè´£å°†è¯·æ±‚è·¯ç”±åˆ°ä¸€ç»„ Handler ä¸­å»ï¼Œæ¯”å¦‚ä¸Šå›¾ä¸­çš„ HandlerCollectionï¼Œå®ƒå†…éƒ¨æŒæœ‰ä¸€ä¸ª Handler æ•°ç»„ï¼Œå½“è¯·æ±‚åˆ°æ¥æ—¶ï¼Œå®ƒè´Ÿè´£å°†è¯·æ±‚è½¬å‘åˆ°æ•°ç»„ä¸­çš„æŸä¸€ä¸ª Handlerã€‚
- ç¬¬äºŒç§æ˜¯**è¿‡æ»¤å™¨ Handler**ï¼Œè¿™ç§ Handler è‡ªå·±ä¼šå¤„ç†è¯·æ±‚ï¼Œå¤„ç†å®Œäº†åå†æŠŠè¯·æ±‚è½¬å‘åˆ°ä¸‹ä¸€ä¸ª Handlerï¼Œæ¯”å¦‚å›¾ä¸Šçš„ HandlerWrapperï¼Œå®ƒå†…éƒ¨æŒæœ‰ä¸‹ä¸€ä¸ª Handler çš„å¼•ç”¨ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ‰€æœ‰ç»§æ‰¿äº† HandlerWrapper çš„ Handler éƒ½å…·æœ‰äº†è¿‡æ»¤å™¨ Handler çš„ç‰¹å¾ï¼Œæ¯”å¦‚ ContextHandlerã€SessionHandler å’Œ WebAppContext ç­‰ã€‚
- ç¬¬ä¸‰ç§æ˜¯**å†…å®¹ Handler**ï¼Œè¯´ç™½äº†å°±æ˜¯è¿™äº› Handler ä¼šçœŸæ­£è°ƒç”¨ Servlet æ¥å¤„ç†è¯·æ±‚ï¼Œç”Ÿæˆå“åº”çš„å†…å®¹ï¼Œæ¯”å¦‚ ServletHandlerã€‚å¦‚æœæµè§ˆå™¨è¯·æ±‚çš„æ˜¯ä¸€ä¸ªé™æ€èµ„æºï¼Œä¹Ÿæœ‰ç›¸åº”çš„ ResourceHandler æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œè¿”å›é™æ€é¡µé¢ã€‚

## å¦‚ä½•å®ç° Servlet è§„èŒƒ

ä¸Šæ–‡æåˆ°ï¼ŒServletHandlerã€ContextHandler ä»¥åŠ WebAppContext ç­‰ï¼Œå®ƒä»¬å®ç°äº† Servlet è§„èŒƒï¼Œé‚£å…·ä½“æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿä¸ºäº†å¸®åŠ©ä½ ç†è§£ï¼Œåœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ Jetty æ¥å¯åŠ¨ä¸€ä¸ª Web åº”ç”¨ã€‚

```java
// æ–°å»ºä¸€ä¸ª WebAppContextï¼ŒWebAppContext æ˜¯ä¸€ä¸ª Handler
WebAppContext webapp = new WebAppContext();
webapp.setContextPath("/mywebapp");
webapp.setWar("mywebapp.war");
 
// å°† Handler æ·»åŠ åˆ° Server ä¸­å»
server.setHandler(webapp);
 
// å¯åŠ¨ Server
server.start();
server.join();
```

ä¸Šé¢çš„è¿‡ç¨‹ä¸»è¦åˆ†ä¸ºä¸¤æ­¥ï¼š

ç¬¬ä¸€æ­¥åˆ›å»ºä¸€ä¸ª WebAppContextï¼Œæ¥ç€è®¾ç½®ä¸€äº›å‚æ•°åˆ°è¿™ä¸ª Handler ä¸­ï¼Œå°±æ˜¯å‘Šè¯‰ WebAppContext ä½ çš„ WAR åŒ…æ”¾åœ¨å“ªï¼ŒWeb åº”ç”¨çš„è®¿é—®è·¯å¾„æ˜¯ä»€ä¹ˆã€‚

ç¬¬äºŒæ­¥å°±æ˜¯æŠŠæ–°åˆ›å»ºçš„ WebAppContext æ·»åŠ åˆ° Server ä¸­ï¼Œç„¶åå¯åŠ¨ Serverã€‚

WebAppContext å¯¹åº”ä¸€ä¸ª Web åº”ç”¨ã€‚æˆ‘ä»¬å›å¿†ä¸€ä¸‹ Servlet è§„èŒƒä¸­æœ‰ Contextã€Servletã€Filterã€Listener å’Œ Session ç­‰ï¼ŒJetty è¦æ”¯æŒ Servlet è§„èŒƒï¼Œå°±éœ€è¦æœ‰ç›¸åº”çš„ Handler æ¥åˆ†åˆ«å®ç°è¿™äº›åŠŸèƒ½ã€‚å› æ­¤ï¼ŒJetty è®¾è®¡äº† 3 ä¸ªç»„ä»¶ï¼šContextHandlerã€ServletHandler å’Œ SessionHandler æ¥å®ç° Servle è§„èŒƒä¸­è§„å®šçš„åŠŸèƒ½ï¼Œè€Œ**WebAppContext æœ¬èº«å°±æ˜¯ä¸€ä¸ª ContextHandler**ï¼Œå¦å¤–å®ƒè¿˜è´Ÿè´£ç®¡ç† ServletHandler å’Œ SessionHandlerã€‚

æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹ä»€ä¹ˆæ˜¯ ContextHandlerã€‚ContextHandler ä¼šåˆ›å»ºå¹¶åˆå§‹åŒ– Servlet è§„èŒƒé‡Œçš„ ServletContext å¯¹è±¡ï¼ŒåŒæ—¶ ContextHandler è¿˜åŒ…å«äº†ä¸€ç»„èƒ½å¤Ÿè®©ä½ çš„ Web åº”ç”¨è¿è¡Œèµ·æ¥çš„ Handlerï¼Œå¯ä»¥è¿™æ ·ç†è§£ï¼ŒContext æœ¬èº«ä¹Ÿæ˜¯ä¸€ç§ Handlerï¼Œå®ƒé‡Œé¢åŒ…å«äº†å…¶ä»–çš„ Handlerï¼Œè¿™äº› Handler èƒ½å¤„ç†æŸä¸ªç‰¹å®š URL ä¸‹çš„è¯·æ±‚ã€‚æ¯”å¦‚ï¼ŒContextHandler åŒ…å«äº†ä¸€ä¸ªæˆ–è€…å¤šä¸ª ServletHandlerã€‚

å†æ¥çœ‹ ServletHandlerï¼Œå®ƒå®ç°äº† Servlet è§„èŒƒä¸­çš„ Servletã€Filter å’Œ Listener çš„åŠŸèƒ½ã€‚ServletHandler ä¾èµ– FilterHolderã€ServletHolderã€ServletMappingã€FilterMapping è¿™å››å¤§ç»„ä»¶ã€‚FilterHolder å’Œ ServletHolder åˆ†åˆ«æ˜¯ Filter å’Œ Servlet çš„åŒ…è£…ç±»ï¼Œæ¯ä¸€ä¸ª Servlet ä¸è·¯å¾„çš„æ˜ å°„ä¼šè¢«å°è£…æˆ ServletMappingï¼Œè€Œ Filter ä¸æ‹¦æˆª URL çš„æ˜ å°„ä¼šè¢«å°è£…æˆ FilterMappingã€‚

SessionHandler ä»åå­—å°±çŸ¥é“å®ƒçš„åŠŸèƒ½ï¼Œç”¨æ¥ç®¡ç† Sessionã€‚é™¤æ­¤ä¹‹å¤– WebAppContext è¿˜æœ‰ä¸€äº›é€šç”¨åŠŸèƒ½çš„ Handlerï¼Œæ¯”å¦‚ SecurityHandler å’Œ GzipHandlerï¼ŒåŒæ ·ä»åå­—å¯ä»¥çŸ¥é“è¿™äº› Handler çš„åŠŸèƒ½åˆ†åˆ«æ˜¯å®‰å…¨æ§åˆ¶å’Œå‹ç¼© / è§£å‹ç¼©ã€‚

WebAppContext ä¼šå°†è¿™äº› Handler æ„å»ºæˆä¸€ä¸ªæ‰§è¡Œé“¾ï¼Œé€šè¿‡è¿™ä¸ªé“¾ä¼šæœ€ç»ˆè°ƒç”¨åˆ°æˆ‘ä»¬çš„ä¸šåŠ¡ Servletã€‚æˆ‘ä»¬é€šè¿‡ä¸€å¼ å›¾æ¥ç†è§£ä¸€ä¸‹ã€‚

![image-20220815000032150](10%20%20%E6%AF%94%E8%BE%83%EF%BC%9AJetty%E6%9E%B6%E6%9E%84%E7%89%B9%E7%82%B9%E4%B9%8BHandler%E7%BB%84%E4%BB%B6.resource/image-20220815000032150.png)

é€šè¿‡å¯¹æ¯” Tomcat çš„æ¶æ„å›¾ï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼ŒJetty çš„ Handler ç»„ä»¶å’Œ Tomcat ä¸­çš„å®¹å™¨ç»„ä»¶æ˜¯å¤§è‡´æ˜¯å¯¹ç­‰çš„æ¦‚å¿µï¼ŒJetty ä¸­çš„ WebAppContext ç›¸å½“äº Tomcat çš„ Context ç»„ä»¶ï¼Œéƒ½æ˜¯å¯¹åº”ä¸€ä¸ª Web åº”ç”¨ï¼›è€Œ Jetty ä¸­çš„ ServletHandler å¯¹åº” Tomcat ä¸­çš„ Wrapper ç»„ä»¶ï¼Œå®ƒè´Ÿè´£åˆå§‹åŒ–å’Œè°ƒç”¨ Servletï¼Œå¹¶å®ç°äº† Filter çš„åŠŸèƒ½ã€‚

å¯¹äºä¸€äº›é€šç”¨ç»„ä»¶ï¼Œæ¯”å¦‚å®‰å…¨å’Œè§£å‹ç¼©ï¼Œåœ¨ Jetty ä¸­éƒ½è¢«åšæˆäº† Handlerï¼Œè¿™æ˜¯ Jetty Handler æ¶æ„çš„ç‰¹ç‚¹ã€‚

å› æ­¤å¯¹äº Jetty æ¥è¯´ï¼Œè¯·æ±‚å¤„ç†æ¨¡å—å°±è¢«æŠ½è±¡æˆ Handlerï¼Œä¸ç®¡æ˜¯å®ç°äº† Servlet è§„èŒƒçš„ Handlerï¼Œè¿˜æ˜¯å®ç°é€šç”¨åŠŸèƒ½çš„ Handlerï¼Œæ¯”å¦‚å®‰å…¨ã€è§£å‹ç¼©ç­‰ï¼Œæˆ‘ä»¬å¯ä»¥ä»»æ„æ·»åŠ æˆ–è€…è£å‰ªè¿™äº›â€œåŠŸèƒ½æ¨¡å—â€ï¼Œä»è€Œå®ç°é«˜åº¦çš„å¯å®šåˆ¶åŒ–ã€‚

## æœ¬æœŸç²¾å

Jetty Server å°±æ˜¯ç”±å¤šä¸ª Connectorã€å¤šä¸ª Handlerï¼Œä»¥åŠä¸€ä¸ªçº¿ç¨‹æ± ç»„æˆã€‚

Jetty çš„ Handler è®¾è®¡æ˜¯å®ƒçš„ä¸€å¤§ç‰¹è‰²ï¼ŒJetty æœ¬è´¨å°±æ˜¯ä¸€ä¸ª Handler ç®¡ç†å™¨ï¼ŒJetty æœ¬èº«å°±æä¾›äº†ä¸€äº›é»˜è®¤ Handler æ¥å®ç° Servlet å®¹å™¨çš„åŠŸèƒ½ï¼Œä½ ä¹Ÿå¯ä»¥å®šä¹‰è‡ªå·±çš„ Handler æ¥æ·»åŠ åˆ° Jetty ä¸­ï¼Œè¿™ä½“ç°äº†â€œ**å¾®å†…æ ¸ + æ’ä»¶**â€çš„è®¾è®¡æ€æƒ³ã€‚

## è¯¾åæ€è€ƒ

é€šè¿‡ä»Šå¤©çš„å­¦ä¹ ï¼Œæˆ‘ä»¬çŸ¥é“å„ç§ Handler éƒ½ä¼šå¯¹è¯·æ±‚åšä¸€äº›å¤„ç†ï¼Œå†å°†è¯·æ±‚ä¼ ç»™ä¸‹ä¸€ä¸ª Handlerï¼Œè€Œ Servlet ä¹Ÿæ˜¯ç”¨æ¥å¤„ç†è¯·æ±‚çš„ï¼Œé‚£ Handler è·Ÿ Servlet æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ

ä¸çŸ¥é“ä»Šå¤©çš„å†…å®¹ä½ æ¶ˆåŒ–å¾—å¦‚ä½•ï¼Ÿå¦‚æœè¿˜æœ‰ç–‘é—®ï¼Œè¯·å¤§èƒ†çš„åœ¨ç•™è¨€åŒºæé—®ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠä½ çš„è¯¾åæ€è€ƒå’Œå¿ƒå¾—è®°å½•ä¸‹æ¥ï¼Œä¸æˆ‘å’Œå…¶ä»–åŒå­¦ä¸€èµ·è®¨è®ºã€‚å¦‚æœä½ è§‰å¾—ä»Šå¤©æœ‰æ‰€æ”¶è·ï¼Œæ¬¢è¿ä½ æŠŠå®ƒåˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚

## 1716143665 æ‹¼è¯¾å¾®ä¿¡(6)

- 

  å¤å¤©

  2019-06-01

  *î˜»*2

  æƒ³å­¦ä¹ tomcatæ¶æ„ï¼Œå¤§ä½¬æœ‰æ²¡æœ‰æ¨èçš„ä¹¦ç±

  å±•å¼€*î˜ƒ*

  ä½œè€…å›å¤: How tomcat works è¿˜ä¸é”™

- 

  Geek_00d56...

  2019-06-04

  *î˜»*

  Jetty Server å°±æ˜¯ç”±å¤šä¸ª Connectorã€å¤šä¸ª Handlerï¼Œä»¥åŠä¸€ä¸ªçº¿ç¨‹æ± ç»„æˆã€‚

  Jetty çš„ Handler è®¾è®¡æ˜¯å®ƒçš„ä¸€å¤§ç‰¹è‰²ï¼ŒJetty æœ¬è´¨å°±æ˜¯ä¸€ä¸ª Handler ç®¡ç†å™¨ï¼ŒJetty æœ¬èº«å°±æä¾›äº†ä¸€äº›é»˜è®¤ Handler æ¥å®ç° Servlet å®¹å™¨çš„åŠŸèƒ½ï¼Œä½ ä¹Ÿå¯ä»¥å®šä¹‰è‡ªå·±çš„ Handler æ¥æ·»åŠ åˆ° Jetty ä¸­ï¼Œè¿™ä½“ç°äº†â€œå¾®å†…æ ¸ + æ’ä»¶â€çš„è®¾è®¡æ€æƒ³ã€‚

  handler åº”è¯¥ä¼šæŠŠè¯·æ±‚å­—èŠ‚æµè½¬æ¢ä¸ºservlet request

  å±•å¼€*î˜ƒ*

- 

  ç©ºçŸ¥

  2019-06-03

  *î˜»*

  è€å¸ˆé—®ä¸‹
  serveræ˜¯ä¸€ä¸ª handlerWrapper å†…éƒ¨åº”è¯¥åªæœ‰ä¸€ä¸ªhanlder å¯æ˜¯ä»–å†…éƒ¨åˆç»´æŠ¤ä¸€ä¸ªhandlerCollection,å½“è¯·æ±‚è¿‡æ¥æ—¶å€™ å»handlerCollection é‡Œé¢æ ¹æ®urlåˆ¤æ–­æ˜¯å“ªä¸ªé¡¹ç›® é‚£å®šä¹‰çš„é‚£ä¸ª å•ç‹¬çš„hanlder æœ‰å•¥ç”¨?

  ä½œè€…å›å¤: å•ç‹¬çš„Handlerçš„handleæ–¹æ³•ä¹Ÿä¼šå¤„ç†ä¸€äº›è‡ªå·±çš„é€»è¾‘ï¼Œå†è°ƒç”¨ä¸‹ä¸€ä¸ªHandlerçš„handleæ–¹æ³•

- 

  -W.LI-

  2019-06-03

  *î˜»*

  Handlerå®ç°äº† Servlet è§„èŒƒä¸­çš„ Servletã€Filter å’Œ Listener åŠŸèƒ½ä¸­çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªã€‚handlerå¯ä»¥æŒæœ‰åˆ«çš„handleï¼Œservletä¸æŒæœ‰åˆ«çš„servletã€‚servletçš„è°ƒç”¨å…³ç³»é€šè¿‡servletå®¹å™¨æ¥æ§åˆ¶ã€‚handlerçš„è°ƒç”¨å…³ç³»é€šè¿‡wabappcontextæ§åˆ¶ã€‚è€å¸ˆå¥½!
  Tomcaté€šè¿‡è¿æ¥å™¨æ¥åŒºåˆ†åè®®å’Œç«¯å£å·ï¼ŒhoståŒºåˆ†è™šæ‹Ÿä¸»æœº(äºŒçº§åŸŸå)ã€‚jettyé‡Œé¢æ˜¯æ€ä¹ˆç»‘å®šçš„å‘¢?jettyçš„è¿æ¥å™¨å’Œå®¹å™¨æ²¡æœ‰å¯¹åº”å…³ç³»ï¼Œæ‰€æœ‰çš„å®¹å™¨éƒ½å¯ä»¥å¤„ç†å„ç§çš„åè®®ä¹ˆ?mappingå…·ä½“åˆæ˜¯åœ¨å“ªé‡Œèµ·ä½œç”¨çš„å‘¢?æ˜¯handlecollectioné€šè¿‡mappingæ‰¾åˆ°å¯¹åº”çš„wabappcontextå—?

  å±•å¼€*î˜ƒ*

  ä½œè€…å›å¤: å¯ä»¥ç»™ä¸€ä¸ªwabappcontexté…ç½®å¤šä¸ªè™šæ‹Ÿä¸»æœºåœ°å€ï¼Œåœ¨Jettyä¸­ï¼Œè¯·æ±‚è¿›æ¥åï¼Œå¯ä»¥åœ¨æ‰€æœ‰çš„wabappcontextä¸Šè¿›è¡ŒåŒ¹é…ï¼Œé¦–å…ˆæ˜¯è™šæ‹Ÿä¸»æœºåï¼Œç„¶åæ˜¯è®¿é—®è·¯å¾„ã€‚

- 

  -W.LI-

  2019-06-02

  *î˜»*

  è€å¸ˆæœ‰jettyæºç ä¸‹è½½åœ°å€é“¾æ¥ä¹ˆï¼Ÿgitçš„ä¸‹ä¸åŠ¨ğŸ˜‚

  å±•å¼€*î˜ƒ*

  ä½œè€…å›å¤: æºç githubä¸Šéƒ½æœ‰çš„ï¼Œä½†æ˜¯æˆ‘å»ºè®®ç”¨å†…åµŒå¼çš„æ–¹å¼è·‘Jettyï¼Œä½“ä¼šä¸€ä¸‹SpringBootæ˜¯æ€ä¹ˆç”¨Jettyçš„ï¼Œå¯ä»¥ç”¨IDEæŠŠæºç ä¸‹è½½ä¸‹æ¥ï¼ŒåŠ æ–­ç‚¹è°ƒè¯•ã€‚
  https://github.com/jetty-project/embedded-jetty-jsp

- 

  east

  2019-06-01

  *î˜»*

  1.Hå’ŒSéƒ½èƒ½å¤„ç†è¯·æ±‚ï¼Œ
  2.Hå¯ä»¥è°ƒç”¨Sï¼ŒSä¸èƒ½è°ƒç”¨Hï¼Œ
  3.Hæ›´å¤šå¤„ç†é€šç”¨çš„å¤„ç†å¹¶ä¸”æ˜¯æŠ½è±¡çš„ï¼ŒSæ˜¯å¤„ç†å…·ä½“çš„ä¸”æ¯”è¾ƒç‰¹å®šåŒ–è¯·æ±‚

  å±•å¼€*î˜ƒ*