{"compress":true,"commitItems":[["30a8222c-9f3f-4f76-989b-8b72150f5a53",1563099831952,"# Hibernate在控制台打印sql语句以及参数\n\n2018年03月06日 17:24:02 [Randy_Wang_](https://me.csdn.net/Randy_Wang_) 阅读数 9190\n\n最近在工作中使用hibernate，遇到了sql语句错误，为了查看具体的错误，整理了hibernate在控制台及日志打印sql语句及参数的方法\n\n# 环境说明\n\n> IntelliJ IDEA 2017.3.4 版本；SpringBoot 2.0.0.RELEASE；hibernate用的是JPA自带。\n\n# 打印sql语句到控制台\n\n> 首先，我使用的是application.properties配置文件，使用yml也可以达到同样的效果。\n> \n> 在网上查这个问题查了好久，基本上都是xml配置，在此不多说；\n> \n> 正确的properties配置项应该如下图所示：\n> \n> **在jpa下一级不直接是hibernate，而是properties。**\n> \n> spring.jpa.properties.hibernate.show_sql=true          //控制台是否打印 spring.jpa.properties.hibernate.format_sql=true        //格式化sql语句 spring.jpa.properties.hibernate.use_sql_comments=true  //指出是什么操作生成了该语句\n> \n> 此时，在控制台看到的现象：Hibernate: \n> \n>     ![](https://img-blog.csdn.net/20180306170047795?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmFuZHlfV2FuZ18=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)\n> \n> 可以看到，控制台打印了一条经过格式化之后的sql语句，并标明了这条语句是在Hibernate插入TaskWebSiteRev这个对象到数据库的时候生成的。\n\n**打印sql语句中的参数值**\n\n> 经过上面的步骤，我们已经可以在控制台打印出格式化之后的sql语句，但是大多数情况下，我们还需要具体的sql参数值，这个时候我们就需要配置 **日志配置文件**。\n> \n> 博主使用的是slf4j的日志，配置文件用的是logback.xml，配置方式如下：\n> \n> <logger name=\"org.hibernate.SQL\" level=\"DEBUG\"/>\n> <logger name=\"org.hibernate.engine.QueryParameters\" level=\"DEBUG\"/>\n> <logger name=\"org.hibernate.engine.query.HQLQueryPlan\" level=\"DEBUG\"/>\n> \n> 直接把这三个配置丢到xml的根节点下就可以~来看一下效果：\n> \n> ![](https://img-blog.csdn.net/20180306170921800?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmFuZHlfV2FuZ18=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)\n> \n> 可以看到控制台依次输出了sql参数，并且将这些参数在数据库中的类型也一并输出了。\n\n**打印sql语句到日志**\n\n> 在上述步骤的基础上，在logback.xml中增加两项配置：\n> \n> <logger name=\"org.hibernate.type.descriptor.sql.BasicBinder\" level=\"TRACE\"/>\n> <logger name=\"org.hibernate.type.descriptor.sql.BasicExtractor\" level=\"TRACE\"/>\n> \n> 这样就会在日志中将sql语句打印出来，在无法查看控制台的情况下，就可以使用这个方法啦。效果如图所示：\n> \n> ![](https://img-blog.csdn.net/20180306171908839?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmFuZHlfV2FuZ18=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)\n\n**注：**\n\n> 以上提到的配置如果全部配置，在控制台会有冗余的打印信息：\n> \n> ![](https://img-blog.csdn.net/20180306172131370?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmFuZHlfV2FuZ18=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)\n> \n> 建议根据需要，只配置打印到控制台或打印到日志其中一种。\n\n**以上就是hibernate在控制台输出sql语句及其参数值的方法，有不对的地方请指正，也欢迎大家分享自己知道的更方便的方法~**",[[1563099827178,["GJX@GJXAIOU",[[-1,28,"2018年03月06日 17:24:02 [Randy_Wang_](https://me.csdn.net/Randy_Wang_) 阅读数 9190"]],[28,104],[28,28]]],[1563099841034,["GJX@GJXAIOU",[[1,28,"[原文地址](https://blog.csdn.net/Randy_Wang_/article/details/79460306)"]],[28,28],[94,94]]],[1563099849161,["GJX@GJXAIOU",[[-1,177,">"]],[178,178],[177,177]]],[1563099853434,["GJX@GJXAIOU",[[-1,264,">"]],[265,265],[264,264]]],[1563099854048,["GJX@GJXAIOU",[[-1,317,">"]],[318,318],[317,317]]],[1563099854778,["GJX@GJXAIOU",[[-1,319,">"]],[320,320],[319,319]]],[1563099857194,["GJX@GJXAIOU",[[-1,428,">"]],[429,429],[428,428]]],[1563099857705,["GJX@GJXAIOU",[[-1,425,">"]],[426,426],[425,425]]],[1563099858387,["GJX@GJXAIOU",[[-1,385," "]],[386,386],[385,385]]],[1563099859595,["GJX@GJXAIOU",[[-1,381,"> "]],[383,383],[381,381]]],[1563099860201,["GJX@GJXAIOU",[[-1,354,">"]],[355,355],[354,354]]],[1563099860817,["GJX@GJXAIOU",[[-1,351,">"]],[352,352],[351,351]]],[1563099861641,["GJX@GJXAIOU",[[-1,380,">"]],[381,381],[380,380]]],[1563099864355,["GJX@GJXAIOU",[[-1,624,">"]],[625,625],[624,624]]],[1563099865010,["GJX@GJXAIOU",[[-1,626,">"]],[627,627],[626,626]]],[1563099865561,["GJX@GJXAIOU",[[-1,652,">"]],[653,653],[652,652]]],[1563099866387,["GJX@GJXAIOU",[[-1,654,">"]],[655,655],[654,654]]],[1563099867785,["GJX@GJXAIOU",[[-1,827,">"]],[828,828],[827,827]]],[1563099869394,["GJX@GJXAIOU",[[-1,829,">"]],[830,830],[829,829]]],[1563099885812,["GJX@GJXAIOU",[[1,420,"·"],[-1,467,"        "],[1,475,"        "],[-1,534,"        "],[1,542,"        "],[-1,650," "],[1,651," "],[-1,655,"    "],[1,659,"    "],[-1,997," "],[1,998," "]],[420,420],[421,421]]],[1563099886037,["GJX@GJXAIOU",[[1,421,"·"]],[421,421],[422,422]]],[1563099887425,["GJX@GJXAIOU",[[-1,420,"··"]],[422,422],[420,420]]],[1563099891538,["GJX@GJXAIOU",[[1,420,"```"]],[420,420],[423,423]]],[1563099893194,["GJX@GJXAIOU",[[1,628,"```"]],[628,628],[631,631]]],[1563099896218,["GJX@GJXAIOU",[[-1,627," "]],[628,628],[627,627]]],[1563099897513,["GJX@GJXAIOU",[[-1,419," "]],[420,420],[419,419]]],[1563099916489,["GJX@GJXAIOU",[[-1,659,"    "]],[663,663],[659,659]]],[1563099929137,["GJX@GJXAIOU",[[-1,423," spring.jpa.properties.hibernate.show_sql=true          //控制台是否打印 spring.jpa.properties.hibernate.format_sql=true        //格式化sql语句 spring.jpa.properties.hibernate.use_sql_comments=true  //指出是什么操作生成了该语句"]],[424,625],[423,423]]],[1563099931411,["GJX@GJXAIOU",[[1,423,"spring.jpa.properties.hibernate.show_sql=true          //控制台是否打印\nspring.jpa.properties.hibernate.format_sql=true        //格式化sql语句\nspring.jpa.properties.hibernate.use_sql_comments=true  //指出是什么操作生成了该语句"]],[423,423],[624,624]]],[1563099944483,["GJX@GJXAIOU",[[-1,926,">"]],[927,927],[926,926]]],[1563099946321,["GJX@GJXAIOU",[[-1,1008,"> "]],[1010,1010],[1008,1008]]],[1563099947355,["GJX@GJXAIOU",[[-1,1009,"> "]],[1011,1011],[1009,1009]]],[1563099948058,["GJX@GJXAIOU",[[-1,1051,"> "]],[1053,1053],[1051,1051]]],[1563099949209,["GJX@GJXAIOU",[[-1,1052,"> "]],[1054,1054],[1052,1052]]],[1563099949801,["GJX@GJXAIOU",[[-1,1101,">"]],[1102,1102],[1101,1101]]],[1563099950017,["GJX@GJXAIOU",[[-1,1100,"\n"]],[1101,1101],[1100,1100]]],[1563099951402,["GJX@GJXAIOU",[[1,1100,"\n"]],[1100,1100],[1101,1101]]],[1563099954177,["GJX@GJXAIOU",[[-1,1170,">"]],[1171,1171],[1170,1170]]],[1563099955619,["GJX@GJXAIOU",[[-1,1242,">"]],[1243,1243],[1242,1242]]],[1563099956699,["GJX@GJXAIOU",[[-1,1244,">"]],[1245,1245],[1244,1244]]],[1563099957816,["GJX@GJXAIOU",[[-1,1275,">"]],[1276,1276],[1275,1275]]],[1563099958768,["GJX@GJXAIOU",[[-1,1277,">"]],[1278,1278],[1277,1277]]],[1563099959592,["GJX@GJXAIOU",[[-1,1446,">"]],[1447,1447],[1446,1446]]],[1563099960219,["GJX@GJXAIOU",[[-1,1448,">"]],[1449,1449],[1448,1448]]],[1563099968378,["GJX@GJXAIOU",[[1,1051,"```"]],[1051,1051],[1054,1054]]],[1563099968405,["GJX@GJXAIOU",[[1,1054,"language\n```\n"]],[1054,1054],[1054,1062]]],[1563099970017,["GJX@GJXAIOU",[[1,1259,"```"]],[1259,1259],[1262,1262]]],[1563099971690,["GJX@GJXAIOU",[[-1,1063,"```"]],[1063,1066],[1063,1063]]],[1563099972370,["GJX@GJXAIOU",[[-1,1064,"\n"]],[1063,1063],[1062,1062]]],[1563099973274,["GJX@GJXAIOU",[[-1,1063,"\n"]],[1063,1063],[1062,1062]]],[1563099974624,["GJX@GJXAIOU",[[-1,1253," "]],[1254,1254],[1253,1253]]],[1563099986865,["GJX@GJXAIOU",[[-1,1520,">"]],[1521,1521],[1520,1520]]],[1563099993075,["GJX@GJXAIOU",[[-1,1775,">"]],[1776,1776],[1775,1775]]],[1563099994210,["GJX@GJXAIOU",[[-1,1772,"> "]],[1774,1774],[1772,1772]]],[1563099995387,["GJX@GJXAIOU",[[-1,1719,"> "]],[1721,1721],[1719,1719]]],[1563099996177,["GJX@GJXAIOU",[[-1,1716,"> "]],[1718,1718],[1716,1716]]],[1563099997409,["GJX@GJXAIOU",[[-1,1634,"> "]],[1636,1636],[1634,1634]]],[1563099999259,["GJX@GJXAIOU",[[-1,1555,">"]],[1556,1556],[1555,1555]]],[1563100000332,["GJX@GJXAIOU",[[-1,1552,">"]],[1553,1553],[1552,1552]]],[1563100006539,["GJX@GJXAIOU",[[1,1553,"```jas"]],[1553,1553],[1559,1559]]],[1563100008356,["GJX@GJXAIOU",[[-1,1556,"jas"]],[1559,1559],[1556,1556]]],[1563100009258,["GJX@GJXAIOU",[[-1,1552," "]],[1553,1553],[1552,1552]]],[1563100011610,["GJX@GJXAIOU",[[1,1714,"```"]],[1714,1714],[1717,1717]]],[1563100024747,["GJX@GJXAIOU",[[-1,1982,">"]],[1983,1983],[1982,1982]]],[1563100025514,["GJX@GJXAIOU",[[-1,1979,">"]],[1980,1980],[1979,1979]]],[1563100026211,["GJX@GJXAIOU",[[-1,1948,">"]],[1949,1949],[1948,1948]]],[1563100029779,["GJX@GJXAIOU",[[-1,2149,"> "]],[2151,2151],[2149,2149]]],[1563100030324,["GJX@GJXAIOU",[[-1,2150,">"]],[2151,2151],[2150,2150]]],[1563100030539,["GJX@GJXAIOU",[[-1,2149,"\n"]],[2150,2150],[2149,2149]]]],null,"GJX@GJXAIOU"]]}