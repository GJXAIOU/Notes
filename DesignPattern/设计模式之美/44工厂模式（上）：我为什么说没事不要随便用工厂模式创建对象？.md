# 44å·¥å‚æ¨¡å¼ï¼ˆä¸Šï¼‰ï¼šæˆ‘ä¸ºä»€ä¹ˆè¯´æ²¡äº‹ä¸è¦éšä¾¿ç”¨å·¥å‚æ¨¡å¼åˆ›å»ºå¯¹è±¡ï¼Ÿ

ä¸€èˆ¬æƒ…å†µä¸‹**ï¼Œå·¥å‚æ¨¡å¼åˆ†ä¸ºä¸‰ç§æ›´åŠ ç»†åˆ†çš„ç±»å‹ï¼šç®€å•å·¥å‚ã€å·¥å‚æ–¹æ³•å’ŒæŠ½è±¡å·¥å‚**ã€‚ä¸è¿‡ï¼Œ åœ¨ GoF çš„ã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸€ä¹¦ä¸­ï¼Œå®ƒå°†ç®€å•å·¥å‚æ¨¡å¼çœ‹ä½œæ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„ä¸€ç§ç‰¹ä¾‹ï¼Œæ‰€ä»¥å·¥å‚æ¨¡å¼åªè¢«åˆ†æˆäº†å·¥å‚æ–¹æ³•å’ŒæŠ½è±¡å·¥å‚ä¸¤ç±»ã€‚å®é™…ä¸Šï¼Œå‰é¢ä¸€ç§åˆ†ç±»æ–¹æ³•æ›´åŠ å¸¸è§ï¼Œæ‰€ä»¥ï¼Œåœ¨è®²è§£ä¸­æ²¿ç”¨ç¬¬ä¸€ç§åˆ†ç±»æ–¹æ³•ã€‚

åœ¨è¿™ä¸‰ç§ç»†åˆ†çš„å·¥å‚æ¨¡å¼ä¸­ï¼Œ**ç®€å•å·¥å‚ã€å·¥å‚æ–¹æ³•åŸç†æ¯”è¾ƒç®€å•ï¼Œåœ¨å®é™…çš„é¡¹ç›®ä¸­ä¹Ÿæ¯”è¾ƒå¸¸ç”¨ã€‚è€ŒæŠ½è±¡å·¥å‚çš„åŸç†ç¨å¾®å¤æ‚ç‚¹ï¼Œåœ¨å®é™…çš„é¡¹ç›®ä¸­ç›¸å¯¹ä¹Ÿä¸å¸¸ç”¨ã€‚**æ‰€ä»¥ï¼Œæˆ‘ä»¬ä»Šå¤©è®²è§£çš„é‡ç‚¹æ˜¯å‰ä¸¤ç§å·¥å‚æ¨¡å¼ã€‚å¯¹äºæŠ½è±¡å·¥å‚ï¼Œä½ ç¨å¾®äº†è§£ä¸€ä¸‹å³å¯ã€‚

é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è®²è§£çš„é‡ç‚¹ä¹Ÿä¸æ˜¯åŸç†å’Œå®ç°ï¼Œå› ä¸ºè¿™äº›éƒ½å¾ˆç®€å•ï¼Œé‡ç‚¹è¿˜æ˜¯å¸¦ä½ ææ¸…æ¥šåº”ç”¨åœºæ™¯ï¼šä»€ä¹ˆæ—¶å€™è¯¥ç”¨å·¥å‚æ¨¡å¼ï¼Ÿç›¸å¯¹äºç›´æ¥ new æ¥åˆ›å»ºå¯¹è±¡ï¼Œç”¨å·¥å‚æ¨¡å¼æ¥åˆ›å»ºç©¶ç«Ÿæœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ


## ä¸€ã€ç®€å•å·¥å‚ï¼ˆSimple Factoryï¼‰

ç¤ºä¾‹ï¼šåœ¨ä¸‹é¢è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬æ ¹æ®é…ç½®æ–‡ä»¶çš„åç¼€ï¼ˆjsonã€xmlã€yamlã€propertiesï¼‰ï¼Œé€‰æ‹©ä¸åŒçš„è§£æå™¨ï¼ˆJsonRuleConfigParserã€XmlRuleConfigParserâ€¦â€¦ï¼‰ï¼Œå°†å­˜å‚¨åœ¨æ–‡ä»¶ä¸­çš„é…ç½®è§£ææˆå†…å­˜å¯¹è±¡ RuleConfigã€‚

```java
public class RuleConfigSource {
    public RuleConfig load(String ruleConfigFilePath) {
        String ruleConfigFileExtension = getFileExtension(ruleConfigFilePath);
        IRuleConfigParser parser = null;
        if ("json".equalsIgnoreCase(ruleConfigFileExtension)) {
            parser = new JsonRuleConfigParser();
        } else if ("xml".equalsIgnoreCase(ruleConfigFileExtension)) {
            parser = new XmlRuleConfigParser();
        } else if ("yaml".equalsIgnoreCase(ruleConfigFileExtension)) {
            parser = new YamlRuleConfigParser();
        } else if ("properties".equalsIgnoreCase(ruleConfigFileExtension)) {
            parser = new PropertiesRuleConfigParser();
        } else {
            throw new InvalidRuleConfigException(
                "Rule config file format is not supported: " + ruleConfigFilePath)
        }
        
        String configText = "";
        //ä»ruleConfigFilePathæ–‡ä»¶ä¸­è¯»å–é…ç½®æ–‡æœ¬åˆ°configTextä¸­
        RuleConfig ruleConfig = parser.parse(configText);
        return ruleConfig;
    } 
    private String getFileExtension(String filePath) {
        //...è§£ææ–‡ä»¶åè·å–æ‰©å±•åï¼Œæ¯”å¦‚rule.jsonï¼Œè¿”å›json
        return "json";
    }
}
```

åœ¨â€œè§„èŒƒå’Œé‡æ„â€é‚£ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬æœ‰è®²åˆ°ï¼Œä¸ºäº†è®©ä»£ç é€»è¾‘æ›´åŠ æ¸…æ™°ï¼Œå¯è¯»æ€§æ›´å¥½ï¼Œæˆ‘ä»¬è¦å–„äºå°†åŠŸèƒ½ç‹¬ç«‹çš„ä»£ç å—å°è£…æˆå‡½æ•°ã€‚æŒ‰ç…§è¿™ä¸ªè®¾è®¡æ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»£ç ä¸­æ¶‰åŠ parser åˆ›å»ºçš„éƒ¨åˆ†é€»è¾‘å‰¥ç¦»å‡ºæ¥ï¼ŒæŠ½è±¡æˆ createParser() å‡½æ•°ã€‚é‡æ„ä¹‹åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```java
public RuleConfig load(String ruleConfigFilePath) {
    String ruleConfigFileExtension = getFileExtension(ruleConfigFilePath);
    IRuleConfigParser parser = createParser(ruleConfigFileExtension);
    if (parser == null) {
        throw new InvalidRuleConfigException(
            "Rule config file format is not supported: " + ruleConfigFilePath);
    } 
    String configText = "";
    //ä»ruleConfigFilePathæ–‡ä»¶ä¸­è¯»å–é…ç½®æ–‡æœ¬åˆ°configTextä¸­
    RuleConfig ruleConfig = parser.parse(configText);
    return ruleConfig;
}

private String getFileExtension(String filePath) {
    //...è§£ææ–‡ä»¶åè·å–æ‰©å±•åï¼Œæ¯”å¦‚rule.jsonï¼Œè¿”å›json
    return "json";
}

private IRuleConfigParser createParser(String configFormat) {
    IRuleConfigParser parser = null;
    if ("json".equalsIgnoreCase(configFormat)) {
        parser = new JsonRuleConfigParser();
    } else if ("xml".equalsIgnoreCase(configFormat)) {
        parser = new XmlRuleConfigParser();
    } else if ("yaml".equalsIgnoreCase(configFormat)) {
        parser = new YamlRuleConfigParser();
    } else if ("properties".equalsIgnoreCase(configFormat)) {
        parser = new PropertiesRuleConfigParser();
    }
    return parser;
}
```

ä¸ºäº†è®©ç±»çš„èŒè´£æ›´åŠ å•ä¸€ã€ä»£ç æ›´åŠ æ¸…æ™°ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è¿›ä¸€æ­¥å°† createParser() å‡½æ•°å‰¥ç¦»åˆ°ä¸€ä¸ªç‹¬ç«‹çš„ç±»ä¸­ï¼Œè®©è¿™ä¸ªç±»åªè´Ÿè´£å¯¹è±¡çš„åˆ›å»ºã€‚è€Œè¿™ä¸ªç±»å°±æ˜¯æˆ‘ä»¬ç°åœ¨è¦è®²çš„ç®€å•å·¥å‚æ¨¡å¼ç±»ã€‚å…·ä½“çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```java
public class RuleConfigSource {
    public RuleConfig load(String ruleConfigFilePath) {
        String ruleConfigFileExtension = getFileExtension(ruleConfigFilePath);
        IRuleConfigParser parser = RuleConfigParserFactory.createParser(ruleConfig);
        if (parser == null) {
            throw new InvalidRuleConfigException(
                "Rule config file format is not supported: " + ruleConfigFilePath);
        } 
        String configText = "";
        //ä»ruleConfigFilePathæ–‡ä»¶ä¸­è¯»å–é…ç½®æ–‡æœ¬åˆ°configTextä¸­
        RuleConfig ruleConfig = parser.parse(configText);
        return ruleConfig;
    } private String getFileExtension(String filePath) {
        //...è§£ææ–‡ä»¶åè·å–æ‰©å±•åï¼Œæ¯”å¦‚rule.jsonï¼Œè¿”å›json
        return "json";
    }
}

public class RuleConfigParserFactory {
    public static IRuleConfigParser createParser(String configFormat) {
        IRuleConfigParser parser = null;
        if ("json".equalsIgnoreCase(configFormat)) {
            parser = new JsonRuleConfigParser();
        } else if ("xml".equalsIgnoreCase(configFormat)) {
            parser = new XmlRuleConfigParser();
        } else if ("yaml".equalsIgnoreCase(configFormat)) {
            parser = new YamlRuleConfigParser();
        } else if ("properties".equalsIgnoreCase(configFormat)) {
            parser = new PropertiesRuleConfigParser();
        }
        return parser;
    }
}
```

å¤§éƒ¨åˆ†å·¥å‚ç±»éƒ½æ˜¯ä»¥â€œFactoryâ€è¿™ä¸ªå•è¯ç»“å°¾çš„ï¼Œä½†ä¹Ÿä¸æ˜¯å¿…é¡»çš„ï¼Œæ¯”å¦‚ Java ä¸­çš„ DateFormatã€Calenderã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå·¥å‚ç±»ä¸­åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•ä¸€èˆ¬éƒ½æ˜¯ create å¼€å¤´ï¼Œæ¯”å¦‚ä»£ç ä¸­çš„ createParser()ï¼Œä½†æœ‰çš„ä¹Ÿå‘½åä¸º getInstance()ã€createInstance()ã€newInstance()ï¼Œæœ‰çš„ç”šè‡³å‘½åä¸º valueOf()ï¼ˆæ¯”å¦‚ Java String ç±»çš„ valueOf() å‡½æ•°ï¼‰ç­‰ç­‰ï¼Œè¿™ä¸ªæˆ‘ä»¬æ ¹æ®å…·ä½“çš„åœºæ™¯å’Œä¹ æƒ¯æ¥å‘½åå°±å¥½ã€‚

åœ¨ä¸Šé¢çš„ä»£ç å®ç°ä¸­ï¼Œæˆ‘ä»¬æ¯æ¬¡è°ƒç”¨ RuleConfigParserFactory çš„ createParser() çš„æ—¶å€™ï¼Œéƒ½è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ parserã€‚å®é™…ä¸Šï¼Œå¦‚æœ parser å¯ä»¥å¤ç”¨ï¼Œ**ä¸ºäº†èŠ‚çœå†…å­˜å’Œå¯¹è±¡åˆ›å»ºçš„æ—¶é—´ï¼Œæˆ‘ä»¬å¯ä»¥å°† parser äº‹å…ˆåˆ›å»ºå¥½ç¼“å­˜èµ·æ¥**ã€‚å½“è°ƒç”¨ createParser() å‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä»ç¼“å­˜ä¸­å–å‡º parser å¯¹è±¡ç›´æ¥ä½¿ç”¨ã€‚

è¿™æœ‰ç‚¹ç±»ä¼¼å•ä¾‹æ¨¡å¼å’Œç®€å•å·¥å‚æ¨¡å¼çš„ç»“åˆï¼Œå…·ä½“çš„ä»£ç å®ç°å¦‚ä¸‹æ‰€ç¤ºã€‚åœ¨æ¥ä¸‹æ¥çš„è®²è§£ ä¸­ï¼Œæˆ‘ä»¬æŠŠä¸Šä¸€ç§å®ç°æ–¹æ³•å«ä½œç®€å•å·¥å‚æ¨¡å¼çš„ç¬¬ä¸€ç§å®ç°æ–¹æ³•ï¼ŒæŠŠä¸‹é¢è¿™ç§å®ç°æ–¹æ³•å«ä½œç®€å•å·¥å‚æ¨¡å¼çš„ç¬¬äºŒç§å®ç°æ–¹æ³•ã€‚

```java
public class RuleConfigParserFactory {
    private static final Map<String, RuleConfigParser> cachedParsers = new HashMa
        static {
        cachedParsers.put("json", new JsonRuleConfigParser());
        cachedParsers.put("xml", new XmlRuleConfigParser());
        cachedParsers.put("yaml", new YamlRuleConfigParser());
        cachedParsers.put("properties", new PropertiesRuleConfigParser());
    } 
    public static IRuleConfigParser createParser(String configFormat) {
        if (configFormat == null || configFormat.isEmpty()) {
            return null;//è¿”å›nullè¿˜æ˜¯IllegalArgumentExceptionå…¨å‡­ä½ è‡ªå·±è¯´äº†ç®—
        }
        IRuleConfigParser parser = cachedParsers.get(configFormat.toLowerCase());
        return parser;
    }
}
```

å¯¹äºä¸Šé¢ä¸¤ç§ç®€å•å·¥å‚æ¨¡å¼çš„å®ç°æ–¹æ³•ï¼Œå¦‚æœæˆ‘ä»¬è¦æ·»åŠ æ–°çš„ parserï¼Œé‚£åŠ¿å¿…è¦æ”¹åŠ¨åˆ°RuleConfigParserFactory çš„ä»£ç ï¼Œé‚£è¿™æ˜¯ä¸æ˜¯è¿åå¼€é—­åŸåˆ™å‘¢ï¼Ÿå®é™…ä¸Šï¼Œå¦‚æœä¸æ˜¯éœ€è¦é¢‘ç¹åœ°æ·»åŠ æ–°çš„ parserï¼Œåªæ˜¯å¶å°”ä¿®æ”¹ä¸€ä¸‹ RuleConfigParserFactory ä»£ç ï¼Œç¨å¾®ä¸ç¬¦åˆå¼€é—­åŸåˆ™ï¼Œä¹Ÿæ˜¯å®Œå…¨å¯ä»¥æ¥å—çš„ã€‚

é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨ RuleConfigParserFactory çš„ç¬¬ä¸€ç§ä»£ç å®ç°ä¸­ï¼Œæœ‰ä¸€ç»„ if åˆ†æ”¯åˆ¤æ–­é€»è¾‘ï¼Œ æ˜¯ä¸æ˜¯åº”è¯¥ç”¨å¤šæ€æˆ–å…¶ä»–è®¾è®¡æ¨¡å¼æ¥æ›¿ä»£å‘¢ï¼Ÿå®é™…ä¸Šï¼Œå¦‚æœ if åˆ†æ”¯å¹¶ä¸æ˜¯å¾ˆå¤šï¼Œä»£ç ä¸­æœ‰ if åˆ†æ”¯ä¹Ÿæ˜¯å®Œå…¨å¯ä»¥æ¥å—çš„ã€‚**åº”ç”¨å¤šæ€æˆ–è®¾è®¡æ¨¡å¼æ¥æ›¿ä»£ if åˆ†æ”¯åˆ¤æ–­é€»è¾‘ï¼Œä¹Ÿå¹¶ä¸æ˜¯æ²¡æœ‰ä»»ä½•ç¼ºç‚¹çš„ï¼Œå®ƒè™½ç„¶æé«˜äº†ä»£ç çš„æ‰©å±•æ€§ï¼Œæ›´åŠ ç¬¦åˆå¼€é—­åŸåˆ™ï¼Œä½†ä¹Ÿå¢åŠ äº†ç±»çš„ä¸ªæ•°ï¼Œç‰ºç‰²äº†ä»£ç çš„å¯è¯»æ€§ã€‚**å…³äºè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬åœ¨åé¢ç« èŠ‚ä¸­ä¼šè¯¦ç»†è®²åˆ°ã€‚

æ€»ç»“ä¸€ä¸‹ï¼Œå°½ç®¡ç®€å•å·¥å‚æ¨¡å¼çš„ä»£ç å®ç°ä¸­ï¼Œæœ‰å¤šå¤„ if åˆ†æ”¯åˆ¤æ–­é€»è¾‘ï¼Œè¿èƒŒå¼€é—­åŸåˆ™ï¼Œä½†æƒè¡¡æ‰©å±•æ€§å’Œå¯è¯»æ€§ï¼Œè¿™æ ·çš„ä»£ç å®ç°åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ˆæ¯”å¦‚ï¼Œä¸éœ€è¦é¢‘ç¹åœ°æ·»åŠ  parserï¼Œä¹Ÿæ²¡æœ‰å¤ªå¤šçš„ parserï¼‰æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚

## äºŒã€å·¥å‚æ–¹æ³•ï¼ˆFactory Methodï¼‰

å¦‚æœæˆ‘ä»¬éå¾—**è¦å°† if åˆ†æ”¯é€»è¾‘å»æ‰ï¼Œé‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæ¯”è¾ƒç»å…¸å¤„ç†æ–¹æ³•å°±æ˜¯åˆ©ç”¨å¤šæ€**ã€‚æŒ‰ç…§å¤šæ€çš„å®ç°æ€è·¯ï¼Œå¯¹ä¸Šé¢çš„ä»£ç è¿›è¡Œé‡æ„ã€‚é‡æ„ä¹‹åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```java
public interface IRuleConfigParserFactory {
    IRuleConfigParser createParser();
} 

public class JsonRuleConfigParserFactory implements IRuleConfigParserFactory {
    @Override
    public IRuleConfigParser createParser() {
        return new JsonRuleConfigParser();
    }
} 

public class XmlRuleConfigParserFactory implements IRuleConfigParserFactory {
    @Override
    public IRuleConfigParser createParser() {
        return new XmlRuleConfigParser();
    }
} 

public class YamlRuleConfigParserFactory implements IRuleConfigParserFactory {
    @Override
    public IRuleConfigParser createParser() {
        return new YamlRuleConfigParser();
    }
} 

public class PropertiesRuleConfigParserFactory implements IRuleConfigParserFactory{
    @Override
    public IRuleConfigParser createParser() {
        return new PropertiesRuleConfigParser();
    }
}
```

å®é™…ä¸Šï¼Œè¿™å°±æ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„å…¸å‹ä»£ç å®ç°ã€‚è¿™æ ·å½“æˆ‘ä»¬æ–°å¢ä¸€ç§ parser çš„æ—¶å€™ï¼Œåªéœ€è¦æ–°å¢ä¸€ä¸ªå®ç°äº† IRuleConfigParserFactory æ¥å£çš„ Factory ç±»å³å¯ã€‚æ‰€ä»¥ï¼Œ**å·¥å‚æ–¹æ³•æ¨¡å¼æ¯”èµ·ç®€å•å·¥å‚æ¨¡å¼æ›´åŠ ç¬¦åˆå¼€é—­åŸåˆ™ã€‚**

ä»ä¸Šé¢çš„å·¥å‚æ–¹æ³•çš„å®ç°æ¥çœ‹ï¼Œä¸€åˆ‡éƒ½å¾ˆå®Œç¾ï¼Œä½†æ˜¯å®é™…ä¸Šå­˜åœ¨æŒºå¤§çš„é—®é¢˜ã€‚é—®é¢˜å­˜åœ¨äºè¿™äº›å·¥å‚ç±»çš„ä½¿ç”¨ä¸Šã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ï¼Œå¦‚ä½•ç”¨è¿™äº›å·¥å‚ç±»æ¥å®ç° RuleConfigSource çš„ load() å‡½æ•°ã€‚å…·ä½“çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```java
public class RuleConfigSource {
    public RuleConfig load(String ruleConfigFilePath) {
        String ruleConfigFileExtension = getFileExtension(ruleConfigFilePath);
        IRuleConfigParserFactory parserFactory = null;
        if ("json".equalsIgnoreCase(ruleConfigFileExtension)) {
            parserFactory = new JsonRuleConfigParserFactory();
        } else if ("xml".equalsIgnoreCase(ruleConfigFileExtension)) {
            parserFactory = new XmlRuleConfigParserFactory();
        } else if ("yaml".equalsIgnoreCase(ruleConfigFileExtension)) {
            parserFactory = new YamlRuleConfigParserFactory();
        } else if ("properties".equalsIgnoreCase(ruleConfigFileExtension)) {
            parserFactory = new PropertiesRuleConfigParserFactory();
        } else {
            throw new InvalidRuleConfigException("Rule config file format is not supply");
        }
        IRuleConfigParser parser = parserFactory.createParser();
        String configText = "";
        //ä»ruleConfigFilePathæ–‡ä»¶ä¸­è¯»å–é…ç½®æ–‡æœ¬åˆ°configTextä¸­
        RuleConfig ruleConfig = parser.parse(configText);
        return ruleConfig;
    } 
    private String getFileExtension(String filePath) {
        //...è§£ææ–‡ä»¶åè·å–æ‰©å±•åï¼Œæ¯”å¦‚rule.jsonï¼Œè¿”å›json
        return "json";
    }
}
```

ä»ä¸Šé¢çš„ä»£ç å®ç°æ¥çœ‹ï¼Œå·¥å‚ç±»å¯¹è±¡çš„åˆ›å»ºé€»è¾‘åˆè€¦åˆè¿›äº† load() å‡½æ•°ä¸­ï¼Œè·Ÿæˆ‘ä»¬æœ€åˆçš„ä»£ç ç‰ˆæœ¬éå¸¸ç›¸ä¼¼ï¼Œå¼•å…¥å·¥å‚æ–¹æ³•éä½†æ²¡æœ‰è§£å†³é—®é¢˜ï¼Œåå€’è®©è®¾è®¡å˜å¾—æ›´åŠ å¤æ‚äº†ã€‚é‚£æ€ä¹ˆæ¥è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ

**æˆ‘ä»¬å¯ä»¥ä¸ºå·¥å‚ç±»å†åˆ›å»ºä¸€ä¸ªç®€å•å·¥å‚ï¼Œä¹Ÿå°±æ˜¯å·¥å‚çš„å·¥å‚ï¼Œç”¨æ¥åˆ›å»ºå·¥å‚ç±»å¯¹è±¡ã€‚**è¿™æ®µè¯å¬èµ·æ¥æœ‰ç‚¹ç»•ï¼Œæˆ‘æŠŠä»£ç å®ç°å‡ºæ¥äº†ï¼Œä½ ä¸€çœ‹å°±èƒ½æ˜ç™½äº†ã€‚å…¶ä¸­ï¼Œ RuleConfigParserFactoryMap ç±»æ˜¯åˆ›å»ºå·¥å‚å¯¹è±¡çš„å·¥å‚ç±»ï¼ŒgetParserFactory() è¿”å›çš„ æ˜¯ç¼“å­˜å¥½çš„å•ä¾‹å·¥å‚å¯¹è±¡ã€‚

```java
public class RuleConfigSource {
    public RuleConfig load(String ruleConfigFilePath) {
        String ruleConfigFileExtension = getFileExtension(ruleConfigFilePath);
        IRuleConfigParserFactory parserFactory = RuleConfigParserFactoryMap.getPars();
        if (parserFactory == null) {
            throw new InvalidRuleConfigException("Rule config file format is not supp");
        }
        IRuleConfigParser parser = parserFactory.createParser();
        String configText = "";
        //ä»ruleConfigFilePathæ–‡ä»¶ä¸­è¯»å–é…ç½®æ–‡æœ¬åˆ°configTextä¸­
        RuleConfig ruleConfig = parser.parse(configText);
        return ruleConfig;
    } 
    private String getFileExtension(String filePath) {
        //...è§£ææ–‡ä»¶åè·å–æ‰©å±•åï¼Œæ¯”å¦‚rule.jsonï¼Œè¿”å›json
        return "json";
    }
} 

//å› ä¸ºå·¥å‚ç±»åªåŒ…å«æ–¹æ³•ï¼Œä¸åŒ…å«æˆå‘˜å˜é‡ï¼Œå®Œå…¨å¯ä»¥å¤ç”¨ï¼Œ
//ä¸éœ€è¦æ¯æ¬¡éƒ½åˆ›å»ºæ–°çš„å·¥å‚ç±»å¯¹è±¡ï¼Œæ‰€ä»¥ï¼Œç®€å•å·¥å‚æ¨¡å¼çš„ç¬¬äºŒç§å®ç°æ€è·¯æ›´åŠ åˆé€‚ã€‚
public class RuleConfigParserFactoryMap { //å·¥å‚çš„å·¥å‚
    private static final Map<String, IRuleConfigParserFactory> cachedFactories = new HashMap<>();
    static {
        cachedFactories.put("json", new JsonRuleConfigParserFactory());
        cachedFactories.put("xml", new XmlRuleConfigParserFactory());
        cachedFactories.put("yaml", new YamlRuleConfigParserFactory());
        cachedFactories.put("properties", new PropertiesRuleConfigParserFactory());
    } 
    public static IRuleConfigParserFactory getParserFactory(String type) {
        if (type == null || type.isEmpty()) {
            return null;
        }
        IRuleConfigParserFactory parserFactory = cachedFactories.get(type.toLowerCase());
        return parserFactory;
    }
}
```

å½“æˆ‘ä»¬éœ€è¦æ·»åŠ æ–°çš„è§„åˆ™é…ç½®è§£æå™¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ›å»ºæ–°çš„ parser ç±»å’Œ parser factory ç±»ï¼Œå¹¶ä¸”åœ¨ RuleConfigParserFactoryMap ç±»ä¸­ï¼Œå°†æ–°çš„ parser factory å¯¹è±¡æ·»åŠ åˆ° cachedFactories ä¸­å³å¯ã€‚ä»£ç çš„æ”¹åŠ¨éå¸¸å°‘ï¼ŒåŸºæœ¬ä¸Šç¬¦åˆå¼€é—­åŸåˆ™ã€‚

å®é™…ä¸Šï¼Œå¯¹äºè§„åˆ™é…ç½®æ–‡ä»¶è§£æè¿™ä¸ªåº”ç”¨åœºæ™¯æ¥è¯´ï¼Œå·¥å‚æ¨¡å¼éœ€è¦é¢å¤–åˆ›å»ºè¯¸å¤š Factory ç±»ï¼Œä¹Ÿä¼šå¢åŠ ä»£ç çš„å¤æ‚æ€§ï¼Œè€Œä¸”ï¼Œæ¯ä¸ª Factory ç±»åªæ˜¯åšç®€å•çš„ new æ“ä½œï¼ŒåŠŸèƒ½éå¸¸å•è–„ï¼ˆåªæœ‰ä¸€è¡Œä»£ç ï¼‰ï¼Œä¹Ÿæ²¡å¿…è¦è®¾è®¡æˆç‹¬ç«‹çš„ç±»ï¼Œæ‰€ä»¥ï¼Œåœ¨è¿™ä¸ªåº”ç”¨åœºæ™¯ä¸‹ï¼Œç®€å•å·¥å‚æ¨¡å¼ç®€å•å¥½ç”¨ï¼Œæ¯”å·¥æ–¹æ³•å‚æ¨¡å¼æ›´åŠ åˆé€‚ã€‚

**é‚£ä»€ä¹ˆæ—¶å€™è¯¥ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œè€Œéç®€å•å·¥å‚æ¨¡å¼å‘¢ï¼Ÿ**

æˆ‘ä»¬å‰é¢æåˆ°ï¼Œä¹‹æ‰€ä»¥å°†æŸä¸ªä»£ç å—å‰¥ç¦»å‡ºæ¥ï¼Œç‹¬ç«‹ä¸ºå‡½æ•°æˆ–è€…ç±»ï¼ŒåŸå› æ˜¯è¿™ä¸ªä»£ç å—çš„é€»è¾‘è¿‡äºå¤æ‚ï¼Œå‰¥ç¦»ä¹‹åèƒ½è®©ä»£ç æ›´åŠ æ¸…æ™°ï¼Œæ›´åŠ å¯è¯»ã€å¯ç»´æŠ¤ã€‚ä½†æ˜¯ï¼Œå¦‚æœä»£ç å—æœ¬èº«å¹¶ä¸å¤æ‚ï¼Œå°±å‡ è¡Œä»£ç è€Œå·²ï¼Œæˆ‘ä»¬å®Œå…¨æ²¡å¿…è¦å°†å®ƒæ‹†åˆ†æˆå•ç‹¬çš„å‡½æ•°æˆ–è€…ç±»ã€‚

åŸºäºè¿™ä¸ªè®¾è®¡æ€æƒ³ï¼Œå½“å¯¹è±¡çš„åˆ›å»ºé€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œä¸åªæ˜¯ç®€å•çš„ new ä¸€ä¸‹å°±å¯ä»¥ï¼Œè€Œæ˜¯è¦ç»„åˆå…¶ä»–ç±»å¯¹è±¡ï¼Œåšå„ç§åˆå§‹åŒ–æ“ä½œçš„æ—¶å€™ï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œå°†å¤æ‚çš„åˆ›å»ºé€»è¾‘æ‹†åˆ†åˆ°å¤šä¸ªå·¥å‚ç±»ä¸­ï¼Œè®©æ¯ä¸ªå·¥å‚ç±»éƒ½ä¸è‡³äºè¿‡äºå¤æ‚ã€‚è€Œä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼ï¼Œå°†æ‰€æœ‰çš„åˆ›å»ºé€»è¾‘éƒ½æ”¾åˆ°ä¸€ä¸ªå·¥å‚ç±»ä¸­ï¼Œä¼šå¯¼è‡´è¿™ä¸ªå·¥å‚ç±»å˜å¾—å¾ˆå¤æ‚ã€‚

é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œå¦‚æœå¯¹è±¡ä¸å¯å¤ç”¨ï¼Œé‚£å·¥å‚ç±»æ¯æ¬¡éƒ½è¦è¿”å›ä¸åŒçš„å¯¹è±¡ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼æ¥å®ç°ï¼Œå°±åªèƒ½é€‰æ‹©ç¬¬ä¸€ç§åŒ…å« if åˆ†æ”¯é€»è¾‘çš„å®ç°æ–¹å¼ã€‚å¦‚æœæˆ‘ä»¬è¿˜æƒ³é¿å…çƒ¦äººçš„ if-else åˆ†æ”¯é€»è¾‘ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±æ¨èä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼ã€‚

## ä¸‰ã€æŠ½è±¡å·¥å‚ï¼ˆAbstract Factoryï¼‰

è®²å®Œäº†ç®€å•å·¥å‚ã€å·¥å‚æ–¹æ³•ï¼Œæˆ‘ä»¬å†æ¥çœ‹æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚æŠ½è±¡å·¥å‚æ¨¡å¼çš„åº”ç”¨åœºæ™¯æ¯”è¾ƒç‰¹æ®Šï¼Œæ²¡æœ‰å‰ä¸¤ç§å¸¸ç”¨ï¼Œæ‰€ä»¥ä¸æ˜¯æˆ‘ä»¬æœ¬èŠ‚è¯¾å­¦ä¹ çš„é‡ç‚¹ï¼Œä½ ç®€å•äº†è§£ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚

åœ¨ç®€å•å·¥å‚å’Œå·¥å‚æ–¹æ³•ä¸­ï¼Œç±»åªæœ‰ä¸€ç§åˆ†ç±»æ–¹å¼ã€‚æ¯”å¦‚ï¼Œåœ¨è§„åˆ™é…ç½®è§£æé‚£ä¸ªä¾‹å­ä¸­ï¼Œè§£æå™¨ç±»åªä¼šæ ¹æ®é…ç½®æ–‡ä»¶æ ¼å¼ï¼ˆJsonã€Xmlã€Yamlâ€¦â€¦ï¼‰æ¥åˆ†ç±»ã€‚ä½†æ˜¯ï¼Œå¦‚æœç±»æœ‰ä¸¤ç§åˆ†ç±»æ–¹å¼ï¼Œæ¯”å¦‚ï¼Œæˆ‘ä»¬æ—¢å¯ä»¥æŒ‰ç…§é…ç½®æ–‡ä»¶æ ¼å¼æ¥åˆ†ç±»ï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§è§£æçš„å¯¹è±¡ï¼ˆRule è§„åˆ™é…ç½®è¿˜æ˜¯ System ç³»ç»Ÿé…ç½®ï¼‰æ¥åˆ†ç±»ï¼Œé‚£å°±ä¼šå¯¹åº”ä¸‹é¢è¿™ 8 ä¸ª parser ç±»ã€‚

```java
é’ˆå¯¹è§„åˆ™é…ç½®çš„è§£æå™¨ï¼šåŸºäºæ¥å£IRuleConfigParser
JsonRuleConfigParser
XmlRuleConfigParser
YamlRuleConfigParser
PropertiesRuleConfigParser
é’ˆå¯¹ç³»ç»Ÿé…ç½®çš„è§£æå™¨ï¼šåŸºäºæ¥å£ISystemConfigParser
JsonSystemConfigParser
XmlSystemConfigParser
YamlSystemConfigParser
PropertiesSystemConfigParser
```

é’ˆå¯¹è¿™ç§ç‰¹æ®Šçš„åœºæ™¯ï¼Œå¦‚æœè¿˜æ˜¯ç»§ç»­ç”¨å·¥å‚æ–¹æ³•æ¥å®ç°çš„è¯ï¼Œæˆ‘ä»¬è¦é’ˆå¯¹æ¯ä¸ª parser éƒ½ç¼–å†™ä¸€ä¸ªå·¥å‚ç±»ï¼Œä¹Ÿå°±æ˜¯è¦ç¼–å†™ 8 ä¸ªå·¥å‚ç±»ã€‚å¦‚æœæˆ‘ä»¬æœªæ¥è¿˜éœ€è¦å¢åŠ é’ˆå¯¹ä¸šåŠ¡é…ç½®çš„è§£æå™¨ï¼ˆæ¯”å¦‚ IBizConfigParserï¼‰ï¼Œé‚£å°±è¦å†å¯¹åº”åœ°å¢åŠ  4 ä¸ªå·¥å‚ç±»ã€‚è€Œæˆ‘ä»¬çŸ¥é“ï¼Œè¿‡å¤šçš„ç±»ä¹Ÿä¼šè®©ç³»ç»Ÿéš¾ç»´æŠ¤ã€‚è¿™ä¸ªé—®é¢˜è¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ

æŠ½è±¡å·¥å‚å°±æ˜¯é’ˆå¯¹è¿™ç§éå¸¸ç‰¹æ®Šçš„åœºæ™¯è€Œè¯ç”Ÿçš„ã€‚æˆ‘ä»¬å¯ä»¥è®©ä¸€ä¸ªå·¥å‚è´Ÿè´£åˆ›å»ºå¤šä¸ªä¸åŒç±»å‹çš„å¯¹è±¡ï¼ˆIRuleConfigParserã€ISystemConfigParser ç­‰ï¼‰ï¼Œè€Œä¸æ˜¯åªåˆ›å»ºä¸€ç§ parser å¯¹è±¡ã€‚è¿™æ ·å°±å¯ä»¥æœ‰æ•ˆåœ°å‡å°‘å·¥å‚ç±»çš„ä¸ªæ•°ã€‚å…·ä½“çš„ä»£ç å®ç°å¦‚ä¸‹æ‰€ç¤ºï¼š

```java
public interface IConfigParserFactory {
    IRuleConfigParser createRuleParser();
    ISystemConfigParser createSystemParser();
    //æ­¤å¤„å¯ä»¥æ‰©å±•æ–°çš„parserç±»å‹ï¼Œæ¯”å¦‚IBizConfigParser
} 

public class JsonConfigParserFactory implements IConfigParserFactory {
    @Override
    public IRuleConfigParser createRuleParser() {
        return new JsonRuleConfigParser();
    } @Override
    public ISystemConfigParser createSystemParser() {
        return new JsonSystemConfigParser();
    }
} 

public class XmlConfigParserFactory implements IConfigParserFactory {
    @Override
    public IRuleConfigParser createRuleParser() {
        return new XmlRuleConfigParser();
    } 
    @Override
    public ISystemConfigParser createSystemParser() {
        return new XmlSystemConfigParser();
    }
} 

// çœç•¥YamlConfigParserFactoryå’ŒPropertiesConfigParserFactoryä»£ç 
```

## å››ã€é‡ç‚¹å›é¡¾

åœ¨ä»Šå¤©è®²çš„ä¸‰ç§å·¥å‚æ¨¡å¼ä¸­ï¼Œç®€å•å·¥å‚å’Œå·¥å‚æ–¹æ³•æ¯”è¾ƒå¸¸ç”¨ï¼ŒæŠ½è±¡å·¥å‚çš„åº”ç”¨åœºæ™¯æ¯”è¾ƒç‰¹ æ®Šï¼Œæ‰€ä»¥å¾ˆå°‘ç”¨åˆ°ï¼Œä¸æ˜¯æˆ‘ä»¬å­¦ä¹ çš„é‡ç‚¹ã€‚æ‰€ä»¥ï¼Œä¸‹é¢æˆ‘é‡ç‚¹å¯¹å‰ä¸¤ç§å·¥å‚æ¨¡å¼çš„åº”ç”¨åœºæ™¯è¿›è¡Œæ€»ç»“ã€‚

**å½“åˆ›å»ºé€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œæ˜¯ä¸€ä¸ªâ€œå¤§å·¥ç¨‹â€çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±è€ƒè™‘ä½¿ç”¨å·¥å‚æ¨¡å¼ï¼Œå°è£…å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼Œå°†å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨ç›¸åˆ†ç¦»ã€‚**ä½•ä¸ºåˆ›å»ºé€»è¾‘æ¯”è¾ƒå¤æ‚å‘¢ï¼Ÿæˆ‘==æ€»ç»“äº†ä¸‹é¢ä¸¤ç§æƒ…å†µ==ã€‚

ç¬¬ä¸€ç§æƒ…å†µï¼šç±»ä¼¼è§„åˆ™é…ç½®è§£æçš„ä¾‹å­ï¼Œä»£ç ä¸­å­˜åœ¨ if-else åˆ†æ”¯åˆ¤æ–­ï¼ŒåŠ¨æ€åœ°æ ¹æ®ä¸åŒçš„ç±»å‹åˆ›å»ºä¸åŒçš„å¯¹è±¡ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å°±è€ƒè™‘ä½¿ç”¨å·¥å‚æ¨¡å¼ï¼Œå°†è¿™ä¸€å¤§å¨ if-else åˆ›å»ºå¯¹è±¡çš„ä»£ç æŠ½ç¦»å‡ºæ¥ï¼Œæ”¾åˆ°å·¥å‚ç±»ä¸­ã€‚

è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œå°½ç®¡æˆ‘ä»¬ä¸éœ€è¦æ ¹æ®ä¸åŒçš„ç±»å‹åˆ›å»ºä¸åŒçš„å¯¹è±¡ï¼Œä½†æ˜¯ï¼Œå•ä¸ªå¯¹è±¡æœ¬èº«çš„åˆ›å»ºè¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œæ¯”å¦‚å‰é¢æåˆ°çš„è¦ç»„åˆå…¶ä»–ç±»å¯¹è±¡ï¼Œåšå„ç§åˆå§‹åŒ–æ“ä½œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è€ƒè™‘ä½¿ç”¨å·¥å‚æ¨¡å¼ï¼Œå°†å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹å°è£…åˆ°å·¥å‚ç±»ä¸­ã€‚

å¯¹äºç¬¬ä¸€ç§æƒ…å†µï¼Œå½“æ¯ä¸ªå¯¹è±¡çš„åˆ›å»ºé€»è¾‘éƒ½æ¯”è¾ƒç®€å•çš„æ—¶å€™ï¼Œæˆ‘æ¨èä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼ï¼Œå°†å¤šä¸ªå¯¹è±¡çš„åˆ›å»ºé€»è¾‘æ”¾åˆ°ä¸€ä¸ªå·¥å‚ç±»ä¸­ã€‚å½“æ¯ä¸ªå¯¹è±¡çš„åˆ›å»ºé€»è¾‘éƒ½æ¯”è¾ƒå¤æ‚çš„æ—¶å€™ï¼Œä¸ºäº†é¿å…è®¾è®¡ä¸€ä¸ªè¿‡äºåºå¤§çš„ç®€å•å·¥å‚ç±»ï¼Œæˆ‘æ¨èä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œå°†åˆ›å»ºé€»è¾‘æ‹†åˆ†å¾—æ›´ç»†ï¼Œæ¯ä¸ªå¯¹è±¡çš„åˆ›å»ºé€»è¾‘ç‹¬ç«‹åˆ°å„è‡ªçš„å·¥å‚ç±»ä¸­ã€‚åŒç†ï¼Œå¯¹äºç¬¬äºŒç§æƒ…å†µï¼Œå› ä¸ºå•ä¸ªå¯¹è±¡æœ¬èº«çš„åˆ›å»ºé€»è¾‘å°±æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥ï¼Œæˆ‘å»ºè®®ä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼ã€‚

é™¤äº†åˆšåˆšæåˆ°çš„è¿™å‡ ç§æƒ…å†µä¹‹å¤–ï¼Œå¦‚æœåˆ›å»ºå¯¹è±¡çš„é€»è¾‘å¹¶ä¸å¤æ‚ï¼Œé‚£æˆ‘ä»¬å°±ç›´æ¥é€šè¿‡ new æ¥åˆ›å»ºå¯¹è±¡å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦ä½¿ç”¨å·¥å‚æ¨¡å¼ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬ä¸Šå‡ä¸€ä¸ªæ€ç»´å±‚é¢æ¥çœ‹å·¥å‚æ¨¡å¼ï¼Œå®ƒçš„ä½œç”¨æ— å¤–ä¹ä¸‹é¢è¿™å››ä¸ªã€‚è¿™ä¹Ÿæ˜¯åˆ¤æ–­è¦ä¸è¦ä½¿ç”¨å·¥å‚æ¨¡å¼çš„æœ€æœ¬è´¨çš„å‚è€ƒæ ‡å‡†ã€‚

- å°è£…å˜åŒ–ï¼šåˆ›å»ºé€»è¾‘æœ‰å¯èƒ½å˜åŒ–ï¼Œå°è£…æˆå·¥å‚ç±»ä¹‹åï¼Œåˆ›å»ºé€»è¾‘çš„å˜æ›´å¯¹è°ƒç”¨è€…é€æ˜ã€‚
- ä»£ç å¤ç”¨ï¼šåˆ›å»ºä»£ç æŠ½ç¦»åˆ°ç‹¬ç«‹çš„å·¥å‚ç±»ä¹‹åå¯ä»¥å¤ç”¨ã€‚
- éš”ç¦»å¤æ‚æ€§ï¼šå°è£…å¤æ‚çš„åˆ›å»ºé€»è¾‘ï¼Œè°ƒç”¨è€…æ— éœ€äº†è§£å¦‚ä½•åˆ›å»ºå¯¹è±¡ã€‚
- æ§åˆ¶å¤æ‚åº¦ï¼šå°†åˆ›å»ºä»£ç æŠ½ç¦»å‡ºæ¥ï¼Œè®©åŸæœ¬çš„å‡½æ•°æˆ–ç±»èŒè´£æ›´å•ä¸€ï¼Œä»£ç æ›´ç®€æ´ã€‚

## äº”ã€è¯¾å ‚è®¨è®º

1.  å·¥å‚æ¨¡å¼æ˜¯ä¸€ç§éå¸¸å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œåœ¨å¾ˆå¤šå¼€æºé¡¹ç›®ã€å·¥å…·ç±»ä¸­åˆ°å¤„å¯è§ï¼Œæ¯”å¦‚ Java ä¸­çš„ Calendarã€DateFormat ç±»ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä½ è¿˜çŸ¥é“å“ªäº›ç”¨å·¥å‚æ¨¡å¼å®ç°ç±»ï¼Ÿå¯ä»¥ç•™è¨€è¯´ä¸€è¯´å®ƒä»¬ä¸ºä»€ä¹ˆè¦è®¾è®¡æˆå·¥å‚æ¨¡å¼ç±»ï¼Ÿ

2.  å®é™…ä¸Šï¼Œç®€å•å·¥å‚æ¨¡å¼è¿˜å«ä½œé™æ€å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆStatic Factory Method Patternï¼‰ã€‚ä¹‹æ‰€ä»¥å«é™æ€å·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œæ˜¯å› ä¸ºå…¶ä¸­åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•æ˜¯é™æ€çš„ã€‚é‚£ä¸ºä»€ä¹ˆè¦è®¾ç½®æˆ é™æ€çš„å‘¢ï¼Ÿè®¾ç½®æˆé™æ€çš„ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæ˜¯å¦ä¼šå½±å“åˆ°ä»£ç çš„å¯æµ‹è¯•æ€§å‘¢ï¼Ÿ
## å…­ã€ç²¾é€‰ç•™è¨€



 å¤æ‚åº¦æ— æ³•è¢«æ¶ˆé™¤ï¼Œåªèƒ½è¢«è½¬ç§»ï¼š

-   ä¸ç”¨å·¥å‚æ¨¡å¼ï¼Œif-else é€»è¾‘ã€åˆ›å»ºé€»è¾‘å’Œä¸šåŠ¡ä»£ç è€¦åˆåœ¨ä¸€èµ·

-   ç®€å•å·¥å‚æ˜¯å°†ä¸åŒåˆ›å»ºé€»è¾‘æ”¾åˆ°ä¸€ä¸ªå·¥å‚ç±»ä¸­ï¼Œif-else é€»è¾‘åœ¨è¿™ä¸ªå·¥å‚ç±»ä¸­

-   å·¥å‚æ–¹æ³•æ˜¯å°†ä¸åŒåˆ›å»ºé€»è¾‘æ”¾åˆ°ä¸åŒå·¥å‚ç±»ä¸­ï¼Œå…ˆç”¨ä¸€ä¸ªå·¥å‚ç±»çš„å·¥å‚æ¥æ¥å¾—åˆ°æŸä¸ªå·¥â€¦





 æˆ‘æŠŠHead Firstçš„å®šä¹‰è´´è¿‡æ¥ï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£æ€»ç»“
>
> å·¥å‚æ–¹æ³•æ¨¡å¼ï¼šå®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œä½†ç”±å­ç±»å†³å®šè¦å®ä¾‹åŒ–çš„ç±»æ˜¯å“ªä¸€ä¸ªã€‚å·¥å‚æ–¹æ³•è®©ç±»æŠŠå®ä¾‹åŒ–æ¨è¿Ÿåˆ°å­ç±»
>
> â€¦
>
> å±•å¼€î˜ƒ


å¯¹è±¡æ¯æ¬¡éƒ½è¦é‡ç”¨ï¼Œä¹Ÿå¯ä»¥ç”¨mapç¼“å­˜ï¼Œä¸è¿‡valueè¦æ”¹æˆå…¨ç±»åï¼Œé€šè¿‡åå°„æ¥åˆ›å»ºå¯¹è±¡ï¼Œ è¿™æ ·æ¯æ¬¡éƒ½æ˜¯ä¸€ä¸ªæ–°çš„ç±»äº†ï¼Œé™¤éé‚£ä¸ªç±»è¢«è®¾è®¡æˆç¦æ­¢åå°„è°ƒç”¨ã€‚
>
> å±•å¼€î˜ƒ


 ä¸€ã€ä¸‰ç§å·¥å‚æ¨¡å¼

1.  ç®€å•å·¥å‚ï¼ˆSimple Factoryï¼‰

> ä½¿ç”¨åœºæ™¯ï¼š
>
> a\. å½“æ¯ä¸ªå¯¹è±¡çš„åˆ›å»ºé€»è¾‘éƒ½æ¯”è¾ƒç®€å•çš„æ—¶å€™ï¼Œå°†å¤šä¸ªå¯¹è±¡çš„åˆ›å»ºé€»è¾‘æ”¾åˆ°ä¸€ä¸ªå·¥å‚ç±»ä¸­ã€‚â€¦
>
> å±•å¼€î˜ƒ

![](media/image22.png)![](media/image23.png)3

> ![](media/image24.png)**Jxin**
>
> 2020-02-13
>
> åˆ†æ­§ï¼š 1.æ–‡ä¸­è¯´ï¼Œåˆ›å»ºå¯¹è±¡ä¸å¤æ‚çš„æƒ…å†µä¸‹ç”¨newï¼Œå¤æ‚çš„æƒ…å†µç”¨å·¥å‚æ–¹æ³•ã€‚è¿™æè¿°æ²¡é—®é¢˜ï¼Œä½†å·¥å‚æ–¹æ³•é™¤äº†å¤„ç†å¤æ‚å¯¹è±¡åˆ›å»ºè¿™ä¸€èŒè´£ï¼Œè¿˜æœ‰å¢åŠ æ‰©å±•ç‚¹è¿™ä¼˜ç‚¹ã€‚å·¥å‚æ–¹æ³•ï¼Œåœ¨å¯èƒ½æœ‰æ‰©å±•éœ€æ±‚ï¼Œæ¯”å¦‚è¦åŠ å¯¹è±¡æ± ï¼Œç¼“å­˜ï¼Œæˆ–å…¶ä»–ä¸šåŠ¡éœ€æ±‚æ—¶ï¼Œå¯ä»¥æä¾›æ‰©å±•çš„åœ°æ–¹ã€‚æ‰€ä»¥ï¼Œé™¤éæ˜ç¡®ç¡®å®šè¯¥ç±»åªä¼šæœ‰ç®€å•æ•°æ®è½½ä½“çš„èŒè´£ï¼ˆå€¼å¯¹è±¡ï¼‰ï¼Œä¸ç„¶å»ºè®®è¿˜æ˜¯ç”¨å·¥å‚æ–¹æ³•å¥½ç‚¹ã€‚nâ€¦ å±•å¼€î˜ƒ

![](media/image25.png)![](media/image26.png)3

> ![](media/image27.png)**å‹¤åŠ³çš„æ˜é…±**
>
> 2020-02-12
>
> é‚£Springçš„BeanFactoryå®é™…ä¸Šä½¿ç”¨çš„æ˜¯ç®€å•å·¥å‚æ¨¡å¼ + å•ä¾‹æ¨¡å¼å¯¹å§ï¼Œå¦‚æœæ˜¯å·¥å‚æ¨¡å¼é‚£å°±æ˜¯ä½¿ç”¨ObjectFactoryå’ŒFactoryBeanæ¥å®ç°ã€‚ç¬¬ä¸‰æ–¹çš„å¤æ‚beançš„åˆå§‹åŒ–ä½¿ç”¨å·¥å‚æ¨¡å¼ï¼Œå¯¹äºæ™®é€šçš„beanç»Ÿä¸€å¤„ç†ï¼Œè™½ç„¶å¤æ‚ä½†æ²¡å¿…è¦ä½¿ç”¨å·¥å‚ã€‚
>
> å±•å¼€î˜ƒ

![](media/image25.png)![](media/image26.png)3

> ![](media/image28.png)**è¾£ä¹ˆå¤§**
>
> 2020-02-12
>
> åœ¨JDKä¸­å·¥å‚æ–¹æ³•çš„å‘½åæœ‰äº›è§„èŒƒï¼š

1.  valueOf() è¿”å›ä¸å…¥å‚ç›¸ç­‰çš„å¯¹è±¡ä¾‹å¦‚ Integer.valueOf()

2.  getInstance() è¿”å›å•ä¾‹å¯¹è±¡ä¾‹å¦‚ Calendar.getInstance()â€¦

> å±•å¼€î˜ƒ
>
> ![](media/image22.png)![](media/image23.png)2
>
> ![](media/image29.png)**å”é¾™**
>
> 2020-02-12
>
> è¯•ç€æŠŠä»£ç ç¿»è¯‘æˆäº†C++è¯­è¨€ï¼Œåº”è¯¥ç®—æ˜¯ææ‡‚äº†(ä»¥å‰åªä¼šå•ä¾‹)ã€‚ç›®å‰æ²¡å†™è¿‡ç‰¹åˆ«å¤æ‚çš„é¡¹ç›®ï¼Œç®€å•å·¥å‚å¯¹æˆ‘ä¸ªäººæ¥è¯´å¤Ÿç”¨äº†ã€‚
>
> å±•å¼€î˜ƒ

![](media/image22.png)![](media/image23.png)2

> ![](media/image30.png)**æå°å››**
>
> 2020-02-23
>
> è®¾è®¡æ¨¡å¼\_44:
>
> \# ä½œä¸š
>
> 1\. Androidå¼€å‘ä¸­å·¥å‚æ¨¡å¼ä¹Ÿå¾ˆå¸¸ç”¨ï¼Œæ¯”å¦‚\`BitmapFactory\`ç±»ï¼›ç”¨å·¥å‚æ¨¡å¼çš„åŸå› æ˜¯\`Bit map\`å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ä¸åŒçš„æ–¹å¼æ¥åˆ›å»ºã€‚
>
> â€¦
>
> å±•å¼€î˜ƒ

![](media/image31.png)![](media/image32.png)1

> ![](media/image33.png)**å°æ™å­**
>
> 2020-02-12
>
> java.text.NumberFormatæ˜¯ä½¿ç”¨å·¥å‚æ¨¡å¼å®ç°çš„ï¼Œå®ƒå¯ä»¥æ ¹æ®ç‰¹å®šçš„åŒºåŸŸè®¾ç½®æ ¼å¼åŒ–æ•°å­—ï¼Œè¿™ä¸ªç±»è®¾ç½®æˆå·¥å‚æ¨¡å¼æ˜¯å› ä¸ºå…¨ä¸–ç•Œæœ‰å¾ˆå¤šä¸åŒçš„åŒºåŸŸï¼Œæœ‰å¾ˆå¤šä¸åŒçš„æ•°å­—è¡¨ç¤ºæ³•ï¼Œ æ‰€æœ‰ä»å¼€é—­åŸåˆ™è§’åº¦ï¼Œç”¨å·¥å‚æ¨¡å¼å®ç°å¯ä»¥æ–¹ä¾¿çš„å¢åŠ å¯¹ä¸åŒåŒºåŸŸæ•°å­—è½¬æ¢çš„æ”¯æŒã€‚
>
> ä½¿ç”¨é™æ€æ–¹æ³•åˆ›å»ºå¯¹è±¡é¦–å…ˆå¯ä»¥ä½¿å¾—åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•åå­—æ›´æœ‰æ„ä¹‰ï¼Œä½¿ç”¨è€…çœ‹åˆ°æ–¹æ³•åå°±çŸ¥é“ä»€ä¹ˆæ„æ€äº†ï¼Œæé«˜äº†ä»£ç çš„å¯è¯»æ€§ã€‚å…¶æ¬¡ä½¿ç”¨é™æ€æ–¹æ³•åˆ›å»ºå¯¹è±¡å¯ä»¥é‡å¤ä½¿ç”¨äº‹å…ˆâ€¦
>
> å±•å¼€î˜ƒ

![](media/image34.png)![](media/image35.png)1

> ![](media/image36.png)**é«˜æº**
>
> 2020-02-12
>
> è€å¸ˆæœ€å¥½æä¾›ä½ è®²è¯¾ä¾‹å­ä»£ç å®Œæ•´çš„ç‰ˆæœ¬ï¼Œç»“åˆä½ è®²çš„å†…å®¹æ¶ˆåŒ–ç†è§£ğŸ˜Š

![](media/image37.png)![](media/image35.png)2 1

> ![](media/image38.png)**DullBird**
>
> 2020-02-24

1.  Executorsåˆ©ç”¨é™æ€æ–¹æ³•åšå·¥å‚æ–¹æ³•ï¼Œdubboçš„spiä¹Ÿæ˜¯å·¥å‚çš„æ€è·¯

2.  é¦–å…ˆåŒ…å«ç®€å•å·¥å‚æ–¹æ³•çš„å¯¹è±¡ï¼Œæ²¡æœ‰å¿…è¦æœ‰æ„é€ å‡½æ•°ã€‚å› ä¸ºä»–åªæ˜¯åˆ›å»ºå¯¹è±¡çš„ä¸€ä¸ªç±»ã€‚ä¸ç”¨å®ä¾‹åŒ–ï¼Œæ‰€ä»¥å¦‚æœæ–¹æ³•ä¸æ˜¯é™æ€çš„ï¼Œå°±æ²¡æ³•è°ƒç”¨äº†ã€‚

3.  æˆ‘è®¤ä¸ºä¸å½±å“å¯æµ‹è¯•æ€§ï¼Œå› ä¸ºé™æ€æ–¹æ³•ä»…ä»…è¿”å›äº†ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œéœ€è¦æµ‹è¯•çš„åº”è¯¥æ˜¯è¿™ä¸ªå¯¹è±¡çš„è¢«ä½ è°ƒç”¨çš„æ–¹æ³•ã€‚å¹¶ä¸æ˜¯æ‹¿åˆ°è¿™ä¸ªå¯¹è±¡çš„è¿‡ç¨‹ã€‚

> å±•å¼€î˜ƒ

![](media/image39.png)![](media/image32.png)

> ![](media/image40.png)**ä¹¾å¤ç¬é—´**
>
> 2020-02-21
>
> è¯¾åä¹ é¢˜1ï¼Œåœ¨spark livyæ¡†æ¶ä¸­ï¼Œæœ‰ä¸€ä¸ªClientFactoryç±»ï¼Œè¿™ä¸ªç±»æ ¹æ®ç”¨æˆ·çš„å¼€å‘ç¯å¢ƒä¼šè®¾ç½®æˆä¸åŒçš„å®¢æˆ·ç«¯ï¼Œä¸€ç§æ˜¯ç”¨æ¥ç”Ÿäº§rpcClientå®¢æˆ·ç«¯ï¼Œä¸€ç§æ˜¯ç”¨æ¥ç”Ÿäº§httpClientï¼Œæ¯ä¸€ç§åˆ›å»ºçš„é€»è¾‘å’Œæ–¹å¼éƒ½éå¸¸å¤æ‚ï¼Œä¼šæ ¹æ®ä¸åŒçš„å‚æ•°ç”ŸæˆClient,æœ‰äº›å®¢æˆ·ç«¯ä¼šå†…ç½®çœ‹é—¨
>
> ç‹—ï¼Œä»¥æé«˜å¯ç”¨æ€§ï¼Œæœ‰äº›æ²¡æœ‰.æ‰€ä»¥åº”å¯¹è¿™ç§åˆ›å»ºçš„å¤æ‚æ€§ï¼Œä½¿ç”¨äº†å·¥å‚æ¨¡å¼ï¼Œä½¿ç”¨äº†å·¥å‚çš„å·¥å‚â€¦
>
> å±•å¼€î˜ƒ

![](media/image41.png)![](media/image42.png)

> ![](media/image43.png)**whistleman**
>
> 2020-02-21
>
> å­¦ä¹ äº†ï½
>
> å±•å¼€î˜ƒ

![](media/image41.png)![](media/image44.png)

> ![](media/image45.png)**å®ˆæ‹™**
>
> 2020-02-20
>
> è¯¾å ‚è®¨è®º

1.  å·¥å‚æ¨¡å¼æ˜¯ä¸€ç§éå¸¸å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œåœ¨å¾ˆå¤šå¼€æºé¡¹ç›®ã€å·¥å…·ç±»ä¸­åˆ°å¤„å¯è§ï¼Œæ¯”å¦‚ Java ä¸­çš„ Calendarã€DateFormat ç±»ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä½ è¿˜çŸ¥é“å“ªäº›ç”¨å·¥å‚æ¨¡å¼å®ç°ç±»ï¼Ÿå¯ä»¥ç•™è¨€è¯´ä¸€è¯´å®ƒä»¬ä¸ºä»€ä¹ˆè¦è®¾è®¡æˆå·¥å‚æ¨¡å¼ç±»ï¼Ÿâ€¦

> å±•å¼€î˜ƒ

![](media/image46.png)![](media/image47.png)

> ![](media/image48.png)**Liam**
>
> 2020-02-20
>
> ä¼šå½±å“å¯æµ‹è¯•æ€§ï¼Œå› ä¸ºå®ƒæ— æ³•è¢«mockï¼ˆé€šå¸¸æ˜¯mockå®ä¾‹çš„å®ä¾‹æ–¹æ³•ï¼‰ï¼Œå¯¼è‡´å…¶ä»–ä¾èµ–å·¥å‚ç±»çš„ç±»éš¾ä»¥æµ‹è¯•

![](media/image46.png)![](media/image47.png)

> ![](media/image49.png)**majaja**
>
> 2020-02-20
>
> æ‰€ä»¥ï¼Œåœ¨è¿™ä¸ªåº”ç”¨åœºæ™¯ä¸‹ï¼Œç®€å•å·¥å‚æ¨¡å¼ç®€å•å¥½ç”¨ï¼Œæ¯”å·¥æ–¹æ³•å‚æ¨¡å¼æ›´åŠ åˆé€‚ã€‚æ­¤è™•å·¥æ–¹æ³•å‚æ˜¯éŒ¯å­—å—?
>
> å±•å¼€î˜ƒ

![](media/image50.png)![](media/image51.png)

> ![](media/image52.png)**å²æœˆ**
>
> 2020-02-20
>
> è¯¾å ‚è®¨è®º

1.  ç®€å•å·¥å‚åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•ä¹‹æ‰€ä»¥ç”¨é™æ€çš„, é‚£æ˜¯å› ä¸ºä»–çš„èŒè´£å°±æ˜¯åˆ›å»ºå¯¹è±¡, æœ¬èº«ä¸éœ€è¦åŒ…å«ä»»ä½•å’Œå¯¹è±¡ç›¸å…³çš„ä»»ä½•æˆå‘˜å˜é‡, æ¢å¥è¯è¯´, å°±æ˜¯ä»»ä½•äººä½¿ç”¨è¿™ä¸ªç®€å•å·¥å‚çš„æ—¶å€™, å·¥å‚éƒ½æ˜¯æ— çŠ¶æ€çš„, æ‰€ä»¥ç›´æ¥ç”¨é™æ€æ–¹æ³•å³å¯.

> å±•å¼€î˜ƒ

![](media/image53.png)![](media/image54.png)

> ![](media/image55.png)**ä¼ è¯´ä¸­çš„æˆå¤§å¤§**
>
> 2020-02-17
>
> ç¬¬ä¸€é—® å¾ˆå°‘é‡åˆ°
>
> ç¬¬äºŒé—® æˆ‘è§‰å¾—åº”è¯¥è¦è€ƒè™‘åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡æ˜¯å¦å­˜åœ¨ä¸€äº›æˆå‘˜å˜é‡å§ å¦‚æœæœ‰æ•°æ®çš„è¯å°±ä¼šæœ‰å½±å“æˆ–è€…æ²¡å•¥å½±å“å§
>
> å±•å¼€î˜ƒ

![](media/image56.png)![](media/image57.png)

> ![](media/image58.png)**æ¡‚åŸè€æ‰˜å°¼**
>
> 2020-02-15
>
> å¾ˆå–œæ¬¢æœ€åçš„è¿™å‡ ä¸ªæ€»ç»“ã€‚ æ„Ÿè°¢åˆ†äº«ï¼
>
> å°è£…å˜åŒ–ï¼šåˆ›å»ºé€»è¾‘æœ‰å¯èƒ½å˜åŒ–ï¼Œå°è£…æˆå·¥å‚ç±»ä¹‹åï¼Œåˆ›å»ºé€»è¾‘çš„å˜æ›´å¯¹è°ƒç”¨è€…é€æ˜ã€‚ä»£ç å¤ç”¨ï¼šâ–¡åˆ›å»ºä»£ç æŠ½ç¦»åˆ°ç‹¬ç«‹çš„å·¥å‚ç±»ä¹‹åå¯ä»¥å¤ç”¨ã€‚
>
> éš”ç¦»å¤æ‚æ€§ï¼šå°è£…å¤æ‚çš„åˆ›å»ºé€»è¾‘ï¼Œè°ƒç”¨è€…æ— éœ€äº†è§£å¦‚ä½•åˆ›å»ºå¯¹è±¡ã€‚
>
> æ§åˆ¶å¤æ‚åº¦ï¼šå°†åˆ›å»ºä»£ç æŠ½ç¦»å‡ºæ¥ï¼Œè®©åŸæœ¬çš„å‡½æ•°æˆ–ç±»èŒè´£æ›´å•ä¸€ï¼Œä»£ç æ›´ç®€æ´ã€‚
>
> å±•å¼€î˜ƒ

![](media/image59.png)![](media/image60.png)
