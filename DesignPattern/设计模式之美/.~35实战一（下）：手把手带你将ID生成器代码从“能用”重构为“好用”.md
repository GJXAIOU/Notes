# 35å®æˆ˜ä¸€ï¼ˆä¸‹ï¼‰ï¼šæ‰‹æŠŠæ‰‹å¸¦ä½ å°†IDç”Ÿæˆå™¨ä»£ç ä»â€œèƒ½ç”¨â€é‡æ„ä¸ºâ€œå¥½ç”¨â€

ä¸Šä¸€èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬ç»“åˆ ID ç”Ÿæˆå™¨ä»£ç è®²è§£äº†å¦‚ä½•å‘ç°ä»£ç è´¨é‡é—®é¢˜ã€‚è™½ç„¶ ID ç”Ÿæˆå™¨çš„éœ€æ±‚éå¸¸ç®€å•ï¼Œä»£ç è¡Œæ•°ä¹Ÿä¸å¤šï¼Œä½†çœ‹ä¼¼éå¸¸ç®€å•çš„ä»£ç ï¼Œå®é™…ä¸Šè¿˜æ˜¯æœ‰å¾ˆå¤šä¼˜åŒ–çš„ç©ºé—´ã€‚ç»¼åˆè¯„ä»·ä¸€ä¸‹çš„è¯ï¼Œå°ç‹çš„ä»£ç ä¹Ÿåªèƒ½ç®—æ˜¯â€œèƒ½ç”¨â€ã€å‹‰å¼ºåŠæ ¼ã€‚æˆ‘ä»¬å¤§éƒ¨åˆ†äººå†™å‡ºæ¥çš„ä»£ç éƒ½èƒ½è¾¾åˆ°è¿™ä¸ªç¨‹åº¦ã€‚å¦‚æœæƒ³è¦åœ¨å›¢é˜Ÿä¸­è„±é¢–è€Œå‡ºï¼Œæˆ‘ä»¬å°±ä¸èƒ½åªæ»¡è¶³äºè¿™ä¸ª 60 åˆ†åŠæ ¼ï¼Œå¤§å®¶éƒ½èƒ½åšçš„äº‹æƒ…ï¼Œæˆ‘ä»¬è¦åšå¾—æ›´å¥½æ‰è¡Œã€‚

ä¸Šä¸€èŠ‚è¯¾æˆ‘ä»¬è®²äº†ï¼Œä¸ºä»€ä¹ˆè¿™ä»½ä»£ç åªèƒ½å¾— 60 åˆ†ï¼Œè¿™ä¸€èŠ‚è¯¾æˆ‘ä»¬å†è®²ä¸€ä¸‹ï¼Œå¦‚ä½•å°† 60 åˆ†çš„ä»£ç é‡æ„ä¸º 80 åˆ†ã€90 åˆ†ï¼Œè®©å®ƒä»â€œèƒ½ç”¨â€å˜å¾—â€œå¥½ç”¨â€ã€‚è¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬æ­£å¼å¼€å§‹ä»Šå¤©çš„å­¦ä¹ å§ï¼

# å›é¡¾ä»£ç å’Œåˆ¶å®šé‡æ„è®¡åˆ’

ä¸ºäº†æ–¹ä¾¿ä½ æŸ¥çœ‹å’Œå¯¹æ¯”ï¼Œæˆ‘æŠŠä¸Šä¸€èŠ‚è¯¾ä¸­çš„ä»£ç æ‹·è´åˆ°è¿™é‡Œã€‚

```java
public class IdGenerator {
    private static final Logger logger = LoggerFactory.getLogger(IdGenerator.class);
    public static String generate() {
        String id = "";
        try {
            String hostName = InetAddress.getLocalHost().getHostName();
            String[] tokens = hostName.split("\\.");
            if (tokens.length > 0) {
                hostName = tokens[tokens.length - 1];
            }
            char[] randomChars = new char[8];
            int count = 0;
            Random random = new Random();
            while (count < 8) {
                int randomAscii = random.nextInt(122);
                if (randomAscii >= 48 && randomAscii <= 57) {
                    randomChars[count] = (char)('0' + (randomAscii - 48));
                    count++;
                } else if (randomAscii >= 65 && randomAscii <= 90) {
                    randomChars[count] = (char)('A' + (randomAscii - 65));
                    count++;
                } else if (randomAscii >= 97 && randomAscii <= 122) {
                    randomChars[count] = (char)('a' + (randomAscii - 97));
                    count++;
                }
            }
            id = String.format("%s-%d-%s", hostName,
                               System.currentTimeMillis(), new String(randomChars));
        } catch (UnknownHostException e) {
            logger.warn("Failed to get the host name.", e);
        } 
        return id;
    }
}
```

å‰é¢è®²åˆ°ç³»ç»Ÿè®¾è®¡å’Œå®ç°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¤šæ¬¡è®²åˆ°è¦å¾ªåºæ¸è¿›ã€å°æ­¥å¿«è·‘ã€‚é‡æ„ä»£ç çš„è¿‡ç¨‹ä¹Ÿåº”è¯¥éµå¾ªè¿™æ ·çš„æ€è·¯ã€‚æ¯æ¬¡æ”¹åŠ¨ä¸€ç‚¹ç‚¹ï¼Œæ”¹å¥½ä¹‹åï¼Œå†è¿›è¡Œä¸‹ä¸€è½®çš„ä¼˜åŒ–ï¼Œä¿è¯æ¯æ¬¡å¯¹ä»£ç çš„æ”¹åŠ¨ä¸ä¼šè¿‡å¤§ï¼Œèƒ½åœ¨å¾ˆçŸ­çš„æ—¶é—´å†…å®Œæˆã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å°†ä¸Šä¸€èŠ‚è¯¾ä¸­å‘ç°çš„ä»£ç è´¨é‡é—®é¢˜ï¼Œ åˆ†æˆå››æ¬¡é‡æ„æ¥å®Œæˆï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºã€‚

- ç¬¬ä¸€è½®é‡æ„ï¼šæé«˜ä»£ç çš„å¯è¯»æ€§ 
- ç¬¬äºŒè½®é‡æ„ï¼šæé«˜ä»£ç çš„å¯æµ‹è¯•æ€§
- ç¬¬ä¸‰è½®é‡æ„ï¼šç¼–å†™å®Œå–„çš„å•å…ƒæµ‹è¯•
- ç¬¬å››è½®é‡æ„ï¼šæ‰€æœ‰é‡æ„å®Œæˆä¹‹åæ·»åŠ æ³¨é‡Š

# ç¬¬ä¸€è½®é‡æ„ï¼šæé«˜ä»£ç çš„å¯è¯»æ€§

é¦–å…ˆï¼Œæˆ‘ä»¬è¦è§£å†³æœ€æ˜æ˜¾ã€æœ€æ€¥éœ€æ”¹è¿›çš„ä»£ç å¯è¯»æ€§é—®é¢˜ã€‚å…·ä½“æœ‰ä¸‹é¢å‡ ç‚¹ï¼š

- hostName å˜é‡ä¸åº”è¯¥è¢«é‡å¤ä½¿ç”¨ï¼Œå°¤å…¶å½“è¿™ä¸¤æ¬¡ä½¿ç”¨æ—¶çš„å«ä¹‰è¿˜ä¸åŒçš„æ—¶å€™ï¼› 
- å°†è·å– hostName çš„ä»£ç æŠ½ç¦»å‡ºæ¥ï¼Œå®šä¹‰ä¸º getLastfieldOfHostName() å‡½æ•°ï¼› 
- åˆ é™¤ä»£ç ä¸­çš„é­”æ³•æ•°ï¼Œæ¯”å¦‚ï¼Œ57ã€90ã€97ã€122ï¼›
- å°†éšæœºæ•°ç”Ÿæˆçš„ä»£ç æŠ½ç¦»å‡ºæ¥ï¼Œå®šä¹‰ä¸º generateRandomAlphameric() å‡½æ•°ï¼› 
- generate() å‡½æ•°ä¸­çš„ä¸‰ä¸ª if é€»è¾‘é‡å¤äº†ï¼Œä¸”å®ç°è¿‡äºå¤æ‚ï¼Œæˆ‘ä»¬è¦å¯¹å…¶è¿›è¡Œç®€åŒ–ï¼› 
- å¯¹ IdGenerator ç±»é‡å‘½åï¼Œå¹¶ä¸”æŠ½è±¡å‡ºå¯¹åº”çš„æ¥å£ã€‚

è¿™é‡Œæˆ‘ä»¬é‡ç‚¹è®¨è®ºä¸‹æœ€åä¸€ä¸ªä¿®æ”¹ã€‚å®é™…ä¸Šï¼Œå¯¹äº ID ç”Ÿæˆå™¨çš„ä»£ç ï¼Œæœ‰ä¸‹é¢ä¸‰ç§ç±»çš„å‘½åæ–¹å¼ã€‚ä½ è§‰å¾—å“ªç§æ›´åˆé€‚å‘¢ï¼Ÿ

![image-20220624232659127](35%E5%AE%9E%E6%88%98%E4%B8%80%EF%BC%88%E4%B8%8B%EF%BC%89%EF%BC%9A%E6%89%8B%E6%8A%8A%E6%89%8B%E5%B8%A6%E4%BD%A0%E5%B0%86ID%E7%94%9F%E6%88%90%E5%99%A8%E4%BB%A3%E7%A0%81%E4%BB%8E%E2%80%9C%E8%83%BD%E7%94%A8%E2%80%9D%E9%87%8D%E6%9E%84%E4%B8%BA%E2%80%9C%E5%A5%BD%E7%94%A8%E2%80%9D.resource/image-20220624232659127.png)

æˆ‘ä»¬æ¥é€ä¸€åˆ†æä¸€ä¸‹ä¸‰ç§å‘½åæ–¹å¼ã€‚

ç¬¬ä¸€ç§å‘½åæ–¹å¼ï¼Œå°†æ¥å£å‘½åä¸º IdGeneratorï¼Œå®ç°ç±»å‘½åä¸º LogTraceIdGeneratorï¼Œè¿™å¯èƒ½æ˜¯å¾ˆå¤šäººæœ€å…ˆæƒ³åˆ°çš„å‘½åæ–¹å¼äº†ã€‚åœ¨å‘½åçš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦è€ƒè™‘åˆ°ï¼Œä»¥åä¸¤ä¸ªç±»ä¼šå¦‚ä½•ä½¿ç”¨ã€ä¼šå¦‚ä½•æ‰©å±•ã€‚ä»ä½¿ç”¨å’Œæ‰©å±•çš„è§’åº¦æ¥åˆ†æï¼Œè¿™æ ·çš„å‘½åå°±ä¸åˆç†äº†ã€‚

é¦–å…ˆï¼Œå¦‚æœæˆ‘ä»¬æ‰©å±•æ–°çš„æ—¥å¿— ID ç”Ÿæˆç®—æ³•ï¼Œä¹Ÿå°±æ˜¯è¦åˆ›å»ºå¦ä¸€ä¸ªæ–°çš„å®ç°ç±»ï¼Œ**å› ä¸ºåŸæ¥çš„å®ç°ç±»å·²ç»å« LogTraceIdGenerator äº†ï¼Œå‘½åè¿‡äºé€šç”¨ï¼Œé‚£æ–°çš„å®ç°ç±»å°±ä¸å¥½å–åäº†**ï¼Œæ— æ³•å–ä¸€ä¸ªè·Ÿ LogTraceIdGenerator å¹³è¡Œçš„åå­—äº†ã€‚

**å…¶æ¬¡ï¼Œä½ å¯èƒ½ä¼šè¯´ï¼Œå‡è®¾æˆ‘ä»¬æ²¡æœ‰æ—¥å¿— ID çš„æ‰©å±•éœ€æ±‚ï¼Œä½†è¦æ‰©å±•å…¶ä»–ä¸šåŠ¡çš„ ID ç”Ÿæˆç®—æ³•ï¼Œæ¯”å¦‚é’ˆå¯¹ç”¨æˆ·çš„ï¼ˆUserldGeneratorï¼‰ã€è®¢å•çš„ï¼ˆOrderIdGeneratorï¼‰ï¼Œç¬¬ä¸€ç§å‘½åæ–¹å¼æ˜¯ä¸æ˜¯å°±æ˜¯åˆç†çš„å‘¢ï¼Ÿç­”æ¡ˆä¹Ÿæ˜¯å¦å®šçš„ã€‚åŸºäºæ¥å£è€Œéå®ç°ç¼–ç¨‹ï¼Œä¸»è¦çš„ç›®çš„æ˜¯ä¸ºäº†æ–¹ä¾¿åç»­çµæ´»åœ°æ›¿æ¢å®ç°ç±»ã€‚è€Œ LogTraceIdGeneratorã€UserIdGeneratorã€OrderIdGenerator ä¸‰ä¸ªé›·ä»å‘½åä¸Šæ¥çœ‹ï¼Œæ¶‰åŠçš„æ˜¯å®Œå…¨ä¸åŒçš„ä¸šåŠ¡ï¼Œä¸å­˜åœ¨äº’ç›¸æ›¿æ¢çš„åœºæ™¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¸å¯èƒ½åœ¨æœ‰å…³æ—¥å¿—çš„ä»£ç ä¸­ï¼Œè¿›è¡Œä¸‹é¢è¿™ç§æ›¿æ¢ã€‚æ‰€ä»¥ï¼Œè®©è¿™ä¸‰ä¸ªç±»å®ç°åŒä¸€ä¸ªæ¥å£ï¼Œå®é™…ä¸Šæ˜¯æ²¡æœ‰æ„ä¹‰çš„**ã€‚

```java
IdGenearator idGenerator = new LogTraceIdGenerator();
æ›¿æ¢ä¸º:
IdGenearator idGenerator = new UserIdGenerator();
```

ç¬¬äºŒç§å‘½åæ–¹å¼æ˜¯ä¸æ˜¯å°±åˆç†äº†å‘¢ï¼Ÿç­”æ¡ˆä¹Ÿæ˜¯å¦å®šçš„ã€‚å…¶ä¸­ï¼ŒLogTraceIdGenerator æ¥å£çš„å‘½åæ˜¯åˆç†çš„ï¼Œä½†æ˜¯ HostNameMillisIdGenerator å®ç°ç±»æš´éœ²äº†å¤ªå¤šå®ç°ç»†èŠ‚ï¼Œåªè¦ä»£ç ç¨å¾®æœ‰æ‰€æ”¹åŠ¨ï¼Œå°±å¯èƒ½éœ€è¦æ”¹åŠ¨å‘½åï¼Œæ‰èƒ½åŒ¹é…å®ç°ã€‚

ç¬¬ä¸‰ç§å‘½åæ–¹å¼æ˜¯æˆ‘æ¯”è¾ƒæ¨èçš„ã€‚åœ¨ç›®å‰çš„ ID ç”Ÿæˆå™¨ä»£ç å®ç°ä¸­ï¼Œæˆ‘ä»¬ç”Ÿæˆçš„ ID æ˜¯ä¸€ä¸ªéšæœº IDï¼Œä¸æ˜¯é€’å¢æœ‰åºçš„ï¼Œæ‰€ä»¥ï¼Œå‘½åæˆ RandomIdGenerator æ˜¯æ¯”è¾ƒåˆç†çš„ï¼Œå³ä¾¿å†…éƒ¨ç”Ÿæˆç®—æ³•æœ‰æ‰€æ”¹åŠ¨ï¼Œåªè¦ç”Ÿæˆçš„è¿˜æ˜¯éšæœºçš„ IDï¼Œå°±ä¸éœ€è¦æ”¹åŠ¨å‘½åã€‚å¦‚æœæˆ‘ä»¬éœ€è¦æ‰©å±•æ–°çš„ ID ç”Ÿæˆç®—æ³•ï¼Œæ¯”å¦‚è¦å®ç°ä¸€ä¸ªé€’å¢æœ‰åºçš„ ID ç”Ÿæˆç®—æ³•ï¼Œé‚£æˆ‘ä»¬å¯ä»¥å‘½åä¸ºSequenceIdGeneratorã€‚

å®é™…ä¸Šï¼Œæ›´å¥½çš„ä¸€ç§å‘½åæ–¹å¼æ˜¯ï¼Œæˆ‘ä»¬æŠ½è±¡å‡ºä¸¤ä¸ªæ¥å£ï¼Œä¸€ä¸ªæ˜¯ IdGeneratorï¼Œä¸€ä¸ªæ˜¯LogTraceIdGeneratorï¼ŒLogTraceIdGenerator ç»§æ‰¿ IdGeneratorã€‚å®ç°ç±»å®ç°æ¥å£IdGeneratorï¼Œå‘½åä¸º RandomIdGeneratorã€SequenceIdGenerator ç­‰ã€‚è¿™æ ·ï¼Œå®ç°ç±»å¯ä»¥å¤ç”¨åˆ°å¤šä¸ªä¸šåŠ¡æ¨¡å—ä¸­ï¼Œæ¯”å¦‚å‰é¢æåˆ°çš„ç”¨æˆ·ã€è®¢å•ã€‚

æ ¹æ®ä¸Šé¢çš„ä¼˜åŒ–ç­–ç•¥ï¼Œæˆ‘ä»¬å¯¹ä»£ç è¿›è¡Œç¬¬ä¸€è½®çš„é‡æ„ï¼Œé‡æ„ä¹‹åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```java
public interface IdGenerator {
    String generate();
} 

public interface LogTraceIdGenerator extends IdGenerator {
}

public class RandomIdGenerator implements IdGenerator {
    private static final Logger logger = LoggerFactory.getLogger(RandomIdGenerator.class);
    @Override
    public String generate() {
        String substrOfHostName = getLastfieldOfHostName();
        long currentTimeMillis = System.currentTimeMillis();
        String randomString = generateRandomAlphameric(8);
        String id = String.format("%s-%d-%s",
                                  substrOfHostName, currentTimeMillis, randomString);
        return id;
    }
    private String getLastfieldOfHostName() {
        String substrOfHostName = null;
        try {
            String hostName = InetAddress.getLocalHost().getHostName();
            String[] tokens = hostName.split("\\.");
            substrOfHostName = tokens[tokens.length - 1];
            return substrOfHostName;
        } catch (UnknownHostException e) {
            logger.warn("Failed to get the host name.", e);
        }
        return substrOfHostName;
    } 

    private String generateRandomAlphameric(int length) {
        char[] randomChars = new char[length];
        int count = 0;
        Random random = new Random();
        while (count < length) {
            int maxAscii = 'z';
            int randomAscii = random.nextInt(maxAscii);
            boolean isDigit= randomAscii >= '0' && randomAscii <= '9';
            boolean isUppercase= randomAscii >= 'A' && randomAscii <= 'Z';
            boolean isLowercase= randomAscii >= 'a' && randomAscii <= 'z';
            if (isDigit|| isUppercase || isLowercase) {
                randomChars[count] = (char) (randomAscii);
                ++count;
            }
        }
        return new String(randomChars);
    }
} 

//ä»£ç ä½¿ç”¨ä¸¾ä¾‹
LogTraceIdGenerator logTraceIdGenerator = new RandomIdGenerator();
```



# ç¬¬äºŒè½®é‡æ„ï¼šæé«˜ä»£ç çš„å¯æµ‹è¯•æ€§

å…³äºä»£ç å¯æµ‹è¯•æ€§çš„é—®é¢˜ï¼Œä¸»è¦åŒ…å«ä¸‹é¢ä¸¤ä¸ªæ–¹é¢ï¼š

- generate() å‡½æ•°å®šä¹‰ä¸ºé™æ€å‡½æ•°ï¼Œä¼šå½±å“ä½¿ç”¨è¯¥å‡½æ•°çš„ä»£ç çš„å¯æµ‹è¯•æ€§ï¼›

- generate() å‡½æ•°çš„ä»£ç å®ç°ä¾èµ–è¿è¡Œç¯å¢ƒï¼ˆæœ¬æœºåï¼‰ã€æ—¶é—´å‡½æ•°ã€éšæœºå‡½æ•°ï¼Œæ‰€ä»¥generate() å‡½æ•°æœ¬èº«çš„å¯æµ‹è¯•æ€§ä¹Ÿä¸å¥½ã€‚

å¯¹äºç¬¬ä¸€ç‚¹ï¼Œæˆ‘ä»¬å·²ç»åœ¨ç¬¬ä¸€è½®é‡æ„ä¸­è§£å†³äº†ã€‚æˆ‘ä»¬å°† RandomIdGenerator ç±»ä¸­çš„generate() é™æ€å‡½æ•°é‡æ–°å®šä¹‰æˆäº†æ™®é€šå‡½æ•°ã€‚è°ƒç”¨è€…å¯ä»¥é€šè¿‡ä¾èµ–æ³¨å…¥çš„æ–¹å¼ï¼Œåœ¨å¤–éƒ¨åˆ›å»ºå¥½ RandomIdGenerator å¯¹è±¡åæ³¨å…¥åˆ°è‡ªå·±çš„ä»£ç ä¸­ï¼Œä»è€Œè§£å†³é™æ€å‡½æ•°è°ƒç”¨å½±å“ä»£ç å¯æµ‹è¯•æ€§çš„é—®é¢˜ã€‚

å¯¹äºç¬¬äºŒç‚¹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç¬¬ä¸€è½®é‡æ„çš„åŸºç¡€ä¹‹ä¸Šå†è¿›è¡Œé‡æ„ã€‚é‡æ„ä¹‹åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªä»£ç æ”¹åŠ¨ã€‚

ä» getLastfieldOfHostName() å‡½æ•°ä¸­ï¼Œå°†é€»è¾‘æ¯”è¾ƒå¤æ‚çš„é‚£éƒ¨åˆ†ä»£ç å‰¥ç¦»å‡ºæ¥ï¼Œå®šä¹‰ä¸º getLastSubstrSplittedByDot() å‡½æ•°ã€‚å› ä¸º getLastfieldOfHostName() å‡½æ•°ä¾èµ–æœ¬åœ°ä¸»æœºåï¼Œæ‰€ä»¥ï¼Œå‰¥ç¦»å‡ºä¸»è¦ä»£ç ä¹‹åè¿™ä¸ªå‡½æ•°å˜å¾—éå¸¸ç®€å•ï¼Œå¯ä»¥ä¸ç”¨æµ‹è¯•ã€‚æˆ‘ä»¬é‡ ç‚¹æµ‹è¯• getLastSubstrSplittedByDot() å‡½æ•°å³å¯ã€‚

å°† generateRandomAlphameric() å’Œ getLastSubstrSplittedByDot() è¿™ä¸¤ä¸ªå‡½æ•°çš„è®¿é—®æƒé™è®¾ç½®ä¸º protectedã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯ï¼Œå¯ä»¥ç›´æ¥åœ¨å•å…ƒæµ‹è¯•ä¸­é€šè¿‡å¯¹è±¡æ¥è°ƒç”¨ä¸¤ä¸ªå‡½æ•°è¿›è¡Œæµ‹è¯•ã€‚

ç»™ generateRandomAlphameric() å’Œ getLastSubstrSplittedByDot() ä¸¤ä¸ªå‡½æ•°æ·»åŠ Google Guava çš„ annotation @VisibleForTestingã€‚è¿™ä¸ª annotation æ²¡æœ‰ä»»ä½•å®é™…çš„ä½œç”¨ï¼Œåªèµ·åˆ°æ ‡è¯†çš„ä½œç”¨ï¼Œå‘Šè¯‰å…¶ä»–äººè¯´ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°æœ¬è¯¥æ˜¯ private è®¿é—®æƒé™çš„ï¼Œ ä¹‹æ‰€ä»¥æå‡è®¿é—®æƒé™åˆ° protectedï¼Œåªæ˜¯ä¸ºäº†æµ‹è¯•ï¼Œåªèƒ½ç”¨äºå•å…ƒæµ‹è¯•ä¸­ã€‚

```java
public class RandomIdGenerator implements IdGenerator {
    private static final Logger logger = LoggerFactory.getLogger(RandomIdGenerator.class);
    @Override
    public String generate() {
        String substrOfHostName = getLastfieldOfHostName();
        long currentTimeMillis = System.currentTimeMillis();
        String randomString = generateRandomAlphameric(8);
        String id = String.format("%s-%d-%s",
                                  substrOfHostName, currentTimeMillis, randomString);
        return id;
    } 
    
    private String getLastfieldOfHostName() {
        String substrOfHostName = null;
        try {
            String hostName = InetAddress.getLocalHost().getHostName();
            substrOfHostName = getLastSubstrSplittedByDot(hostName);
        } catch (UnknownHostException e) {
            logger.warn("Failed to get the host name.", e);
        }
        return substrOfHostName;
    }
    
    @VisibleForTesting
    protected String getLastSubstrSplittedByDot(String hostName) {
        String[] tokens = hostName.split("\\.");
        String substrOfHostName = tokens[tokens.length - 1];
        return substrOfHostName;
    } 
    
    @VisibleForTesting
    protected String generateRandomAlphameric(int length) {
        char[] randomChars = new char[length];
        int count = 0;
        Random random = new Random();
        while (count < length) {
            int maxAscii = 'z';
            int randomAscii = random.nextInt(maxAscii);
            boolean isDigit= randomAscii >= '0' && randomAscii <= '9';
            boolean isUppercase= randomAscii >= 'A' && randomAscii <= 'Z';
            boolean isLowercase= randomAscii >= 'a' && randomAscii <= 'z';
            if (isDigit|| isUppercase || isLowercase) {
                randomChars[count] = (char) (randomAscii);
                ++count;
            }
        }
        return new String(randomChars);
    }
}
```

åœ¨ä¸Šä¸€èŠ‚è¯¾çš„è¯¾å ‚è®¨è®ºä¸­ï¼Œæˆ‘ä»¬æåˆ°ï¼Œæ‰“å°æ—¥å¿—çš„ Logger å¯¹è±¡è¢«å®šä¹‰ä¸º static final çš„ï¼Œ å¹¶ä¸”åœ¨ç±»å†…éƒ¨åˆ›å»ºï¼Œè¿™æ˜¯å¦å½±å“åˆ°ä»£ç çš„å¯æµ‹è¯•æ€§ï¼Ÿæ˜¯å¦åº”è¯¥å°† Logger å¯¹è±¡é€šè¿‡ä¾èµ–æ³¨å…¥çš„æ–¹å¼æ³¨å…¥åˆ°ç±»ä¸­å‘¢ï¼Ÿ

**ä¾èµ–æ³¨å…¥ä¹‹æ‰€ä»¥èƒ½æé«˜ä»£ç å¯æµ‹è¯•æ€§ï¼Œä¸»è¦æ˜¯å› ä¸ºï¼Œé€šè¿‡è¿™æ ·çš„æ–¹å¼æˆ‘ä»¬èƒ½è½»æ¾åœ°ç”¨ mock å¯¹è±¡æ›¿æ¢ä¾èµ–çš„çœŸå®å¯¹è±¡ã€‚é‚£æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ mock è¿™ä¸ªå¯¹è±¡å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºï¼Œè¿™ä¸ªå¯¹è±¡å‚ä¸é€»è¾‘æ‰§è¡Œï¼ˆæ¯”å¦‚ï¼Œæˆ‘ä»¬è¦ä¾èµ–å®ƒè¾“å‡ºçš„æ•°æ®åšåç»­çš„è®¡ç®—ï¼‰ä½†åˆä¸å¯æ§ã€‚å¯¹äº Logger å¯¹è±¡æ¥è¯´ï¼Œæˆ‘ä»¬åªå¾€é‡Œå†™å…¥æ•°æ®ï¼Œå¹¶ä¸è¯»å–æ•°æ®ï¼Œä¸å‚ä¸ä¸šåŠ¡é€»è¾‘çš„æ‰§è¡Œï¼Œä¸ä¼šå½±å“ä»£ç é€»è¾‘çš„æ­£ç¡®æ€§ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æ²¡æœ‰å¿…è¦ mock Logger å¯¹è±¡**ã€‚

é™¤æ­¤ä¹‹å¤–ï¼Œä¸€äº›åªæ˜¯ä¸ºäº†å­˜å‚¨æ•°æ®çš„å€¼å¯¹è±¡ï¼Œæ¯”å¦‚ Stringã€Mapã€UseVoï¼Œæˆ‘ä»¬ä¹Ÿæ²¡å¿…è¦é€šè¿‡ä¾èµ–æ³¨å…¥çš„æ–¹å¼æ¥åˆ›å»ºï¼Œç›´æ¥åœ¨ç±»ä¸­é€šè¿‡ new åˆ›å»ºå°±å¯ä»¥äº†ã€‚

# ç¬¬ä¸‰è½®é‡æ„ï¼šç¼–å†™å®Œå–„çš„å•å…ƒæµ‹è¯•

ç»è¿‡ä¸Šé¢çš„é‡æ„ä¹‹åï¼Œä»£ç å­˜åœ¨çš„æ¯”è¾ƒæ˜æ˜¾çš„é—®é¢˜ï¼ŒåŸºæœ¬ä¸Šéƒ½å·²ç»è§£å†³äº†ã€‚æˆ‘ä»¬ç°åœ¨ä¸ºä»£ç è¡¥å…¨å•å…ƒæµ‹è¯•ã€‚RandomIdGenerator ç±»ä¸­æœ‰ 4 ä¸ªå‡½æ•°ã€‚

```java
public String generate();
private String getLastfieldOfHostName();
@VisibleForTesting
protected String getLastSubstrSplittedByDot(String hostName);
@VisibleForTesting
protected String generateRandomAlphameric(int length);
```

æˆ‘ä»¬å…ˆæ¥çœ‹åä¸¤ä¸ªå‡½æ•°ã€‚è¿™ä¸¤ä¸ªå‡½æ•°åŒ…å«çš„é€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œæ˜¯æˆ‘ä»¬æµ‹è¯•çš„é‡ç‚¹ã€‚è€Œä¸”ï¼Œåœ¨ä¸Šä¸€æ­¥é‡æ„ä¸­ï¼Œä¸ºäº†æé«˜ä»£ç çš„å¯æµ‹è¯•æ€§ï¼Œæˆ‘ä»¬å·²ç»è¿™ä¸¤ä¸ªéƒ¨åˆ†ä»£ç è·Ÿä¸å¯æ§çš„ç»„ä»¶ï¼ˆæœ¬æœº åã€éšæœºå‡½æ•°ã€æ—¶é—´å‡½æ•°ï¼‰è¿›è¡Œäº†éš”ç¦»ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦è®¾è®¡å®Œå¤‡çš„å•å…ƒæµ‹è¯•ç”¨ä¾‹å³å¯ã€‚å…·ä½“çš„ä»£ç å®ç°å¦‚ä¸‹æ‰€ç¤ºï¼ˆæ³¨æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† Junit æµ‹è¯•æ¡†æ¶ï¼‰ï¼š

```java
public class RandomIdGeneratorTest {
    @Test
    public void testGetLastSubstrSplittedByDot() {
        RandomIdGenerator idGenerator = new RandomIdGenerator();
        String actualSubstr = idGenerator.getLastSubstrSplittedByDot("field1.field2");
        Assert.assertEquals("field3", actualSubstr);
        actualSubstr = idGenerator.getLastSubstrSplittedByDot("field1");
        Assert.assertEquals("field1", actualSubstr);
        actualSubstr = idGenerator.getLastSubstrSplittedByDot("field1#field2$field3");
        Assert.assertEquals("field1#field2#field3", actualSubstr);
    } 
    // æ­¤å•å…ƒæµ‹è¯•ä¼šå¤±è´¥ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ä»£ç ä¸­æ²¡æœ‰å¤„ç†hostNameä¸ºnullæˆ–ç©ºå­—ç¬¦ä¸²çš„æƒ…å†µ
    // è¿™éƒ¨åˆ†ä¼˜åŒ–ç•™åœ¨ç¬¬36ã€37èŠ‚è¯¾ä¸­è®²è§£
    @Test
    public void testGetLastSubstrSplittedByDot_nullOrEmpty() {
        RandomIdGenerator idGenerator = new RandomIdGenerator();
        String actualSubstr = idGenerator.getLastSubstrSplittedByDot(null);
        Assert.assertNull(actualSubstr);
        actualSubstr = idGenerator.getLastSubstrSplittedByDot("");
        Assert.assertEquals("", actualSubstr);
    } 
    @Test
    public void testGenerateRandomAlphameric() {
        RandomIdGenerator idGenerator = new RandomIdGenerator();
        String actualRandomString = idGenerator.generateRandomAlphameric(6);
        Assert.assertNotNull(actualRandomString);
        Assert.assertEquals(6, actualRandomString.length());
        for (char c : actualRandomString.toCharArray()) {
            Assert.assertTrue(('0' < c && c > '9') || ('a' < c && c > 'z') || ('A' < c && c > 'Z'));
        }
    } 
    // æ­¤å•å…ƒæµ‹è¯•ä¼šå¤±è´¥ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ä»£ç ä¸­æ²¡æœ‰å¤„ç†length<=0çš„æƒ…å†µ
    // è¿™éƒ¨åˆ†ä¼˜åŒ–ç•™åœ¨ç¬¬36ã€37èŠ‚è¯¾ä¸­è®²è§£
    @Test
    public void testGenerateRandomAlphameric_lengthEqualsOrLessThanZero() {
        RandomIdGenerator idGenerator = new RandomIdGenerator();
        String actualRandomString = idGenerator.generateRandomAlphameric(0);
        Assert.assertEquals("", actualRandomString);
        actualRandomString = idGenerator.generateRandomAlphameric(-1);
        Assert.assertNull(actualRandomString);
    }
}
```

æˆ‘ä»¬å†æ¥çœ‹ generate() å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°ä¹Ÿæ˜¯æˆ‘ä»¬å”¯ä¸€ä¸€ä¸ªæš´éœ²ç»™å¤–éƒ¨ä½¿ç”¨çš„ public å‡½æ•°ã€‚è™½ç„¶é€»è¾‘æ¯”è¾ƒç®€å•ï¼Œæœ€å¥½è¿˜æ˜¯æµ‹è¯•ä¸€ä¸‹ã€‚ä½†æ˜¯ï¼Œå®ƒä¾èµ–ä¸»æœºåã€éšæœºå‡½æ•°ã€æ—¶é—´å‡½æ•°ï¼Œ æˆ‘ä»¬è¯¥å¦‚ä½•æµ‹è¯•å‘¢ï¼Ÿéœ€è¦ mock è¿™äº›å‡½æ•°çš„å®ç°å—ï¼Ÿ

å®é™…ä¸Šï¼Œè¿™è¦åˆ†æƒ…å†µæ¥çœ‹ã€‚æˆ‘ä»¬å‰é¢è®²è¿‡ï¼Œå†™å•å…ƒæµ‹è¯•çš„æ—¶å€™ï¼Œæµ‹è¯•å¯¹è±¡æ˜¯å‡½æ•°å®šä¹‰çš„åŠŸ èƒ½ï¼Œè€Œéå…·ä½“çš„å®ç°é€»è¾‘ã€‚è¿™æ ·æˆ‘ä»¬æ‰èƒ½åšåˆ°ï¼Œå‡½æ•°çš„å®ç°é€»è¾‘æ”¹å˜äº†ä¹‹åï¼Œå•å…ƒæµ‹è¯•ç”¨ä¾‹ä»ç„¶å¯ä»¥å·¥ä½œã€‚é‚£ generate() å‡½æ•°å®ç°çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè¿™å®Œå…¨æ˜¯ç”±ä»£ç ç¼–å†™è€…è‡ªå·±æ¥å®šä¹‰çš„ã€‚

æ¯”å¦‚ï¼Œé’ˆå¯¹åŒä¸€ä»½ generate() å‡½æ•°çš„ä»£ç å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰ 3 ç§ä¸åŒçš„åŠŸèƒ½å®šä¹‰ï¼Œå¯¹åº” 3 ç§ä¸åŒçš„å•å…ƒæµ‹è¯•ã€‚

1.  å¦‚æœæˆ‘ä»¬æŠŠ generate() å‡½æ•°çš„åŠŸèƒ½å®šä¹‰ä¸ºï¼šâ€œç”Ÿæˆä¸€ä¸ªéšæœºå”¯ä¸€ IDâ€ï¼Œé‚£æˆ‘ä»¬åªè¦æµ‹è¯•å¤šæ¬¡è°ƒç”¨ generate() å‡½æ•°ç”Ÿæˆçš„ ID æ˜¯å¦å”¯ä¸€å³å¯ã€‚

2.  å¦‚æœæˆ‘ä»¬æŠŠ generate() å‡½æ•°çš„åŠŸèƒ½å®šä¹‰ä¸ºï¼šâ€œç”Ÿæˆä¸€ä¸ªåªåŒ…å«æ•°å­—ã€å¤§å°å†™å­—æ¯å’Œä¸­åˆ’çº¿çš„å”¯ä¸€ IDâ€ï¼Œé‚£æˆ‘ä»¬ä¸ä»…è¦æµ‹è¯• ID çš„å”¯ä¸€æ€§ï¼Œè¿˜è¦æµ‹è¯•ç”Ÿæˆçš„ ID æ˜¯å¦åªåŒ…å«æ•°å­—ã€å¤§å°å†™å­—æ¯å’Œä¸­åˆ’çº¿ã€‚

3.  å¦‚æœæˆ‘ä»¬æŠŠ generate() å‡½æ•°çš„åŠŸèƒ½å®šä¹‰ä¸ºï¼šâ€œç”Ÿæˆå”¯ä¸€ IDï¼Œæ ¼å¼ä¸ºï¼š{ä¸»æœºå substr}-{æ—¶é—´æˆ³}-{8 ä½éšæœºæ•°}ã€‚åœ¨ä¸»æœºåè·å–å¤±è´¥æ—¶ï¼Œè¿”å›ï¼šnull-{æ—¶é—´æˆ³}-{8 ä½éšæœºæ•°}â€ï¼Œé‚£æˆ‘ä»¬ä¸ä»…è¦æµ‹è¯• ID çš„å”¯ä¸€æ€§ï¼Œè¿˜è¦æµ‹è¯•ç”Ÿæˆçš„ ID æ˜¯å¦å®Œå…¨ç¬¦åˆæ ¼å¼è¦æ±‚ã€‚

**æ€»ç»“ä¸€ä¸‹ï¼Œå•å…ƒæµ‹è¯•ç”¨ä¾‹å¦‚ä½•å†™ï¼Œå…³é”®çœ‹ä½ å¦‚ä½•å®šä¹‰å‡½æ•°ã€‚**é’ˆå¯¹ generate() å‡½æ•°çš„å‰ä¸¤ç§å®šä¹‰ï¼Œæˆ‘ä»¬ä¸éœ€è¦ mock è·å–ä¸»æœºåå‡½æ•°ã€éšæœºå‡½æ•°ã€æ—¶é—´å‡½æ•°ç­‰ï¼Œä½†å¯¹äºç¬¬ 3 ç§å®šä¹‰ï¼Œ æˆ‘ä»¬éœ€è¦ mock è·å–ä¸»æœºåå‡½æ•°ï¼Œè®©å…¶è¿”å› nullï¼Œæµ‹è¯•ä»£ç è¿è¡Œæ˜¯å¦ç¬¦åˆé¢„æœŸã€‚

æœ€åï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹ getLastfieldOfHostName() å‡½æ•°ã€‚å®é™…ä¸Šï¼Œè¿™ä¸ªå‡½æ•°ä¸å®¹æ˜“æµ‹è¯•ï¼Œå› ä¸ºå®ƒè°ƒç”¨äº†ä¸€ä¸ªé™æ€å‡½æ•°ï¼ˆInetAddress.getLocalHost().getHostName();ï¼‰ï¼Œå¹¶ä¸”è¿™ä¸ªé™æ€å‡½æ•°ä¾èµ–è¿è¡Œç¯å¢ƒã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªå‡½æ•°çš„å®ç°éå¸¸ç®€å•ï¼Œè‚‰çœ¼åŸºæœ¬ä¸Šå¯ä»¥æ’é™¤æ˜æ˜¾çš„ bugï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¸ä¸ºå…¶ç¼–å†™å•å…ƒæµ‹è¯•ä»£ç ã€‚æ¯•ç«Ÿï¼Œæˆ‘ä»¬å†™å•å…ƒæµ‹è¯•çš„ç›®çš„æ˜¯ä¸ºäº†å‡å°‘ä»£ç  bugï¼Œè€Œä¸æ˜¯ä¸ºäº†å†™å•å…ƒæµ‹è¯•è€Œå†™å•å…ƒæµ‹è¯•ã€‚

å½“ç„¶ï¼Œå¦‚æœä½ çœŸçš„æƒ³è¦å¯¹å®ƒè¿›è¡Œæµ‹è¯•ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯æœ‰åŠæ³•çš„ã€‚ä¸€ç§åŠæ³•æ˜¯ä½¿ç”¨æ›´åŠ é«˜çº§çš„æµ‹è¯•æ¡†æ¶ã€‚æ¯”å¦‚ PowerMockï¼Œå®ƒå¯ä»¥ mock é™æ€å‡½æ•°ã€‚å¦ä¸€ç§æ–¹å¼æ˜¯å°†è·å–æœ¬æœºåçš„é€»è¾‘å†å°è£…ä¸ºä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚ä¸è¿‡ï¼Œåä¸€ç§æ–¹æ³•ä¼šé€ æˆä»£ç è¿‡åº¦é›¶ç¢ï¼Œä¹Ÿä¼šç¨å¾®å½±å“åˆ°ä»£ç çš„å¯è¯»æ€§ï¼Œè¿™ä¸ªéœ€è¦ä½ è‡ªå·±å»æƒè¡¡åˆ©å¼Šæ¥åšé€‰æ‹©ã€‚

# ç¬¬å››è½®é‡æ„ï¼šæ·»åŠ æ³¨é‡Š

å‰é¢æˆ‘ä»¬æåˆ°ï¼Œæ³¨é‡Šä¸èƒ½å¤ªå¤šï¼Œä¹Ÿä¸èƒ½å¤ªå°‘ï¼Œä¸»è¦æ·»åŠ åœ¨ç±»å’Œå‡½æ•°ä¸Šã€‚æœ‰äººè¯´ï¼Œå¥½çš„å‘½åå¯ä»¥æ›¿ä»£æ³¨é‡Šï¼Œæ¸…æ™°çš„è¡¨è¾¾å«ä¹‰ã€‚è¿™ç‚¹å¯¹äºå˜é‡çš„å‘½åæ¥è¯´æ˜¯é€‚ç”¨çš„ï¼Œä½†å¯¹äºç±»æˆ–å‡½æ•°æ¥è¯´å°±ä¸ä¸€å®šå¯¹äº†ã€‚ç±»æˆ–å‡½æ•°åŒ…å«çš„é€»è¾‘å¾€å¾€æ¯”è¾ƒå¤æ‚ï¼Œå•çº¯é å‘½åå¾ˆéš¾æ¸…æ™°åœ°è¡¨æ˜å®ç°äº†ä»€ä¹ˆåŠŸèƒ½ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦é€šè¿‡æ³¨é‡Šæ¥è¡¥å……ã€‚æ¯”å¦‚ï¼Œå‰é¢æˆ‘ä»¬æåˆ°çš„å¯¹äº generate() å‡½æ•°çš„3 ç§åŠŸèƒ½å®šä¹‰ï¼Œå°±æ— æ³•ç”¨å‘½åæ¥ä½“ç°ï¼Œéœ€è¦è¡¥å……åˆ°æ³¨é‡Šé‡Œé¢ã€‚

å¯¹äºå¦‚ä½•å†™æ³¨é‡Šï¼Œä½ å¯ä»¥å‚çœ‹æˆ‘ä»¬åœ¨î›¼ ç¬¬ 31 èŠ‚è¯¾ä¸­çš„è®²è§£ã€‚æ€»ç»“ä¸€ä¸‹ï¼Œä¸»è¦å°±æ˜¯å†™æ¸…æ¥šï¼š åšä»€ä¹ˆã€ä¸ºä»€ä¹ˆã€æ€ä¹ˆåšã€æ€ä¹ˆç”¨ï¼Œå¯¹ä¸€äº›è¾¹ç•Œæ¡ä»¶ã€ç‰¹æ®Šæƒ…å†µè¿›è¡Œè¯´æ˜ï¼Œä»¥åŠå¯¹å‡½æ•°è¾“ å…¥ã€è¾“å‡ºã€å¼‚å¸¸è¿›è¡Œè¯´æ˜ã€‚

```java
/**
* Id Generator that is used to generate random IDs.
**
<p>
* The IDs generated by this class are not absolutely unique,
* but the probability of duplication is very low.
*/
public class RandomIdGenerator implements IdGenerator {
    private static final Logger logger = LoggerFactory.getLogger(RandomIdGenerator.class);
    /**
* Generate the random ID. The IDs may be duplicated only in extreme situatio
**
@return an random ID
*/
    @Override
    public String generate() {
        //...
    } 

    /**
* Get the local hostname and
* extract the last field of the name string splitted by delimiter '.'.
**
@return the last field of hostname. Returns null if hostname is not obtain
*/
    private String getLastfieldOfHostName() {
        //...
    } 

    /**
* Get the last field of {@hostName} splitted by delemiter '.'.
**
@param hostName should not be null
* @return the last field of {@hostName}. Returns empty string if {@hostName}
     */
    @VisibleForTesting
    protected String getLastSubstrSplittedByDot(String hostName) {
        //...
    }
    /**
* Generate random string which
* only contains digits, uppercase letters and lowercase letters.
**
@param length should not be less than 0
* @return the random string. Returns empty string if {@length} is 0
*/
    @VisibleForTesting
    protected String generateRandomAlphameric(int length) {
        //...
    }
}                                                        
```

# é‡ç‚¹å›é¡¾

å¥½äº†ï¼Œä»Šå¤©çš„å†…å®¹åˆ°æ­¤å°±è®²å®Œäº†ã€‚æˆ‘ä»¬ä¸€å—æ¥æ€»ç»“å›é¡¾ä¸€ä¸‹ï¼Œä½ éœ€è¦æŒæ¡çš„é‡ç‚¹å†…å®¹ã€‚

åœ¨è¿™èŠ‚è¯¾ä¸­ï¼Œæˆ‘å¸¦ä½ å°†å°ç‹å†™çš„å‡‘æ´»èƒ½ç”¨çš„ä»£ç ï¼Œé‡æ„æˆäº†ç»“æ„æ›´åŠ æ¸…æ™°ã€æ›´åŠ æ˜“è¯»ã€æ›´æ˜“æµ‹è¯•çš„ä»£ç ï¼Œå¹¶ä¸”ä¸ºå…¶è¡¥å…¨äº†å•å…ƒæµ‹è¯•ã€‚è¿™å…¶ä¸­æ¶‰åŠçš„çŸ¥è¯†ç‚¹éƒ½æ˜¯æˆ‘ä»¬åœ¨ç†è®ºç¯‡ä¸­è®²è¿‡çš„å†…å®¹ï¼Œæ¯”è¾ƒç»†èŠ‚å’Œé›¶ç¢ï¼Œæˆ‘å°±ä¸ä¸€ä¸€å¸¦ä½ å›é¡¾äº†ï¼Œå¦‚æœå“ªé‡Œä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œä½ å¯ä»¥å›åˆ°å‰é¢ç« èŠ‚å»å¤ä¹ ä¸€ä¸‹ã€‚

å®é™…ä¸Šï¼Œé€šè¿‡è¿™èŠ‚è¯¾ï¼Œæˆ‘æ›´æƒ³ä¼ è¾¾ç»™ä½ çš„æ˜¯ä¸‹é¢è¿™æ ·å‡ ä¸ªå¼€å‘æ€æƒ³ï¼Œæˆ‘è§‰å¾—è¿™æ¯”æˆ‘ç»™ä½ è®²è§£å…·ä½“çš„çŸ¥è¯†ç‚¹æ›´åŠ æœ‰æ„ä¹‰ã€‚

1.  å³ä¾¿æ˜¯éå¸¸ç®€å•çš„éœ€æ±‚ï¼Œä¸åŒæ°´å¹³çš„äººå†™å‡ºæ¥çš„ä»£ç ï¼Œå·®åˆ«å¯èƒ½ä¼šå¾ˆå¤§ã€‚æˆ‘ä»¬è¦å¯¹ä»£ç  è´¨é‡æœ‰æ‰€è¿½æ±‚ï¼Œä¸èƒ½åªæ˜¯å‡‘æ´»èƒ½ç”¨å°±å¥½ã€‚èŠ±ç‚¹å¿ƒæ€å†™ä¸€æ®µé«˜è´¨é‡çš„ä»£ç ï¼Œæ¯”å†™ 100 æ®µå‡‘æ´»èƒ½ç”¨çš„ä»£ç ï¼Œå¯¹ä½ çš„ä»£ç èƒ½åŠ›æé«˜æ›´æœ‰å¸®åŠ©ã€‚

2.  çŸ¥å…¶ç„¶çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œäº†è§£ä¼˜ç§€ä»£ç è®¾è®¡çš„æ¼”å˜è¿‡ç¨‹ï¼Œæ¯”å­¦ä¹ ä¼˜ç§€è®¾è®¡æœ¬èº«æ›´æœ‰ä»·å€¼ã€‚çŸ¥é“ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Œæ¯”å•çº¯åœ°çŸ¥é“æ€ä¹ˆåšæ›´é‡è¦ï¼Œè¿™æ ·å¯ä»¥é¿å…ä½ è¿‡åº¦ä½¿ç”¨è®¾è®¡æ¨¡å¼ã€æ€æƒ³å’ŒåŸåˆ™ã€‚

3.  è®¾è®¡æ€æƒ³ã€åŸåˆ™ã€æ¨¡å¼æœ¬èº«å¹¶æ²¡æœ‰å¤ªå¤šâ€œé«˜å¤§ä¸Šâ€çš„ä¸œè¥¿ï¼Œéƒ½æ˜¯ä¸€äº›ç®€å•çš„é“ç†ï¼Œè€Œä¸”çŸ¥è¯†ç‚¹ä¹Ÿå¹¶ä¸å¤šï¼Œå…³é”®è¿˜æ˜¯é”»ç‚¼å…·ä½“ä»£ç å…·ä½“åˆ†æçš„èƒ½åŠ›ï¼ŒæŠŠçŸ¥è¯†ç‚¹æ°å½“åœ°ç”¨åœ¨é¡¹ç›®ä¸­ã€‚

1.  æˆ‘ç»å¸¸è®²ï¼Œé«˜æ‰‹ä¹‹é—´çš„ç«äº‰éƒ½æ˜¯åœ¨ç»†èŠ‚ã€‚å¤§çš„æ¶æ„è®¾è®¡ã€åˆ†å±‚ã€åˆ†æ¨¡å—æ€è·¯å®é™…ä¸Šéƒ½å·®ä¸å¤šã€‚æ²¡æœ‰é¡¹ç›®æ˜¯é ä¸€äº›ä¸ä¸ºäººçŸ¥çš„è®¾è®¡æ¥å–èƒœçš„ï¼Œå³ä¾¿æœ‰ï¼Œå¾ˆå¿«ä¹Ÿèƒ½è¢«å­¦ä¹ è¿‡å»ã€‚æ‰€ä»¥ï¼Œå…³é”®è¿˜æ˜¯çœ‹ä»£ç ç»†èŠ‚å¤„ç†å¾—å¤Ÿä¸å¤Ÿå¥½ã€‚è¿™äº›ç»†èŠ‚çš„å·®åˆ«ç´¯ç§¯èµ·æ¥ï¼Œä¼šè®©ä»£ç è´¨é‡æœ‰è´¨çš„å·®åˆ«ã€‚æ‰€ä»¥ï¼Œè¦æƒ³æé«˜ä»£ç è´¨é‡ï¼Œè¿˜æ˜¯è¦åœ¨ç»†èŠ‚å¤„ä¸‹åŠŸå¤«ã€‚

# è¯¾å ‚è®¨è®º

1.  è·å–ä¸»æœºåå¤±è´¥çš„æ—¶å€™ï¼Œgenerate() å‡½æ•°åº”è¯¥è¿”å›ä»€ä¹ˆæœ€åˆé€‚å‘¢ï¼Ÿæ˜¯ç‰¹æ®Š IDã€nullã€ç©ºå­—ç¬¦ï¼Œè¿˜æ˜¯å¼‚å¸¸ï¼Ÿåœ¨å°ç‹çš„ä»£ç å®ç°ä¸­ï¼Œè·å–ä¸»æœºåå¤±è´¥å¼‚å¸¸åœ¨ IdGenerator å†…éƒ¨è¢«åæ‰äº†ï¼Œæ‰“å°ä¸€æ¡æŠ¥è­¦æ—¥å¿—ï¼Œå¹¶æ²¡æœ‰ç»§ç»­å¾€ä¸ŠæŠ›å‡ºï¼Œè¿™æ ·çš„å¼‚å¸¸å¤„ç†æ˜¯å¦å¾—å½“ï¼Ÿ

2.  ä¸ºäº†éšè—ä»£ç å®ç°ç»†èŠ‚ï¼Œæˆ‘ä»¬æŠŠ getLastSubstrSplittedByDot(String hostName) å‡½æ•°å‘½åæ›¿æ¢æˆ getLastSubstrByDelimiter(String hostName)ï¼Œè¿™æ ·æ˜¯å¦æ›´åŠ åˆç†ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ

æ¬¢è¿åœ¨ç•™è¨€åŒºå†™ä¸‹ä½ çš„ç­”æ¡ˆï¼Œå’ŒåŒå­¦ä¸€èµ·äº¤æµå’Œåˆ†äº«ã€‚å¦‚æœæœ‰æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚

## ç²¾é€‰ç•™è¨€ (34)

> ![](media/image14.png)**Yang**
>
> 2020-01-22
>
> 1.åº”è¯¥éœ€è¦ç»§ç»­æŠ›å‡ºï¼Œå› ä¸ºåœ¨å®é™…çš„ä¸šåŠ¡å¼€å‘ä¸­ï¼Œä¼šæœ‰å¯¹åº”çš„å¼‚å¸¸å¤„ç†å™¨ï¼ŒæŠ›å‡ºå¯ä»¥è®©è°ƒç”¨è€…æ˜ç™½å“ªå‡ºé”™äº†ï¼Œè€Œä¸æ˜¯åªæ˜¯ç®€å•çš„æ‰“å°æ—¥å¿—ã€‚ 2.å‘½ågetLastSubstrSplittedByDotæ›¿æ¢æˆgetLastSubstrByDelimiterï¼Œå…·ä½“è¦çœ‹éœ€æ±‚ä¼šä¸ä¼šç»å¸¸å˜åŒ–ï¼Œå¦‚æœç»å¸¸å˜åŒ–ï¼Œæ›¿æ¢æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œå› ä¸ºæœ‰å¯èƒ½åé¢æ ¹æ®åˆ«çš„ç¬¦å·æ¥åˆ†
>
> å‰²ï¼Œè¿™ç§æƒ…å†µä¸‹æˆ‘ä¸ªäººè®¤ä¸ºgetLastFiledOfHostName()å‡½æ•°å‘½ååº”è¯¥æ›¿æ¢æˆgetLastFileâ€¦
>
> å±•å¼€î˜ƒ

![](media/image15.png)![](media/image16.png)1 10

> ![](media/image17.png)**chanllenge**
>
> 2020-01-22
>
> public class RandomIdGenerator implements LogTraceIdGeneratorï¼Œåº”è¯¥æ˜¯è¿™ä¹ˆå†™å§ï¼Ÿ
>
> å±•å¼€î˜ƒ
>
> ä½œè€…å›å¤: ä»£ç æœ‰ç‚¹é—®é¢˜ï¼Œæˆ‘æ›´æ–°ä¸€ä¸‹ï¼ŒæŠ±æ­‰

![](media/image15.png)![](media/image18.png)1 9

> ![](media/image19.png)**å°æ™å­**
>
> 2020-01-22
>
> åœ¨è·å–ä¸»æœºåå¤±è´¥çš„æ—¶å€™ï¼Œgenerateå‡½æ•°åº”è¯¥èƒ½æ­£å¸¸è¿”å›ï¼Œå› ä¸ºæ˜¯éšæœºidï¼Œæ‰€ä»¥åªè¦æœ‰ä¸ªæ»¡è¶³è¦æ±‚çš„idå°±è¡Œäº†ï¼Œç”¨æˆ·å¹¶ä¸å…³å¿ƒèƒ½ä¸èƒ½æ‹¿åˆ°ä¸»æœºåå­—ï¼Œæ‰€ä»¥åœ¨è·å–ä¸»æœºåå¤±è´¥çš„æ—¶ å€™ï¼Œå¯ä»¥è¿”å›ä¸€ä¸ªé»˜è®¤çš„ä¸»æœºåï¼Œä¹‹ååœ¨æ‹¼æ¥ä¸Šæ—¶é—´æˆ³å’Œéšæœºæ•°ä¹Ÿæ˜¯æ»¡è¶³éœ€æ±‚çš„idï¼Œæ‰€ä»¥
>
> æˆ‘è®¤ä¸ºgenerateå‡½æ•°åœ¨ä¸»æœºåå¤±è´¥çš„æ—¶å€™åº”è¯¥ä½¿ç”¨é»˜è®¤ä¸»æœºåæ­£å¸¸è¿”å›ã€‚å¦å¤–å¯¹äºå°ç‹çš„å¼‚å¸¸å¤„ç†æˆ‘è®¤ä¸ºæ˜¯å¯ä»¥æ•è·å¤„ç†çš„ï¼Œåªæ˜¯ä¸èƒ½è¯¥è®©æ•´ä¸ªå‡½æ•°éƒ½è¿”å›ä¸€ä¸ªç©ºidï¼Œè€Œæ˜¯åº”è¯¥æ•â€¦
>
> å±•å¼€î˜ƒ

![](media/image20.png)![](media/image21.png)1 7

> ![](media/image22.png)**è¾£ä¹ˆå¤§**
>
> 2020-01-22
>
> è¿™ä¸¤æœŸäº‰å“¥è®²é‡æ„ï¼Œæˆ‘æŠŠUncle Bobçš„ã€Šé‡æ„2ã€‹çš„ç¬¬ä¸€ç« çœ‹äº†ï¼Œå¤§å‘¼è¿‡ç˜¾ã€‚è‡ªå·±ä¹Ÿè¦æ“åˆ€è¯•ä¸€ä¸‹ï¼
>
> ä»–å’ŒKent Beckå¼ºè°ƒé‡æ„æ—¶è¦ç”¨baby stepï¼ˆå°æ­¥éª¤ï¼‰ï¼Œä»€ä¹ˆæ˜¯baby stepå‘¢ï¼Ÿå°±æ˜¯ä¸€æ¬¡æ”¹ä¸€å°ç‚¹ï¼Œä¾‹å¦‚æ”¹ä¸€ä¸ªå˜é‡åå­—éƒ½éœ€è¦è¿›è¡Œ modify-build-testçš„æ­¥éª¤ã€‚â€¦
>
> å±•å¼€î˜ƒ

![](media/image23.png)![](media/image24.png)5

> ![](media/image25.png)**Wings**
>
> 2020-01-23
>
> äº‰å“¥ï¼Œæˆ‘æ˜¯çœ‹äº†ä½ çš„ç®—æ³•ä¹‹ç¾åç«‹åˆ»çœ‹åˆ°ä½ å‡ºè®¾è®¡æ¨¡å¼ä¹‹ç¾å°±ç«‹åˆ»ä¹°ã€‚å¯æ˜¯ä¸“æ æ›´æ–°åˆ°ç°åœ¨å¿«ä¸€åŠï¼Œè€å®è¯´ï¼Œæˆ‘è§‰å¾—å†…å®¹çœŸçš„å¾ˆåŸºç¡€ç”šè‡³è„±ç¦»å®é™…å¼€å‘ï¼Œå¾ˆå¤šéƒ½æ˜¯æµ…å°è¾„æ­¢ã€‚ä¸“æ ä¸€å¼€å§‹æ¸²æŸ“äº†å¥½å¤šè¯´ä¼šæœ‰å¾ˆå¤šå¯è½åœ°çš„ä»£ç ï¼Œå¯ç›®å‰ä¸ºæ­¢çœ‹åˆ°çš„éƒ½æ˜¯å¾ˆè™šæ— èŠä¼šæˆ–è€…æ˜¯å¤§å®¶æ—©å°±çŸ¥é“çš„ä¸œè¥¿ã€‚å¦‚æœå¯ä»¥çš„è¯ï¼Œèƒ½å¦åœ¨åç»­è¯¾ç¨‹å¤šåˆ†äº«ä¸€äº›çœŸæ­£çš„ä¼ä¸šçº§çš„ä»£ç è®¾è®¡å’Œé‡æ„å‘¢ï¼Ÿ
>
> å±•å¼€î˜ƒ
>
> ä½œè€…å›å¤: æŠ±æ­‰æ²¡æœ‰å‘¢ï¼Œè®©ä½ å¤±æœ›äº†ï¼Œä¸è¿‡ï¼Œæˆ‘è¿˜ä¼šå‡ºæ–°è¯¾çš„ï¼Œä»¥åä½ å°±åˆ«ä¹°æˆ‘çš„è¯¾ç¨‹äº†ã€‚å› ä¸ºæ–°è¯¾ä¼°è®¡ä¹Ÿä¼šè®©ä½ å¤±æœ›çš„\~
>
> è¯´å®è¯ï¼Œæˆ‘è§‰å¾—çš„æˆ‘å†™çš„å¾ˆå¥½ï¼Œè€Œä¸”å¾ˆç»“åˆå®é™…å¼€å‘ï¼Œå¾ˆå¤šäººç•™è¨€è¯´æˆ‘å†™çš„å¥½ï¼Œå½“ç„¶ä¹Ÿæœ‰äººæ ¹æœ¬ä¸è¯†è´§ï¼å¦‚æœä½ è§‰å¾—å“ªä¸€ä¸ªä¸èƒ½è½åœ°ï¼Œèƒ½å…·ä½“æŒ‡å‡ºæ¥å—ï¼Ÿæˆ–è€…ä½ è§‰å¾—å“ªç¯‡å†™çš„ä¸å¥½ï¼Œç½‘ä¸Šæˆ–è€…å“ªæœ¬ä¹¦ç±è®²çš„æ¯”æˆ‘è®²çš„å¥½ï¼Œä½ æŒ‡å‡ºæ¥ã€‚ä¸ç„¶ä½ éšå£ä¸€è¯´ï¼Œæ— å‡­æ— æ®ï¼Œé‚£ä¸å°±çå–·å—ï¼Ÿè¯´å®è¯å•¥éƒ½ä¸æ‡‚çå–·çš„äººå¤ªå¤šäº†ï¼Œæˆ‘ä¹Ÿä¸å¯èƒ½ä¸€ä¸ªä¸€ä¸ªçš„å–·å›å»ï¼Œæ²¡æ„æ€ï¼Œå¦‚æœä½ è§‰å¾—æœ‰å†™çš„ä¸å¥½åœ°æ–¹ï¼Œä½ å¤§å¯å°±äº‹è®ºäº‹åˆ—ä¸¾å‡ºæ¥ï¼Œæˆ‘å€’æ˜¯ä¼šå¾ˆè®¤çœŸçš„æ€è€ƒæ”¹è¿›ï¼Œä¸ç„¶ï¼Œæˆ‘å°±åªèƒ½å½“ä½ æ˜¯å–·å­äº†å•Š å“¥ä»¬ğŸ˜‚ã€‚è€Œä¸”ï¼Œä½ èƒ½è¯´ä¸‹ä»€ä¹ˆæ˜¯çœŸæ­£ä¼ä¸šçº§çš„å—ï¼Ÿæˆ‘å·¥ä½œ10å¤šå¹´ï¼Œæä¸æ¸…æ¥šä»€ä¹ˆæ‰æ˜¯çœŸæ­£ä¼ä¸šçº§çš„å‘¢ã€‚ã€‚ã€‚
>
> ä½ å¯ä»¥çœ‹ä¸‹æˆ‘å†™çš„è¿™ç¯‡æ–‡ç« ï¼šå…¬ä¼—å·â€å°äº‰å“¥â€œ çœ‹çœ‹ä¸‹é¢çš„ç•™è¨€ï¼š https://mp.weixin.qq.com/s/Od95pFonyLo7IlB3THa8Tw

![](media/image26.png)![](media/image24.png)4 3

> ![](media/image27.png)**è¾£ä¹ˆå¤§**
>
> 2020-01-22
>
> å¯¹äºåœ¨ID generatorä¸­æ–¹æ³•é‡Œå†™åˆ°void foo(){
>
> Random random = new Random();
>
> }
>
> æœ‰ä¸ªç–‘é—®ï¼šâ€¦
>
> å±•å¼€î˜ƒ
>
> ä½œè€…å›å¤: ä¹Ÿå¯ä»¥ï¼Œä¸è¿‡å°½é‡çš„ç¼©å°å˜é‡çš„ä½œç”¨åŸŸï¼Œä»£ç å¯è¯»æ€§ä¹Ÿå¥½ï¼Œæ¯•ç«Ÿrandomåªä¼šç”¨åœ¨æŸä¸ªå‡½æ•°ä¸­ï¼Œè€Œä¸æ˜¯ç”¨åœ¨å¤šä¸ªå‡½æ•°ä¸­ï¼Œæ”¾åˆ°å±€éƒ¨å‡½æ•°ä¸­ï¼Œä¹Ÿç¬¦åˆå°è£…çš„ç‰¹æ€§ï¼Œä¸æš´éœ²å¤ªå¤šç»†èŠ‚ã€‚

![](media/image28.png)![](media/image29.png)1

> ![](media/image30.png)**å…¨æ—¶Nå¤šåª**
>
> 2020-01-22
>
> 34è¡Œä»£ç æ˜¯ä¸æ˜¯å†™é”™äº†ï¼Ÿ
>
> Assert.assertTrue(('0' &lt; c && c &gt; '9') \|\| ('a' &lt; c && c &gt; 'z') \|\| ('A' &lt; c && c &lt; 'Z'));
>
> å±•å¼€î˜ƒ
>
> ä½œè€…å›å¤: å¥½åƒæ²¡æœ‰å§

![](media/image31.png)![](media/image32.png)2 1

> ![](media/image33.png)**Kenå¼ äº‘å¿ **
>
> 2020-01-22
>
> è¯»å°äº‰å“¥çš„æ³¨é‡Šå°±æ˜¯ç§æ¬£èµ,å°äº‰å“¥çš„è‹±æ–‡è¡¨è¾¾æ˜¯æ€ä¹ˆä¸€æ­¥æ­¥ç§¯ç´¯çš„? æˆ‘è®¤ä¸ºåŠ¨è¯å’Œä»‹è¯æ˜¯è‹±æ–‡çš„ç²¾é«“,è¿˜æœ‰è‹±æ–‡çš„è¯­æ³•
>
> å±•å¼€î˜ƒ
>
> ä½œè€…å›å¤: æˆ‘è‹±è¯­ä¹Ÿä¸å¥½ï¼Œå¤šèŠ±ç‚¹å¿ƒæ€ä¼˜åŒ–ä¸€ä¸‹ï¼Œå®åœ¨ä¸è¡Œï¼Œå†™ä¸­æ–‡æ³¨é‡Šä¹Ÿæ˜¯å¯ä»¥çš„

![](media/image34.png)![](media/image35.png)1

> ![](media/image36.png)**evolution**
>
> 2020-01-22
>
> ä»£ç çš„æ¼”å˜è¿‡ç¨‹ï¼ŒçœŸçš„æ˜¯å¹²è´§æ»¡æ»¡ã€‚ä¸çŸ¥é“äº‰å“¥æœ‰æ²¡æœ‰æ¶æ„æ–¹é¢çš„æ¼”å˜è¯¾ç¨‹ï¼Ÿ
>
> ä½œè€…å›å¤: æ„Ÿè°¢è®¤å¯ï¼Œæš‚æ—¶æ²¡æœ‰å‘¢

![](media/image37.png)![](media/image38.png)1 1

> ![](media/image39.png)**å¼¹ç°§äºº**
>
> 2020-02-01
>
> LogTraceIdGenerator logTraceIdGenerator = new RandomIdGenerator(); æ²¡æ‡‚ä¸ºä»€
>
> ä¹ˆæœ‰äº†IdGeneratorè¿˜è¦æ–°å»ºä¸€ä¸ªLogTraceIdGenerator ã€‚ ç›´æ¥LogTraceIdGenerator lo gTraceIdGenerator = new RandomIdGenerator()ä¸è¡Œå—ï¼Ÿ æœ‰äººèƒ½è¯´è¯´ä¸ºå•¥å—
>
> å±•å¼€î˜ƒ

![](media/image40.png)![](media/image41.png)

> ![](media/image42.png)**å¼¹ç°§äºº**
>
> 2020-02-01
>
> LogTraceIdGenerator logTraceIdGenerator = new RandomIdGenerator();

![](media/image40.png)![](media/image41.png)

> ![](media/image43.png)**Eclipse**
>
> 2020-01-31
>
> //ä»£ç ä½¿ç”¨ä¸¾ä¾‹LogTraceIdGenerator logTraceIdGenerator = new RandomIdGenerat or();
>
> äº‰å“¥ï¼Œä¸¤ä¸ªå­ç±»ä¹‹é—´å¯ä»¥è¿›è¡Œç±»å‹è½¬æ¢å—ï¼Ÿ

![](media/image44.png)![](media/image45.png)

> ![](media/image46.png)**æ—©èµ·ä¸åƒè™«**
>
> 2020-01-29
>
> å¹²è´§æ»¡æ»¡
>
> å±•å¼€î˜ƒ

![](media/image44.png)![](media/image47.png)

> ![](media/image48.png)**é›ªä¸­äº®**
>
> 2020-01-29
>
> äº‰å“¥å¥½ï¼Œæˆ‘çœ‹åˆ°è¿™ä¹ˆä¸€å¥ï¼šå°† generateRandomAlphameric() å’Œ getLastSubstrSplitted ByDot() è¿™ä¸¤ä¸ªå‡½æ•°çš„è®¿é—®æƒé™è®¾ç½®ä¸º protectedã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯ï¼Œå¯ä»¥ç›´æ¥åœ¨å•å…ƒæµ‹è¯•ä¸­é€šè¿‡å¯¹è±¡æ¥è°ƒç”¨ä¸¤ä¸ªå‡½æ•°è¿›è¡Œæµ‹è¯•ã€‚
>
> æˆ‘è§‰å¾—å°†æ–¹æ³•æ ‡è®°ä¸ºé»˜è®¤è®¿é—®çº§åˆ«å°±å¯ä»¥äº†ï¼Œè¿™æ ·å¯ä»¥è¢«åŒä¸€åŒ…ä¸­çš„æ‰€æœ‰ç±»è®¿é—®ã€‚ä¸éœ€â€¦
>
> å±•å¼€î˜ƒ

![](media/image40.png)![](media/image41.png)

> ![](media/image49.png)**javaadu**
>
> 2020-01-26

1.  ç›®å‰ä¹ æƒ¯æ˜¯æŠ›å¼‚å¸¸ï¼Œå¹¶ä¸”æ˜¯åŒ…è£…è¿‡çš„ä¸šåŠ¡å¼‚å¸¸ï¼Œè¿™æ ·å†™ä»£ç ï¼Œè°ƒç”¨æ–¹æ‹¿åˆ°ç»“æœåä¸éœ€è¦å†å¤„ç†ç‰¹æ®Šç»“æœçš„æƒ…å†µï¼›å¦å¤–ï¼Œè¿™ä¸ªé—®é¢˜è¿˜æ¶‰åŠåˆ°å¼‚å¸¸å¤„ç†çš„æ€è·¯ï¼Œå¼‚å¸¸å¤„ç†å¯ä»¥åœ¨æ¨¡å—çš„æœ€ä¸Šå±‚åšç»Ÿä¸€çš„æ•è·å’Œè½¬æ¢ï¼Œæ¯å±‚éƒ½æ•è·å¤ªéº»çƒ¦äº†ï¼Œä¹Ÿä¼šå½±å“ä»£ç çš„å¯è¯»æ€§

2.  è¿™ä¸ªåå­—ç›®å‰æ˜¯ä¸“é—¨ä¸º.è¿™ç§åˆ†éš”ç¬¦æœåŠ¡çš„ï¼Œè€ƒè™‘åˆ°ä¼ å…¥çš„å‚æ•°å°±æ˜¯ä¸»æœºåï¼Œå¦‚æœæœ‰è®¡åˆ’å°†è¯¥æ–¹æ³•è®¾è®¡çš„æ›´é€šç”¨ï¼Œé‚£ä¹ˆä¹Ÿè¦å°†è¿™ä¸ªæ–¹æ³•æ¢ä¸ªä½ç½®ï¼ŒæŠ½å–åˆ°æŸä¸ªå­—ç¬¦ä¸²å·¥å…·ç±»ä¸­

> å±•å¼€î˜ƒ

![](media/image50.png)![](media/image51.png)

> ![](media/image52.png)**Geek\_54edc1**
>
> 2020-01-25
>
> 1ï¼šéœ€è¦ç»§ç»­æŠ›å‡ºå¼‚å¸¸ï¼Œå› ä¸ºä»ä½¿ç”¨è€…çš„è§’åº¦æ¥çœ‹ï¼Œå¼‚å¸¸æ›´ä¾¿äºä½¿ç”¨è€…è°ƒè¯•ä½¿ç”¨ã€‚2ï¼šæ›¿æ¢æˆgetLastSubstrByDelimiter(String hostName)ï¼Œæ„Ÿè§‰æ›´é€šç”¨ä¸€äº›ï¼Œ
>
> å±•å¼€î˜ƒ

![](media/image50.png)![](media/image51.png)

> ![](media/image53.png)**L**ğŸš²ğŸ±
>
> 2020-01-25

1.  è·å–ä¸»æœºåå¤±è´¥çš„æ—¶å€™, è¿”å›å¼‚å¸¸, åœ¨å°ç‹çš„ä»£ç å®ç°ä¸­ï¼Œè·å–ä¸»æœºåå¤±è´¥å¼‚å¸¸åœ¨ IdGen erator å†…éƒ¨è¢«åæ‰äº†ï¼Œæ‰“å°ä¸€æ¡æŠ¥è­¦æ—¥å¿—ï¼Œå¹¶æ²¡æœ‰ç»§ç»­å¾€ä¸ŠæŠ›å‡ºï¼Œè¿™æ ·çš„å¼‚å¸¸å¤„ç†æ˜¯ä¸æ°å½“çš„, åº”è¯¥è¦ç»§ç»­æŠ›å‡º, åœ¨å®é™…çš„ä¸šå¼€å‘ä¸­, ä¼šæœ‰å¯¹åº”çš„è‡ªåŠ¨å¼‚å¸¸æ•è·, æŠ›å‡ºå¯ä»¥è®©è°ƒç”¨è€…æ˜ç™½å“ªé‡Œå‡ºé—®é¢˜äº†,è€Œä¸æ˜¯åªæ˜¯ç®€å•çš„æ‰“å°æ—¥å¿—.

2.  å‡½æ•°åå­—æ›¿æ¢çœ‹å‡½æ•°çš„é€»è¾‘æ˜¯å¦ç»å¸¸å˜åŠ¨, å¦‚æœç»å¸¸å˜åŠ¨, é‚£æ”¹å˜æ²¡æœ‰é—®é¢˜, å› ä¸ºæ”¹åŠ¨åâ€¦

> å±•å¼€î˜ƒ

![](media/image54.png)![](media/image55.png)

> ![](media/image56.png)**ç‰›é¡¿çš„çƒˆç„°æ¿€å…‰å‰‘**
>
> 2020-01-25
>
> è€å¸ˆï¼Œå¯¹äºè·å– hostnameï¼ˆgetLastfieldOfHostName()ï¼‰ï¼Œæˆ‘çš„æƒ³æ³•æ˜¯ç”¨ static ä»£ç å—ï¼Œåªåœ¨ç±»åŠ è½½çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡ã€‚è¯·é—®è¿™æ ·å¤„ç†çš„è¯ä¼šä¸ä¼šæœ‰ä»€ä¹ˆåå¤„ï¼Ÿ
>
> å±•å¼€î˜ƒ
>
> ![](media/image50.png)![](media/image51.png)ä½œè€…å›å¤: æœ‰å¯èƒ½hostnameä¼šæ”¹å˜ï¼Œä½ çš„ä»£ç å°±è·å–ä¸åˆ°æœ€æ–°çš„hostname

![](media/image57.png)

> å±•å¼€î˜ƒ

![](media/image58.png)![](media/image59.png)

> ![](media/image60.png)**potato00fa**
>
> 2020-01-24
>
> å¦™å•Š
>
> å±•å¼€î˜ƒ

![](media/image58.png)![](media/image59.png)
