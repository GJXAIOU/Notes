# 09ç†è®ºå…­ï¼šä¸ºä»€ä¹ˆåŸºäºæ¥å£è€Œéå®ç°ç¼–ç¨‹ï¼Ÿæœ‰å¿…è¦ä¸ºæ¯ä¸ªç±»éƒ½å®šä¹‰æ¥å£å—ï¼Ÿ

> 2019-11-22 ç‹äº‰
>
> è®¾è®¡æ¨¡å¼ä¹‹ç¾ è¿›å…¥è¯¾ç¨‹ î™¯

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image204.png)

> åœ¨ä¸Šä¸€èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬è®²äº†æ¥å£å’ŒæŠ½è±¡ç±»ï¼Œä»¥åŠå„ç§ç¼–ç¨‹è¯­è¨€æ˜¯å¦‚ä½•æ”¯æŒã€å®ç°è¿™ä¸¤ä¸ªè¯­æ³•æ¦‚
>
> å¿µçš„ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬ç»§ç»­è®²ä¸€ä¸ªè·Ÿ"æ¥å£"ç›¸å…³çš„çŸ¥è¯†ç‚¹ï¼šåŸºäºæ¥å£è€Œéå®ç°ç¼–ç¨‹ã€‚è¿™ä¸ªåŸåˆ™éå¸¸é‡è¦ï¼Œæ˜¯ä¸€ç§éå¸¸æœ‰æ•ˆçš„æé«˜ä»£ç è´¨é‡çš„æ‰‹æ®µï¼Œåœ¨å¹³æ—¶çš„å¼€å‘ä¸­ç‰¹åˆ«ç»å¸¸è¢«ç”¨åˆ°ã€‚
>
> ä¸ºäº†è®©ä½ ç†è§£é€å½»ï¼Œå¹¶çœŸæ­£æŒæ¡è¿™æ¡åŸåˆ™å¦‚ä½•åº”ç”¨ï¼Œä»Šå¤©ï¼Œæˆ‘ä¼šç»“åˆä¸€ä¸ªæœ‰å…³å›¾ç‰‡å­˜å‚¨çš„å®æˆ˜æ¡ˆä¾‹æ¥è®²è§£ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿™æ¡åŸåˆ™è¿˜å¾ˆå®¹æ˜“è¢«è¿‡åº¦åº”ç”¨ï¼Œæ¯”å¦‚ä¸ºæ¯ä¸€ä¸ªå®ç°ç±»éƒ½å®šä¹‰å¯¹åº”çš„æ¥å£ã€‚é’ˆå¯¹è¿™ç±»é—®é¢˜ï¼Œåœ¨ä»Šå¤©çš„è®²è§£ä¸­ï¼Œæˆ‘ä¹Ÿä¼šå‘Šè¯‰ä½ å¦‚ä½•æ¥åšæƒè¡¡ï¼Œæ€æ ·æ°åˆ°å¥½å¤„åœ°åº”ç”¨è¿™æ¡åŸåˆ™ã€‚
>
> è¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬æ­£å¼å¼€å§‹ä»Šå¤©çš„å­¦ä¹ å§ï¼

## å¦‚ä½•è§£è¯»åŸåˆ™ä¸­çš„"æ¥å£"äºŒå­—ï¼Ÿ

> "åŸºäºæ¥å£è€Œéå®ç°ç¼–ç¨‹"è¿™æ¡åŸåˆ™çš„è‹±æ–‡æè¿°æ˜¯ï¼š"Program to an interface, not an implementation"ã€‚æˆ‘ä»¬ç†è§£è¿™æ¡åŸåˆ™çš„æ—¶å€™ï¼Œåƒä¸‡ä¸è¦ä¸€å¼€å§‹å°±ä¸å…·ä½“çš„ç¼–ç¨‹è¯­è¨€æŒ‚ é’©ï¼Œå±€é™åœ¨ç¼–ç¨‹è¯­è¨€çš„"æ¥å£"è¯­æ³•ä¸­ï¼ˆæ¯”å¦‚ Java ä¸­çš„ interface æ¥å£è¯­æ³•ï¼‰ã€‚è¿™æ¡åŸåˆ™æœ€æ—©å‡ºç°äº 1994 å¹´ GoF çš„ã€Šè®¾è®¡æ¨¡å¼ã€‹è¿™æœ¬ä¹¦ï¼Œå®ƒå…ˆäºå¾ˆå¤šç¼–ç¨‹è¯­è¨€è€Œè¯ç”Ÿï¼ˆæ¯”å¦‚ Javaè¯­è¨€ï¼‰ï¼Œæ˜¯ä¸€æ¡æ¯”è¾ƒæŠ½è±¡ã€æ³›åŒ–çš„è®¾è®¡æ€æƒ³ã€‚
>
> å®é™…ä¸Šï¼Œç†è§£è¿™æ¡åŸåˆ™çš„å…³é”®ï¼Œå°±æ˜¯ç†è§£å…¶ä¸­çš„"æ¥å£"ä¸¤ä¸ªå­—ã€‚è¿˜è®°å¾—æˆ‘ä»¬ä¸Šä¸€èŠ‚è¯¾è®² çš„"æ¥å£"çš„å®šä¹‰å—ï¼Ÿä»æœ¬è´¨ä¸Šæ¥çœ‹ï¼Œ"æ¥å£"å°±æ˜¯ä¸€ç»„"åè®®"æˆ–è€…"çº¦å®š"ï¼Œæ˜¯åŠŸèƒ½æä¾›è€…æä¾›ç»™ä½¿ç”¨è€…çš„ä¸€ä¸ª"åŠŸèƒ½åˆ—è¡¨"ã€‚"æ¥å£"åœ¨ä¸åŒçš„åº”ç”¨åœºæ™¯ä¸‹ä¼šæœ‰ä¸åŒçš„è§£è¯»ï¼Œæ¯”å¦‚æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯ä¹‹é—´çš„"æ¥å£"ï¼Œç±»åº“æä¾›çš„"æ¥å£"ï¼Œç”šè‡³æ˜¯ä¸€ç»„é€šä¿¡çš„åè®®éƒ½å¯ä»¥å«ä½œ"æ¥å£"ã€‚åˆšåˆšå¯¹"æ¥å£"çš„ç†è§£ï¼Œéƒ½æ¯”è¾ƒåä¸Šå±‚ã€åæŠ½è±¡ï¼Œä¸å®é™…çš„å†™ä»£ç ç¦»å¾—æœ‰ç‚¹ è¿œã€‚å¦‚æœè½å®åˆ°å…·ä½“çš„ç¼–ç ï¼Œ"åŸºäºæ¥å£è€Œéå®ç°ç¼–ç¨‹"è¿™æ¡åŸåˆ™ä¸­çš„"æ¥å£"ï¼Œå¯ä»¥ç†è§£ä¸ºç¼–ç¨‹è¯­è¨€ä¸­çš„æ¥å£æˆ–è€…æŠ½è±¡ç±»ã€‚
>
> å‰é¢æˆ‘ä»¬æåˆ°ï¼Œè¿™æ¡åŸåˆ™èƒ½éå¸¸æœ‰æ•ˆåœ°æé«˜ä»£ç è´¨é‡ï¼Œä¹‹æ‰€ä»¥è¿™ä¹ˆè¯´ï¼Œé‚£æ˜¯å› ä¸ºï¼Œåº”ç”¨è¿™æ¡åŸåˆ™ï¼Œå¯ä»¥å°†æ¥å£å’Œå®ç°ç›¸åˆ†ç¦»ï¼Œå°è£…ä¸ç¨³å®šçš„å®ç°ï¼Œæš´éœ²ç¨³å®šçš„æ¥å£ã€‚ä¸Šæ¸¸ç³»ç»Ÿé¢å‘æ¥å£è€Œéå®ç°ç¼–ç¨‹ï¼Œä¸ä¾èµ–ä¸ç¨³å®šçš„å®ç°ç»†èŠ‚ï¼Œè¿™æ ·å½“å®ç°å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œä¸Šæ¸¸ç³»ç»Ÿçš„ä»£ç åŸºæœ¬ä¸Šä¸éœ€è¦åšæ”¹åŠ¨ï¼Œä»¥æ­¤æ¥é™ä½è€¦åˆæ€§ï¼Œæé«˜æ‰©å±•æ€§ã€‚
>
> å®é™…ä¸Šï¼Œ"åŸºäºæ¥å£è€Œéå®ç°ç¼–ç¨‹"è¿™æ¡åŸåˆ™çš„å¦ä¸€ä¸ªè¡¨è¿°æ–¹å¼ï¼Œæ˜¯"åŸºäºæŠ½è±¡è€Œéå®ç°ç¼–ç¨‹"ã€‚åè€…çš„è¡¨è¿°æ–¹å¼å…¶å®æ›´èƒ½ä½“ç°è¿™æ¡åŸåˆ™çš„è®¾è®¡åˆè¡·ã€‚åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œæœ€å¤§çš„æŒ‘æˆ˜ä¹‹ä¸€å°±æ˜¯éœ€æ±‚çš„ä¸æ–­å˜åŒ–ï¼Œè¿™ä¹Ÿæ˜¯è€ƒéªŒä»£ç è®¾è®¡å¥½åçš„ä¸€ä¸ªæ ‡å‡†ã€‚**è¶ŠæŠ½è±¡ã€è¶Šé¡¶å±‚ã€è¶Šè„±ç¦»å…·ä½“æŸä¸€å®ç°çš„è®¾è®¡ï¼Œè¶Šèƒ½æé«˜ä»£ç çš„çµæ´»æ€§ï¼Œè¶Šèƒ½åº”å¯¹æœªæ¥çš„éœ€æ±‚å˜åŒ–ã€‚å¥½çš„ä»£ç è®¾è®¡ï¼Œä¸ä»…èƒ½åº”å¯¹å½“ä¸‹çš„éœ€æ±‚ï¼Œè€Œä¸”åœ¨å°†æ¥éœ€æ±‚å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œä»ç„¶èƒ½å¤Ÿåœ¨ä¸ç ´ååŸæœ‰ä»£ç è®¾è®¡çš„æƒ…å†µä¸‹çµæ´»åº”å¯¹ã€‚**è€ŒæŠ½è±¡å°±æ˜¯æé«˜ä»£ç æ‰©å±•æ€§ã€çµæ´»æ€§ã€å¯ç»´æŠ¤æ€§æœ€æœ‰æ•ˆçš„æ‰‹æ®µä¹‹ä¸€ã€‚

## å¦‚ä½•å°†è¿™æ¡åŸåˆ™åº”ç”¨åˆ°å®æˆ˜ä¸­ï¼Ÿ

> å¯¹äºè¿™æ¡åŸåˆ™ï¼Œæˆ‘ä»¬ç»“åˆä¸€ä¸ªå…·ä½“çš„å®æˆ˜æ¡ˆä¾‹æ¥è¿›ä¸€æ­¥è®²è§£ä¸€ä¸‹ã€‚
>
> å‡è®¾æˆ‘ä»¬çš„ç³»ç»Ÿä¸­æœ‰å¾ˆå¤šæ¶‰åŠå›¾ç‰‡å¤„ç†å’Œå­˜å‚¨çš„ä¸šåŠ¡é€»è¾‘ã€‚å›¾ç‰‡ç»è¿‡å¤„ç†ä¹‹åè¢«ä¸Šä¼ åˆ°é˜¿é‡Œäº‘ä¸Šã€‚ä¸ºäº†ä»£ç å¤ç”¨ï¼Œæˆ‘ä»¬å°è£…äº†å›¾ç‰‡å­˜å‚¨ç›¸å…³çš„ä»£ç é€»è¾‘ï¼Œæä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„ AliyunImageStore ç±»ï¼Œä¾›æ•´ä¸ªç³»ç»Ÿæ¥ä½¿ç”¨ã€‚å…·ä½“çš„ä»£ç å®ç°å¦‚ä¸‹æ‰€ç¤ºï¼š

```java
public class AliyunImageStore {
    //... çœç•¥å±æ€§ã€æ„é€ å‡½æ•°ç­‰...
    public void createBucketIfNotExisting(String bucketName) {
// ... åˆ›å»º bucket ä»£ç é€»è¾‘...
// ... å¤±è´¥ä¼šæŠ›å‡ºå¼‚å¸¸..
    }

    public String generateAccessToken() {
// ... æ ¹æ® accesskey/secrectkey ç­‰ç”Ÿæˆ access token
    }

    public String uploadToAliyun(Image image, String bucketName, String accessToken) {
//... ä¸Šä¼ å›¾ç‰‡åˆ°é˜¿é‡Œäº‘...
//... è¿”å›å›¾ç‰‡å­˜å‚¨åœ¨é˜¿é‡Œäº‘ä¸Šçš„åœ°å€ (urlï¼‰...
    }

    public Image downloadFromAliyun(String url, String accessToken) {
//... ä»é˜¿é‡Œäº‘ä¸‹è½½å›¾ç‰‡...
    }
}

// AliyunImageStore ç±»çš„ä½¿ç”¨ä¸¾ä¾‹
public class ImageProcessingJob {
    private static final String BUCKET_NAME = "ai_images_bucket";

    //... çœç•¥å…¶ä»–æ— å…³ä»£ç ...
    public void process() {
        Image image = ...; // å¤„ç†å›¾ç‰‡ï¼Œå¹¶å°è£…ä¸º Image å¯¹è±¡
        AliyunImageStore imageStore = new AliyunImageStore(/* çœç•¥å‚æ•° */);
        imageStore.createBucketIfNotExisting(BUCKET_NAME);
        String accessToken = imageStore.generateAccessToken();
        imagestore.uploadToAliyun(image, BUCKET_NAME, accessToken);
    }
}
```





> æ•´ä¸ªä¸Šä¼ æµç¨‹åŒ…å«ä¸‰ä¸ªæ­¥éª¤ï¼šåˆ›å»º bucketï¼ˆä½ å¯ä»¥ç®€å•ç†è§£ä¸ºå­˜å‚¨ç›®å½•ï¼‰ã€ç”Ÿæˆ access token è®¿é—®å‡­è¯ã€æºå¸¦ access token ä¸Šä¼ å›¾ç‰‡åˆ°æŒ‡å®šçš„ bucket ä¸­ã€‚ä»£ç å®ç°éå¸¸ç®€å•ï¼Œç±»ä¸­çš„å‡ ä¸ªæ–¹æ³•å®šä¹‰å¾—éƒ½å¾ˆå¹²å‡€ï¼Œç”¨èµ·æ¥ä¹Ÿå¾ˆæ¸…æ™°ï¼Œä¹çœ‹èµ·æ¥æ²¡æœ‰å¤ªå¤§é—®é¢˜ï¼Œå®Œå…¨èƒ½æ»¡è¶³æˆ‘ä»¬å°†å›¾ç‰‡å­˜å‚¨åœ¨é˜¿é‡Œäº‘çš„ä¸šåŠ¡éœ€æ±‚ã€‚
>
> ä¸è¿‡ï¼Œè½¯ä»¶å¼€å‘ä¸­å”¯ä¸€ä¸å˜çš„å°±æ˜¯å˜åŒ–ã€‚è¿‡äº†ä¸€æ®µæ—¶é—´åï¼Œæˆ‘ä»¬è‡ªå»ºäº†ç§æœ‰äº‘ï¼Œä¸å†å°†å›¾ç‰‡å­˜å‚¨åˆ°é˜¿é‡Œäº‘äº†ï¼Œè€Œæ˜¯å°†å›¾ç‰‡å­˜å‚¨åˆ°è‡ªå»ºç§æœ‰äº‘ä¸Šã€‚ä¸ºäº†æ»¡è¶³è¿™æ ·ä¸€ä¸ªéœ€æ±‚çš„å˜åŒ–ï¼Œæˆ‘ä»¬è¯¥
>
> å¦‚ä½•ä¿®æ”¹ä»£ç å‘¢ï¼Ÿ
>
> æˆ‘ä»¬éœ€è¦é‡æ–°è®¾è®¡å®ç°ä¸€ä¸ªå­˜å‚¨å›¾ç‰‡åˆ°ç§æœ‰äº‘çš„ PrivateImageStore ç±»ï¼Œå¹¶ç”¨å®ƒæ›¿æ¢æ‰é¡¹ç›®ä¸­æ‰€æœ‰çš„ AliyunImageStore ç±»å¯¹è±¡ã€‚è¿™æ ·çš„ä¿®æ”¹å¬èµ·æ¥å¹¶ä¸å¤æ‚ï¼Œåªæ˜¯ç®€å•æ›¿æ¢è€Œ
>
> å·²ï¼Œå¯¹æ•´ä¸ªä»£ç çš„æ”¹åŠ¨å¹¶ä¸å¤§ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬ç»å¸¸è¯´ï¼Œ"ç»†èŠ‚æ˜¯é­”é¬¼"ã€‚è¿™å¥è¯åœ¨è½¯ä»¶å¼€å‘ä¸­ç‰¹åˆ«é€‚ç”¨ã€‚å®é™…ä¸Šï¼Œåˆšåˆšçš„è®¾è®¡å®ç°æ–¹å¼ï¼Œå°±éšè—äº†å¾ˆå¤šå®¹æ˜“å‡ºé—®é¢˜çš„"é­”é¬¼ç»†èŠ‚"ï¼Œæˆ‘ä»¬ä¸€å—æ¥çœ‹çœ‹éƒ½æœ‰å“ªäº›ã€‚
>
> æ–°çš„ PrivateImageStore ç±»éœ€è¦è®¾è®¡å®ç°å“ªäº›æ–¹æ³•ï¼Œæ‰èƒ½åœ¨å°½é‡æœ€å°åŒ–ä»£ç ä¿®æ”¹çš„æƒ…å†µä¸‹ï¼Œæ›¿æ¢æ‰ AliyunImageStore ç±»å‘¢ï¼Ÿè¿™å°±è¦æ±‚æˆ‘ä»¬å¿…é¡»å°† AliyunImageStore ç±»ä¸­æ‰€å®š
>
> ä¹‰çš„æ‰€æœ‰ public æ–¹æ³•ï¼Œåœ¨ PrivateImageStore ç±»ä¸­éƒ½é€ä¸€å®šä¹‰å¹¶é‡æ–°å®ç°ä¸€éã€‚è€Œè¿™æ ·åšå°±ä¼šå­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œæˆ‘æ€»ç»“äº†ä¸‹é¢ä¸¤ç‚¹ã€‚
>
> é¦–å…ˆï¼ŒAliyunImageStore ç±»ä¸­æœ‰äº›å‡½æ•°å‘½åæš´éœ²äº†å®ç°ç»†èŠ‚ï¼Œæ¯”å¦‚ï¼ŒuploadToAliyun() å’Œ downloadFromAliyun()ã€‚å¦‚æœå¼€å‘è¿™ä¸ªåŠŸèƒ½çš„åŒäº‹æ²¡æœ‰æ¥å£æ„è¯†ã€æŠ½è±¡æ€ç»´ï¼Œé‚£è¿™ç§æš´éœ²å®ç°ç»†èŠ‚çš„å‘½åæ–¹å¼å°±ä¸è¶³ä¸ºå¥‡äº†ï¼Œæ¯•ç«Ÿæœ€åˆæˆ‘ä»¬åªè€ƒè™‘å°†å›¾ç‰‡å­˜å‚¨åœ¨é˜¿é‡Œäº‘ä¸Šã€‚è€Œæˆ‘ä»¬æŠŠè¿™ç§åŒ…å«"aliyun"å­—çœ¼çš„æ–¹æ³•ï¼Œç…§æŠ„åˆ° PrivateImageStore ç±»ä¸­ï¼Œæ˜¾ç„¶æ˜¯ä¸åˆé€‚
>
> çš„ã€‚å¦‚æœæˆ‘ä»¬åœ¨æ–°ç±»ä¸­é‡æ–°å‘½å uploadToAliyun()ã€downloadFromAliyun() è¿™äº›æ–¹æ³•ï¼Œé‚£å°±æ„å‘³ç€ï¼Œæˆ‘ä»¬è¦ä¿®æ”¹é¡¹ç›®ä¸­æ‰€æœ‰ä½¿ç”¨åˆ°è¿™ä¸¤ä¸ªæ–¹æ³•çš„ä»£ç ï¼Œä»£ç ä¿®æ”¹é‡å¯èƒ½å°±ä¼šå¾ˆå¤§ã€‚
>
> å…¶æ¬¡ï¼Œå°†å›¾ç‰‡å­˜å‚¨åˆ°é˜¿é‡Œäº‘çš„æµç¨‹ï¼Œè·Ÿå­˜å‚¨åˆ°ç§æœ‰äº‘çš„æµç¨‹ï¼Œå¯èƒ½å¹¶ä¸æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚æ¯”å¦‚ï¼Œé˜¿é‡Œäº‘çš„å›¾ç‰‡ä¸Šä¼ å’Œä¸‹è½½çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ç”Ÿäº§ access tokenï¼Œè€Œç§æœ‰äº‘ä¸éœ€è¦ access tokenã€‚ä¸€æ–¹é¢ï¼ŒAliyunImageStore ä¸­å®šä¹‰çš„ generateAccessToken() æ–¹æ³•ä¸èƒ½ç…§æŠ„åˆ° PrivateImageStore ä¸­ï¼›å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨ AliyunImageStore ä¸Šä¼ ã€ä¸‹è½½å›¾ç‰‡çš„æ—¶å€™ï¼Œä»£ç ä¸­ç”¨åˆ°äº† generateAccessToken() æ–¹æ³•ï¼Œå¦‚æœè¦æ”¹ä¸ºç§æœ‰äº‘çš„ä¸Šä¼ ä¸‹è½½æµç¨‹ï¼Œè¿™äº›ä»£ç éƒ½éœ€è¦åšè°ƒæ•´ã€‚
>
> é‚£è¿™ä¸¤ä¸ªé—®é¢˜è¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿè§£å†³è¿™ä¸ªé—®é¢˜çš„æ ¹æœ¬æ–¹æ³•å°±æ˜¯ï¼Œåœ¨ç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œè¦éµä»"åŸºäºæ¥å£è€Œéå®ç°ç¼–ç¨‹"çš„åŸåˆ™ï¼Œå…·ä½“æ¥è®²ï¼Œæˆ‘ä»¬éœ€è¦åšåˆ°ä¸‹é¢è¿™ 3 ç‚¹ã€‚

1.  å‡½æ•°çš„å‘½åä¸èƒ½æš´éœ²ä»»ä½•å®ç°ç»†èŠ‚ã€‚æ¯”å¦‚ï¼Œå‰é¢æåˆ°çš„ uploadToAliyun() å°±ä¸ç¬¦åˆè¦æ±‚ï¼Œåº”è¯¥æ”¹ä¸ºå»æ‰ aliyun è¿™æ ·çš„å­—çœ¼ï¼Œæ”¹ä¸ºæ›´åŠ æŠ½è±¡çš„å‘½åæ–¹å¼ï¼Œæ¯”å¦‚ï¼šupload()ã€‚

2.  å°è£…å…·ä½“çš„å®ç°ç»†èŠ‚ã€‚æ¯”å¦‚ï¼Œè·Ÿé˜¿é‡Œäº‘ç›¸å…³çš„ç‰¹æ®Šä¸Šä¼ ï¼ˆæˆ–ä¸‹è½½ï¼‰æµç¨‹ä¸åº”è¯¥æš´éœ²ç»™è°ƒç”¨è€…ã€‚æˆ‘ä»¬å¯¹ä¸Šä¼ ï¼ˆæˆ–ä¸‹è½½ï¼‰æµç¨‹è¿›è¡Œå°è£…ï¼Œå¯¹å¤–æä¾›ä¸€ä¸ªåŒ…è£¹æ‰€æœ‰ä¸Šä¼ ï¼ˆæˆ–ä¸‹è½½ï¼‰ç»†

> èŠ‚çš„æ–¹æ³•ï¼Œç»™è°ƒç”¨è€…ä½¿ç”¨ã€‚

3.  ä¸ºå®ç°ç±»å®šä¹‰æŠ½è±¡çš„æ¥å£ã€‚å…·ä½“çš„å®ç°ç±»éƒ½ä¾èµ–ç»Ÿä¸€çš„æ¥å£å®šä¹‰ï¼Œéµä»ä¸€è‡´çš„ä¸Šä¼ åŠŸèƒ½åè®®ã€‚ä½¿ç”¨è€…ä¾èµ–æ¥å£ï¼Œè€Œä¸æ˜¯å…·ä½“çš„å®ç°ç±»æ¥ç¼–ç¨‹ã€‚

> æˆ‘ä»¬æŒ‰ç…§è¿™ä¸ªæ€è·¯ï¼ŒæŠŠä»£ç é‡æ„ä¸€ä¸‹ã€‚é‡æ„åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

î˜“ å¤åˆ¶ä»£ç 

1.  public interface ImageStore {

2.  String upload(Image image, String bucketName);

3.  Image download(String url);

> 4 }
>
> 5

6.  public class AliyunImageStore implements ImageStore {

7.  //\... çœç•¥å±æ€§ã€æ„é€ å‡½æ•°ç­‰\...

> 8
>
> 9 public String upload(Image image, String bucketName) {

10. createBucketIfNotExisting(bucketName);

11. String accessToken = generateAccessToken();

12. //\... ä¸Šä¼ å›¾ç‰‡åˆ°é˜¿é‡Œäº‘\...

13. //\... è¿”å›å›¾ç‰‡åœ¨é˜¿é‡Œäº‘ä¸Šçš„åœ°å€ (url)\...

> é™¤æ­¤ä¹‹å¤–ï¼Œå¾ˆå¤šäººåœ¨å®šä¹‰æ¥å£çš„æ—¶å€™ï¼Œå¸Œæœ›é€šè¿‡å®ç°ç±»æ¥åæ¨æ¥å£çš„å®šä¹‰ã€‚å…ˆæŠŠå®ç°ç±»å†™ å¥½ï¼Œç„¶åçœ‹å®ç°ç±»ä¸­æœ‰å“ªäº›æ–¹æ³•ï¼Œç…§æŠ„åˆ°æ¥å£å®šä¹‰ä¸­ã€‚å¦‚æœæŒ‰ç…§è¿™ç§æ€è€ƒæ–¹å¼ï¼Œå°±æœ‰å¯èƒ½å¯¼è‡´æ¥å£å®šä¹‰ä¸å¤ŸæŠ½è±¡ï¼Œä¾èµ–å…·ä½“çš„å®ç°ã€‚è¿™æ ·çš„æ¥å£è®¾è®¡å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç§æ€è€ƒæ–¹å¼æ›´åŠ é¡ºç•…ï¼Œé‚£ä¹Ÿæ²¡é—®é¢˜ï¼Œåªæ˜¯å°†å®ç°ç±»çš„æ–¹æ³•æ¬ç§»åˆ°æ¥å£å®šä¹‰ä¸­çš„æ—¶å€™ï¼Œè¦æœ‰é€‰æ‹©æ€§çš„æ¬ç§»ï¼Œä¸è¦å°†è·Ÿå…·ä½“å®ç°ç›¸å…³çš„æ–¹æ³•æ¬ç§»åˆ°æ¥å£ä¸­ï¼Œæ¯”å¦‚ AliyunImageStore ä¸­çš„ generateAccessToken() æ–¹æ³•ã€‚
>
> æ€»ç»“ä¸€ä¸‹ï¼Œæˆ‘ä»¬åœ¨åšè½¯ä»¶å¼€å‘çš„æ—¶å€™ï¼Œä¸€å®šè¦æœ‰æŠ½è±¡æ„è¯†ã€å°è£…æ„è¯†ã€æ¥å£æ„è¯†ã€‚åœ¨å®šä¹‰æ¥å£çš„æ—¶å€™ï¼Œä¸è¦æš´éœ²ä»»ä½•å®ç°ç»†èŠ‚ã€‚æ¥å£çš„å®šä¹‰åªè¡¨æ˜åšä»€ä¹ˆï¼Œè€Œä¸æ˜¯æ€ä¹ˆåšã€‚è€Œä¸”ï¼Œåœ¨è®¾è®¡æ¥å£çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦å¤šæ€è€ƒä¸€ä¸‹ï¼Œè¿™æ ·çš„æ¥å£è®¾è®¡æ˜¯å¦è¶³å¤Ÿé€šç”¨ï¼Œæ˜¯å¦èƒ½å¤Ÿåšåˆ°åœ¨æ›¿æ¢å…·ä½“çš„æ¥å£å®ç°çš„æ—¶å€™ï¼Œä¸éœ€è¦ä»»ä½•æ¥å£å®šä¹‰çš„æ”¹åŠ¨ã€‚

## æ˜¯å¦éœ€è¦ä¸ºæ¯ä¸ªç±»å®šä¹‰æ¥å£ï¼Ÿ

> çœ‹äº†åˆšåˆšçš„è®²è§£ï¼Œä½ å¯èƒ½ä¼šæœ‰è¿™æ ·çš„ç–‘é—®ï¼šä¸ºäº†æ»¡è¶³è¿™æ¡åŸåˆ™ï¼Œæˆ‘æ˜¯ä¸æ˜¯éœ€è¦ç»™æ¯ä¸ªå®ç°ç±»éƒ½å®šä¹‰å¯¹åº”çš„æ¥å£å‘¢ï¼Ÿåœ¨å¼€å‘çš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯ä»»ä½•ä»£ç éƒ½è¦åªä¾èµ–æ¥å£ï¼Œå®Œå…¨ä¸ä¾èµ–å®ç°ç¼–ç¨‹å‘¢ï¼Ÿ
>
> åšä»»ä½•äº‹æƒ…éƒ½è¦è®²æ±‚ä¸€ä¸ª"åº¦"ï¼Œè¿‡åº¦ä½¿ç”¨è¿™æ¡åŸåˆ™ï¼Œéå¾—ç»™æ¯ä¸ªç±»éƒ½å®šä¹‰æ¥å£ï¼Œæ¥å£æ»¡å¤©é£ï¼Œä¹Ÿä¼šå¯¼è‡´ä¸å¿…è¦çš„å¼€å‘è´Ÿæ‹…ã€‚è‡³äºä»€ä¹ˆæ—¶å€™ï¼Œè¯¥ä¸ºæŸä¸ªç±»å®šä¹‰æ¥å£ï¼Œå®ç°åŸºäºæ¥å£çš„ç¼–ç¨‹ï¼Œä»€ä¹ˆæ—¶å€™ä¸éœ€è¦å®šä¹‰æ¥å£ï¼Œç›´æ¥ä½¿ç”¨å®ç°ç±»ç¼–ç¨‹ï¼Œæˆ‘ä»¬åšæƒè¡¡çš„æ ¹æœ¬ä¾æ®ï¼Œè¿˜æ˜¯è¦å›å½’
>
> åˆ°è®¾è®¡åŸåˆ™è¯ç”Ÿçš„åˆè¡·ä¸Šæ¥ã€‚åªè¦ææ¸…æ¥šäº†è¿™æ¡åŸåˆ™æ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆæ ·çš„é—®é¢˜è€Œäº§ç”Ÿçš„ï¼Œä½ å°±ä¼šå‘ç°ï¼Œå¾ˆå¤šä¹‹å‰æ¨¡æ£±ä¸¤å¯çš„é—®é¢˜ï¼Œéƒ½ä¼šå˜å¾—è±ç„¶å¼€æœ—ã€‚
>
> å‰é¢æˆ‘ä»¬ä¹Ÿæåˆ°ï¼Œè¿™æ¡åŸåˆ™çš„è®¾è®¡åˆè¡·æ˜¯ï¼Œå°†æ¥å£å’Œå®ç°ç›¸åˆ†ç¦»ï¼Œå°è£…ä¸ç¨³å®šçš„å®ç°ï¼Œæš´éœ²ç¨³å®šçš„æ¥å£ã€‚ä¸Šæ¸¸ç³»ç»Ÿé¢å‘æ¥å£è€Œéå®ç°ç¼–ç¨‹ï¼Œä¸ä¾èµ–ä¸ç¨³å®šçš„å®ç°ç»†èŠ‚ï¼Œè¿™æ ·å½“å®ç°å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œä¸Šæ¸¸ç³»ç»Ÿçš„ä»£ç åŸºæœ¬ä¸Šä¸éœ€è¦åšæ”¹åŠ¨ï¼Œä»¥æ­¤æ¥é™ä½ä»£ç é—´çš„è€¦åˆæ€§ï¼Œæé«˜ä»£ç çš„æ‰©å±•æ€§ã€‚
>
> ä»è¿™ä¸ªè®¾è®¡åˆè¡·ä¸Šæ¥çœ‹ï¼Œå¦‚æœåœ¨æˆ‘ä»¬çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼ŒæŸä¸ªåŠŸèƒ½åªæœ‰ä¸€ç§å®ç°æ–¹å¼ï¼Œæœªæ¥ä¹Ÿä¸å¯èƒ½è¢«å…¶ä»–å®ç°æ–¹å¼æ›¿æ¢ï¼Œé‚£æˆ‘ä»¬å°±æ²¡æœ‰å¿…è¦ä¸ºå…¶è®¾è®¡æ¥å£ï¼Œä¹Ÿæ²¡æœ‰å¿…è¦åŸºäºæ¥å£ç¼–ç¨‹ï¼Œç›´æ¥ä½¿ç”¨å®ç°ç±»å°±å¯ä»¥äº†ã€‚
>
> é™¤æ­¤ä¹‹å¤–ï¼Œè¶Šæ˜¯ä¸ç¨³å®šçš„ç³»ç»Ÿï¼Œæˆ‘ä»¬è¶Šæ˜¯è¦åœ¨ä»£ç çš„æ‰©å±•æ€§ã€ç»´æŠ¤æ€§ä¸Šä¸‹åŠŸå¤«ã€‚ç›¸åï¼Œå¦‚æœæŸä¸ªç³»ç»Ÿç‰¹åˆ«ç¨³å®šï¼Œåœ¨å¼€å‘å®Œä¹‹åï¼ŒåŸºæœ¬ä¸Šä¸éœ€è¦åšç»´æŠ¤ï¼Œé‚£æˆ‘ä»¬å°±æ²¡æœ‰å¿…è¦ä¸ºå…¶æ‰©å±•æ€§ï¼ŒæŠ•å…¥ä¸å¿…è¦çš„å¼€å‘æ—¶é—´ã€‚

## é‡ç‚¹å›é¡¾

> ä»Šå¤©çš„å†…å®¹åˆ°æ­¤å°±è®²å®Œäº†ã€‚æˆ‘ä»¬æ¥ä¸€å—æ€»ç»“å›é¡¾ä¸€ä¸‹ï¼Œä½ éœ€è¦æŒæ¡çš„é‡ç‚¹å†…å®¹ã€‚
>
> 1."åŸºäºæ¥å£è€Œéå®ç°ç¼–ç¨‹"ï¼Œè¿™æ¡åŸåˆ™çš„å¦ä¸€ä¸ªè¡¨è¿°æ–¹å¼ï¼Œæ˜¯"åŸºäºæŠ½è±¡è€Œéå®ç°ç¼–
>
> ç¨‹"ã€‚åè€…çš„è¡¨è¿°æ–¹å¼å…¶å®æ›´èƒ½ä½“ç°è¿™æ¡åŸåˆ™çš„è®¾è®¡åˆè¡·ã€‚æˆ‘ä»¬åœ¨åšè½¯ä»¶å¼€å‘çš„æ—¶å€™ï¼Œä¸€å®šè¦æœ‰æŠ½è±¡æ„è¯†ã€å°è£…æ„è¯†ã€æ¥å£æ„è¯†ã€‚è¶ŠæŠ½è±¡ã€è¶Šé¡¶å±‚ã€è¶Šè„±ç¦»å…·ä½“æŸä¸€å®ç°çš„è®¾è®¡ï¼Œè¶Šèƒ½æé«˜ä»£ç çš„çµæ´»æ€§ã€æ‰©å±•æ€§ã€å¯ç»´æŠ¤æ€§ã€‚

2.  æˆ‘ä»¬åœ¨å®šä¹‰æ¥å£çš„æ—¶å€™ï¼Œä¸€æ–¹é¢ï¼Œå‘½åè¦è¶³å¤Ÿé€šç”¨ï¼Œä¸èƒ½åŒ…å«è·Ÿå…·ä½“å®ç°ç›¸å…³çš„å­—çœ¼ï¼›å¦ä¸€æ–¹é¢ï¼Œä¸ç‰¹å®šå®ç°æœ‰å…³çš„æ–¹æ³•ä¸è¦å®šä¹‰åœ¨æ¥å£ä¸­ã€‚

> 3."åŸºäºæ¥å£è€Œéå®ç°ç¼–ç¨‹"è¿™æ¡åŸåˆ™ï¼Œä¸ä»…ä»…å¯ä»¥æŒ‡å¯¼éå¸¸ç»†èŠ‚çš„ç¼–ç¨‹å¼€å‘ï¼Œè¿˜èƒ½æŒ‡å¯¼æ›´åŠ ä¸Šå±‚çš„æ¶æ„è®¾è®¡ã€ç³»ç»Ÿè®¾è®¡ç­‰ã€‚æ¯”å¦‚ï¼ŒæœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯ä¹‹é—´çš„"æ¥å£"è®¾è®¡ã€ç±»åº“çš„"æ¥å£"è®¾è®¡ã€‚

## è¯¾å ‚è®¨è®º

> åœ¨ä»Šå¤©ä¸¾çš„ä»£ç ä¾‹å­ä¸­ï¼Œå°½ç®¡æˆ‘ä»¬é€šè¿‡æ¥å£æ¥éš”ç¦»äº†ä¸¤ä¸ªå…·ä½“çš„å®ç°ã€‚ä½†æ˜¯ï¼Œåœ¨é¡¹ç›®ä¸­å¾ˆå¤šåœ°æ–¹ï¼Œæˆ‘ä»¬éƒ½æ˜¯é€šè¿‡ä¸‹é¢ç¬¬ 8 è¡Œçš„æ–¹å¼æ¥ä½¿ç”¨æ¥å£çš„ã€‚è¿™å°±ä¼šäº§ç”Ÿä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯ï¼Œå¦‚
>
> æœæˆ‘ä»¬è¦æ›¿æ¢å›¾ç‰‡å­˜å‚¨æ–¹å¼ï¼Œè¿˜æ˜¯éœ€è¦ä¿®æ”¹å¾ˆå¤šç±»ä¼¼ç¬¬ 8 è¡Œé‚£æ ·çš„ä»£ç ã€‚è¿™æ ·çš„è®¾è®¡è¿˜æ˜¯ä¸å¤Ÿå®Œç¾ï¼Œå¯¹æ­¤ï¼Œä½ æœ‰æ›´å¥½çš„å®ç°æ€è·¯å—ï¼Ÿ

+----+-----+------------------------------------------------------------------------+
| 7  |     | > Image image = \...;// å¤„ç†å›¾ç‰‡ï¼Œå¹¶å°è£…ä¸º Image å¯¹è±¡                  |
+====+=====+========================================================================+
| 8  |     | > ImageStore imageStore = new PrivateImageStore(/\* çœç•¥æ„é€ å‡½æ•° \*/); |
+----+-----+------------------------------------------------------------------------+
| 9  |     | > imagestore.upload(image, BUCKET_NAME);                               |
+----+-----+------------------------------------------------------------------------+
| 10 | > } |                                                                        |
+----+-----+------------------------------------------------------------------------+

> æ¬¢è¿åœ¨ç•™è¨€åŒºå†™ä¸‹ä½ çš„ç­”æ¡ˆï¼Œå’ŒåŒå­¦ä¸€èµ·äº¤æµå’Œåˆ†äº«ã€‚å¦‚æœæœ‰æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image9.png){width="7.048096019247594in" height="4.18739501312336in"}

> Â© ç‰ˆæƒå½’æå®¢é‚¦ç§‘æŠ€æ‰€æœ‰ï¼Œæœªç»è®¸å¯ä¸å¾—ä¼ æ’­å”®å–ã€‚ é¡µé¢å·²å¢åŠ é˜²ç›—è¿½è¸ªï¼Œå¦‚æœ‰ä¾µæƒæå®¢é‚¦å°†ä¾æ³•è¿½ç©¶å…¶æ³•å¾‹è´£ä»»ã€‚
>
> ä¸Šä¸€ç¯‡
>
> ä¸‹ä¸€ç¯‡ 10 \| ç†è®ºä¸ƒï¼šä¸ºä½•è¯´è¦å¤šç”¨ç»„åˆå°‘ç”¨ç»§æ‰¿ï¼Ÿå¦‚ä½•å†³å®šè¯¥ç”¨ç»„åˆè¿˜æ˜¯ç»§æ‰¿ï¼Ÿ
>
> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image206.png)**ç²¾é€‰ç•™è¨€ (110)**
>
> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image33.png){width="0.36475174978127733in" height="0.36475174978127733in"}**é¦™è•‰æ´¾2å·**
>
> 2019-11-22
>
> æ€è€ƒé¢˜
>
> è§£å†³æ–¹æ¡ˆ=é…ç½®æ–‡ä»¶+åå°„+å·¥å‚æ¨¡å¼

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image208.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image209.png)3 43

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image210.png){width="0.36475174978127733in" height="0.36475174978127733in"}**zeta**
>
> 2019-11-22
>
> å…¶å®è¿™ç¯‡å’Œä¸Šä¸€ç¯‡å¯ä»¥è®²çš„æ›´å¥½çš„ã€‚é¦–å…ˆï¼Œæˆ‘åå¯¹æ¥å£æ˜¯has-açš„è¯´æ³•ï¼Œæˆ‘åšæŒæ¥å£çš„è¯­ä¹‰æ˜¯behaves like(è¿™ä¸ªå…¶å®æˆ‘ä¹Ÿæ˜¯åœ¨æŸä¸€æœ¬ä¹¦ä¸Šçœ‹çš„). å’±ä»¬çœ‹ä¸‹å“ªä¸ªæ›´é€šé¡ºå’Œè¾¾æ„ï¼ŒA Aliyu nImageStorage has a DataStorage. or A AliyunImageStorage behaves like a DataSt orage? é™¤éä½ åœ¨ç¬¬ä¸€å¥åŠ ä¸Š A AliyunImageStorage has some behaviors of DataStora ge. ä½†è¿™åŸºæœ¬ä¹Ÿå°±æ˜¯behaves likeçš„æ„æ€äº†ã€‚...
>
> å±•å¼€î˜ƒ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image211.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image212.png)5 35

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image213.png){width="0.36475174978127733in" height="0.36475174978127733in"}**è¾£ä¹ˆå¤§**
>
> 2019-11-22
>
> å…³äºæ€è€ƒé¢˜æˆ‘æƒ³å‡ºä¸¤ç§æ–¹æ³•æ”¹è¿›ï¼šç®€å•å·¥å‚æ–¹æ³•å’Œä½¿ç”¨åå°„ã€‚
>
> 1ã€ç®€å•å·¥å‚æ–¹æ³•
>
> ImageStore imageStore = ImageStoreFactory.newInstance(SOTRE_TYPE_CONFIG); configæ–‡ä»¶å¯ä»¥å†™ç±»ä¼¼propertiesçš„æ–‡ä»¶ï¼Œä½¿ç”¨key-valueå­˜å‚¨ã€‚...
>
> å±•å¼€î˜ƒ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image211.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image212.png)7 22

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image214.png){width="0.36475174978127733in" height="0.36475174978127733in"}**ä¸šä½™çˆ±å¥½è€…**
>
> 2019-11-22
>
> å…³äºæŠ½è±¡å’Œå‡½æ•°å‘½åçš„é—®é¢˜ï¼Œä¸çŸ¥é“å“ªä¸ªå¤§ä½¬è¯´è¿‡è¿™ä¹ˆä¸€å¥è¯:
>
> æ¯ä¸ªä¼˜ç§€çš„ç¨‹åºå‘˜éƒ½çŸ¥é“ï¼Œä¸åº”è¯¥å®šä¹‰ä¸€ä¸ªattackBaghdad() 'è¢­å‡»å·´æ ¼è¾¾' çš„æ–¹æ³•ï¼Œè€Œæ˜¯åº”è¯¥æŠŠåŸå¸‚ä½œä¸ºå‡½æ•°çš„å‚æ•° attack(city)ã€‚
>
> å±•å¼€î˜ƒ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image27.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image209.png)18

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image215.png){width="0.36475174978127733in" height="0.36475174978127733in"}**helloworld**
>
> 2019-11-23
>
> åˆ°ç›®å‰ä¸ºæ­¢è€å¸ˆæ‰€è®²ç†çš„çš„ç†è®ºéƒ½æ‡‚ï½è‡³äºæ€è€ƒé¢˜ç”¨ç®€å•å·¥å‚ï¼Œåå°„ç­‰æ–¹å¼æ„Ÿè§‰éƒ½ä¸è¡Œã€‚ç»™è€å¸ˆæä¸ªå°å°çš„å»ºè®®ï¼šèƒ½ä¸èƒ½å’Œéš”å£çš„ã€MySQLå®ç°45è®²ã€çš„ä¸“æ ä¸€æ ·åœ¨ä¸‹ä¸€èŠ‚è¯¾ç¨‹çš„æœ«å°¾é›†ä¸­å›ç­”ä¸€ä¸‹ä¸Šä¸€èŠ‚è¯¾ç¨‹çš„è¯¾åä¹ é¢˜ï¼Ÿæ„Ÿè°¢
>
> å±•å¼€î˜ƒ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image216.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image217.png)1 14

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image97.png){width="0.36475174978127733in" height="0.36475174978127733in"}**ç§‹æƒŠè›°**
>
> 2019-11-22
>
> ä¾èµ–æ³¨å…¥ï¼Œä»å¤–éƒ¨æ„å»ºå…·ä½“ç±»çš„å¯¹è±¡ï¼Œä¼ å…¥ä½¿ç”¨çš„åœ°æ–¹
>
> å±•å¼€î˜ƒ
>
> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image216.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image217.png)1 14
>
> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image218.png){width="0.36475174978127733in" height="0.36475174978127733in"}**å¤±ç«çš„å¤å¤©**
>
> 2019-11-22
>
> æ€è€ƒé¢˜ä¼°è®¡å°±æ˜¯è¦å¼•å‡ºå·¥å‚æ¨¡å¼äº†å§
>
> å±•å¼€î˜ƒ
>
> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image219.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image220.png)13
>
> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image38.png){width="0.36475174978127733in" height="0.36475174978127733in"}**ç¼–ç¨‹ç•Œçš„å°å­¦ç”Ÿ**
>
> 2019-11-22
>
> é¦–å…ˆè¿™ç¯‡æ–‡ç« å—ç›ŠåŒªæµ…ï¼Œå°¤å…¶æ˜¯ç¬¬äºŒç‚¹ï¼Œä¸ç‰¹å®šå®ç°æœ‰å…³çš„æ–¹æ³•ä¸è¦æš´éœ²åˆ°æ¥å£ä¸­ï¼Œæ·±æœ‰ä½“ä¼šã€‚
>
> å…¶æ¬¡é—®é¢˜è§£ç­”
>
> æˆ‘ä¸ªäººçš„è§£å†³æ–¹æ¡ˆæ˜¯è¿™ç§æƒ…å†µä¸è¦å»ç›´æ¥newï¼Œè€Œæ˜¯ç”¨å·¥å‚ç±»å»ç®¡ç†è¿™ä¸ªå¯¹è±¡ï¼Œç„¶ååå­—...
>
> å±•å¼€î˜ƒ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image219.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image221.png)9

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image222.png){width="0.36475174978127733in" height="0.36475174978127733in"}**YouCompleteMe**
>
> 2019-11-22
>
> æŠ½è±¡å·¥å‚ï¼ŒæŠŠåˆ›å»ºå…·ä½“ç±»å‹æ”¾åˆ°å·¥å‚ç±»é‡Œ
>
> å±•å¼€î˜ƒ
>
> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image27.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image223.png)6
>
> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image141.png){width="0.36475174978127733in" height="0.36475174978127733in"}**Monday**
>
> 2019-11-22
>
> ä¾èµ–æ³¨å…¥å¯ä»¥è§£å†³æ€è€ƒé¢˜ï¼ŒåŸºäºæ¥å£çš„å®ç°æœ‰å¤šç§æ—¶ï¼Œæ³¨å…¥å¤„ä¹Ÿéœ€è¦æŒ‡æ˜æ˜¯å“ªå’¤å®ç°

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image223.png)5

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image224.png){width="0.36475174978127733in" height="0.36475174978127733in"}**William**
>
> 2019-11-22
>
> æ‰€ä»¥æ€è€ƒé¢˜ï¼Œæƒ³åˆ°çš„æ˜¯ï¼Œå°†æ¥å£ä½œä¸ºæ„é€ å‡½æ•°ä¸­çš„å‚æ•°ï¼Œä¼ é€’è¿›æ¥ï¼Œå†è°ƒç”¨.

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image225.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image226.png)4 4

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image227.png){width="0.36475174978127733in" height="0.36475174978127733in"}**çº¢é…’èŠ±ç”Ÿ**
>
> 2019-11-22
>
> å­˜å‚¨å›¾ç‰‡çš„æ–¹å¼å†™å…¥åˆ°é…ç½®æ–‡ä»¶ï¼Œç¬¬8è¡Œæ”¹ç”¨ä¼ å…¥ç±»å‹å‚æ•°æ¥å®ä¾‹åŒ–ä¸åŒçš„å¯¹è±¡ï¼Œæ˜å¤©è¡¥ä¸Šä»£ç ã€‚

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image43.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image226.png)4

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image228.png){width="0.36475174978127733in" height="0.36475174978127733in"}**äºŒæ˜Ÿçƒ**
>
> 2019-11-23
>
> ä½¿ç”¨ç­–ç•¥æ¨¡å¼ï¼Œåœ¨å»ºä¸€ä¸ªContextç±»ï¼Œä½¿ç”¨èšåˆæŒæœ‰è¿™ä¸ªæ¥å£å®ä¾‹å¼•ç”¨ï¼Œå…¶å®ƒæ‰€æœ‰åœ°æ–¹éƒ½ç”¨è¿™ä¸ªcontextç±»ï¼Œå˜åŠ¨çš„æ—¶å€™ï¼Œåªå˜è¿™ä¸ªcontextç±»å°±è¡Œäº†ï¼Œå…¶å®ƒä¸åŠ¨
>
> å±•å¼€î˜ƒ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image47.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image229.png)3

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image230.png){width="0.36475174978127733in" height="0.36475174978127733in"}**NoAsk**
>
> 2019-11-22
>
> å…³äºä»€ä¹ˆæ—¶å€™å®šä¹‰æ¥å£çš„ä¸€äº›æ‹™è§ï¼š
>
> å½“æ–¹æ³•ä¼šæœ‰å…¶ä»–å®ç°ï¼Œæˆ–è€…ä¸ç¨³å®šçš„æ—¶å€™éœ€è¦å®šä¹‰æ¥å£ï¼› 1.ä¸ç¨³å®šçš„æ–¹æ³•ä¸€èˆ¬èƒ½äº‹å…ˆç¡®å®šï¼Œç”¨æ¥å£èƒ½æé«˜å¯ç»´æŠ¤æ€§
>
> 2.ä½†åœ¨å¼€å‘æ—¶å¾€å¾€ä¸ç¡®å®šæ˜¯å¦éœ€è¦å…¶ä»–å®ç°ï¼Œæˆ‘çš„åŸåˆ™æ˜¯ç­‰åˆ°éœ€è¦ä½¿ç”¨æ¥å£çš„æ—¶å€™å†å»å®ç°ã€‚æ‰€ä»¥æ ¹æ®kissåŸåˆ™ä¸€èˆ¬æˆ‘ä¼šå…ˆç”¨æ–¹æ³•å®ç°ï¼Œå¦‚æœæœ‰ä¸€å¤©çœŸçš„éœ€è¦æœ‰æ–°çš„å®ç°çš„æ—¶å€™å†...
>
> å±•å¼€î˜ƒ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image47.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image229.png)3

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image97.png){width="0.36475174978127733in" height="0.36475174978127733in"}**ç§‹æƒŠè›°**
>
> 2019-11-22
>
> è¿™ä¸€èŠ‚è§£å†³äº†ä¸€äº›ç–‘æƒ‘ï¼Œä½†æ˜¯è¿˜æœ‰ä¸‰ä¸ªé—®é¢˜æƒ³é—®ä¸€ä¸‹ï¼š

1.  çœ‹åˆ°æœ‰äº›Spring Bootçš„ä»£ç ï¼Œä¼šç»™æ¯ä¸ªä¸šåŠ¡é€»è¾‘åˆ†åˆ«å®šä¹‰ä¸€ä¸ªserviceæ¥å£ï¼Œå¹¶ç”¨ä¸€ä¸ªç±»æ¥å®ç°è¿™ä¸ªæ¥å£ï¼Œç„¶ååœ¨controlleré‡Œåƒç¬¬8è¡Œé‚£æ ·è°ƒç”¨ã€‚

> è¿™ç§æ˜¯ä¸æ˜¯å°±è¿‡åº¦ä½¿ç”¨æ¥å£äº†ï¼Œè¿˜æ˜¯è¯´æœ‰å¿…è¦è€ƒè™‘æ¯ä¸ªä¸šåŠ¡é€»è¾‘å¯èƒ½çš„å®ç°æ–¹å¼ã€‚

2.  èƒ½ä¸èƒ½å…·ä½“çš„è¯´ä¸€ä¸‹å“ªäº›å…¸å‹åœºæ™¯é€‚åˆç”¨æ¥å£æŠ½è±¡ï¼Œæ¯”å¦‚è¾“å…¥è¾“å‡ºï¼Œè¿™ä¸¤ä¸ªåœ°æ–¹è‚¯å®š...

> å±•å¼€î˜ƒ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image231.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image226.png)3 3

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image232.png){width="0.36475174978127733in" height="0.27096237970253717in"}**å®ˆæ‹™**
>
> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image233.png){width="0.31882655293088363in" height="9.378390201224847e-2in"}2019-11-22
>
> è¯¾å ‚è®¨è®ºanswer:
>
> è€ƒè™‘ä½¿ç”¨å·¥å‚æ¨¡å¼ç”ŸæˆImageStoreå®ä¾‹.è¿™æ ·å°±å¯ä»¥å°†è°ƒç”¨è€…å’Œå…·ä½“ImageStoreè§£è€¦.
>
> ä¾‹:
>
> public class ImgStoreFactory {...
>
> å±•å¼€î˜ƒ
>
> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image234.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image235.png)2
>
> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image236.png){width="0.36475174978127733in" height="0.36475174978127733in"}**Milittle**
>
> 2019-11-22
>
> å†è¯´ä¸€å¥ é¢å‘æ¥å£ç¼–ç¨‹çš„ç²¾é«“ æˆ‘çš„ç†è§£æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨æ¥å£çš„æ—¶å€™ å…³å¿ƒæˆ‘ä»¬è¦åšä»€ä¹ˆ è€Œä¸æ˜¯æ€ä¹ˆåš æ€ä¹ˆåšéƒ½å°è£…åœ¨å…·ä½“å®ç°ç±»ä¸­ã€‚è€Œä¸”æœ€ä¸»è¦çš„æ˜¯ æ¥å£æŠ½è±¡
>
> å±•å¼€î˜ƒ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image237.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image229.png)2

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image238.png){width="0.36475174978127733in" height="0.36475174978127733in"}**é›·éœ¹é›³çš„çˆ¸çˆ¸**
>
> 2019-11-22
>
> è¦ä¸æ˜¯æœ‰ä¸€å¼€å§‹çš„è¯¾ç¨‹å¤§çº²ï¼Œæˆ‘ä»¥ä¸ºè¯¾å ‚è®¨è®ºæ˜¯è¦å¯å‘å¤§å®¶ï¼Œåœ¨ä¸‹èŠ‚å°±è¦è®²åˆ›å»ºå‹æ¨¡å¼ï¼Œå·¥å‚æ¨¡å¼ï¼Œå·¥å‚æ–¹æ³•ä»€ä¹ˆçš„äº†
>
> ä½†è½¬å¿µä¸€æƒ³ï¼Œè¿™æƒ³æ³•æˆ–è®¸å¤ªè‚¤æµ…äº†ï¼Œæ¯•ç«Ÿå¤§å¤šæ•°åˆ›å»ºå‹æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªæ˜æ˜¾çš„å¯¹å…·ä½“ç±»å‹çš„ä¾èµ–ï¼ˆè¿™é‡Œå…ˆé¢„å…ˆæ’é™¤æŠ½è±¡å·¥å‚ï¼Œè§‰å¾—æœ‰ç‚¹å°é¢˜å¤§åšè¿™æ ·æï¼‰ï¼Œéƒ½ä¸æ˜¯ä¸€ä¸ªæœ€ç»ˆèƒ½è®©äºº...å±•å¼€î˜ƒ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image237.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image229.png)2

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image239.png){width="0.36475174978127733in" height="0.36475174978127733in"}**bearlu**
>
> 2019-11-22
>
> è€å¸ˆï¼Œå¸Œæœ›èƒ½æŠŠç¤ºä¾‹ä»£ç å’Œé—®é¢˜ä»£ç ä¹Ÿæ”¾åˆ°Githubä¸Šã€‚
>
> å±•å¼€î˜ƒ
>
> ä½œè€…å›å¤: ğŸ‘Œ æˆ‘æŠ½ç©ºæ•´ç†ä¸€ä¸‹æ”¾ä¸Šå» https://github.com/wangzheng0822

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image231.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image235.png)1 2

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image240.png){width="0.36475174978127733in" height="0.36475174978127733in"}**è¶…å¨ä¸¶**
>
> 2019-11-22
>
> ä¸ªäººè§‰å¾—ç»´æŠ¤mapæ˜¯æœ€å¥½çš„é€‰æ‹©ï¼Œå®ç°ç±»å‹å’Œå…·ä½“å®ç°å¯¹åº”ã€‚

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image241.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image242.png)2

![](media/image1.png)