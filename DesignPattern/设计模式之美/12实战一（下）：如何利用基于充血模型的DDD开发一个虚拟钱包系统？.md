# 12å®æˆ˜ä¸€ï¼ˆä¸‹ï¼‰ï¼šå¦‚ä½•åˆ©ç”¨åŸºäºå……è¡€æ¨¡å‹çš„DDDå¼€å‘ä¸€ä¸ªè™šæ‹Ÿé’±åŒ…ç³»ç»Ÿï¼Ÿ

> 2019-11-29 ç‹äº‰
>
> è®¾è®¡æ¨¡å¼ä¹‹ç¾ è¿›å…¥è¯¾ç¨‹ î™¯

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image304.png)

> ä¸Šä¸€èŠ‚è¯¾ï¼Œæˆ‘ä»¬åšäº†ä¸€äº›ç†è®ºçŸ¥è¯†çš„é“ºå«æ€§è®²è§£ï¼Œè®²åˆ°äº†ä¸¤ç§å¼€å‘æ¨¡å¼ï¼ŒåŸºäºè´«è¡€æ¨¡å‹çš„ä¼ 
>
> ç»Ÿå¼€å‘æ¨¡å¼ï¼Œä»¥åŠåŸºäºå……è¡€æ¨¡å‹çš„ DDD å¼€å‘æ¨¡å¼ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬æ­£å¼è¿›å…¥å®æˆ˜ç¯èŠ‚ï¼Œçœ‹å¦‚ä½•åˆ†åˆ«ç”¨è¿™ä¸¤ç§å¼€å‘æ¨¡å¼ï¼Œè®¾è®¡å®ç°ä¸€ä¸ªé’±åŒ…ç³»ç»Ÿã€‚
>
> è¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬æ­£å¼å¼€å§‹ä»Šå¤©çš„å­¦ä¹ å§ï¼

## é’±åŒ…ä¸šåŠ¡èƒŒæ™¯ä»‹ç»

> å¾ˆå¤šå…·æœ‰æ”¯ä»˜ã€è´­ä¹°åŠŸèƒ½çš„åº”ç”¨ï¼ˆæ¯”å¦‚æ·˜å®ã€æ»´æ»´å‡ºè¡Œã€æå®¢æ—¶é—´ç­‰ï¼‰éƒ½æ”¯æŒé’±åŒ…çš„åŠŸèƒ½ã€‚åº”ç”¨ä¸ºæ¯ä¸ªç”¨æˆ·å¼€è®¾ä¸€ä¸ªç³»ç»Ÿå†…çš„è™šæ‹Ÿé’±åŒ…è´¦æˆ·ï¼Œæ”¯æŒç”¨æˆ·å……å€¼ã€æç°ã€æ”¯ä»˜ã€å†»ç»“ã€é€
>
> æ”¯ã€è½¬èµ ã€æŸ¥è¯¢è´¦æˆ·ä½™é¢ã€æŸ¥è¯¢äº¤æ˜“æµæ°´ç­‰æ“ä½œã€‚ä¸‹å›¾æ˜¯ä¸€å¼ å…¸å‹çš„é’±åŒ…åŠŸèƒ½ç•Œé¢ï¼Œä½ å¯ä»¥ç›´è§‚åœ°æ„Ÿå—ä¸€ä¸‹ã€‚

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image305.png){width="7.169576771653543in" height="5.039791119860017in"}

> ä¸€èˆ¬æ¥è®²ï¼Œæ¯ä¸ªè™šæ‹Ÿé’±åŒ…è´¦æˆ·éƒ½ä¼šå¯¹åº”ç”¨æˆ·çš„ä¸€ä¸ªçœŸå®çš„æ”¯ä»˜è´¦æˆ·ï¼Œæœ‰å¯èƒ½æ˜¯é“¶è¡Œå¡è´¦æˆ·ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ä¸‰æ–¹æ”¯ä»˜è´¦æˆ·ï¼ˆæ¯”å¦‚æ”¯ä»˜å®ã€å¾®ä¿¡é’±åŒ…ï¼‰ã€‚ä¸ºäº†æ–¹ä¾¿åç»­çš„è®²è§£ï¼Œæˆ‘ä»¬é™å®šé’±åŒ…æš‚æ—¶åªæ”¯æŒå……å€¼ã€æç°ã€æ”¯ä»˜ã€æŸ¥è¯¢ä½™é¢ã€æŸ¥è¯¢äº¤æ˜“æµæ°´è¿™äº”ä¸ªæ ¸å¿ƒçš„åŠŸèƒ½ï¼Œå…¶ä»–æ¯”å¦‚å†» ç»“ã€é€æ”¯ã€è½¬èµ ç­‰ä¸å¸¸ç”¨çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬æš‚ä¸è€ƒè™‘ã€‚ä¸ºäº†è®©ä½ ç†è§£è¿™äº”ä¸ªæ ¸å¿ƒåŠŸèƒ½æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥ä¸€å—å„¿çœ‹ä¸‹å®ƒä»¬çš„ä¸šåŠ¡å®ç°æµç¨‹ã€‚

### å……å€¼

> ç”¨æˆ·é€šè¿‡ä¸‰æ–¹æ”¯ä»˜æ¸ é“ï¼ŒæŠŠè‡ªå·±é“¶è¡Œå¡è´¦æˆ·å†…çš„é’±ï¼Œå……å€¼åˆ°è™šæ‹Ÿé’±åŒ…è´¦å·ä¸­ã€‚è¿™æ•´ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†è§£ä¸ºä¸‰ä¸ªä¸»è¦çš„æ“ä½œæµç¨‹ï¼šç¬¬ä¸€ä¸ªæ“ä½œæ˜¯ä»ç”¨æˆ·çš„é“¶è¡Œå¡è´¦æˆ·è½¬è´¦åˆ°åº”ç”¨çš„å…¬å…±é“¶è¡Œå¡è´¦æˆ·ï¼›ç¬¬äºŒä¸ªæ“ä½œæ˜¯å°†ç”¨æˆ·çš„å……å€¼é‡‘é¢åŠ åˆ°è™šæ‹Ÿé’±åŒ…ä½™é¢ä¸Šï¼›ç¬¬ä¸‰ä¸ªæ“ä½œæ˜¯è®°å½•åˆšåˆšè¿™ç¬”äº¤æ˜“æµæ°´ã€‚
>
> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image306.png){width="7.0967443132108485in" height="3.5275in"}

### æ”¯ä»˜

> ç”¨æˆ·ç”¨é’±åŒ…å†…çš„ä½™é¢ï¼Œæ”¯ä»˜è´­ä¹°åº”ç”¨å†…çš„å•†å“ã€‚å®é™…ä¸Šï¼Œæ”¯ä»˜çš„è¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªè½¬è´¦çš„è¿‡ç¨‹ï¼Œä»ç”¨æˆ·çš„è™šæ‹Ÿé’±åŒ…è´¦æˆ·åˆ’é’±åˆ°å•†å®¶çš„è™šæ‹Ÿé’±åŒ…è´¦æˆ·ä¸Šï¼Œç„¶åè§¦å‘çœŸæ­£çš„é“¶è¡Œè½¬è´¦æ“ä½œï¼Œä»åº”ç”¨çš„å…¬å…±é“¶è¡Œè´¦æˆ·è½¬é’±åˆ°å•†å®¶çš„é“¶è¡Œè´¦æˆ·ï¼ˆæ³¨æ„ï¼Œè¿™é‡Œå¹¶ä¸æ˜¯ä»ç”¨æˆ·çš„é“¶è¡Œè´¦æˆ·è½¬é’±åˆ°å•†å®¶çš„é“¶è¡Œè´¦æˆ·ï¼‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦è®°å½•è¿™ç¬”æ”¯ä»˜çš„äº¤æ˜“æµæ°´ä¿¡æ¯ã€‚

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image307.png){width="7.055885826771654in" height="3.3204166666666666in"}

### æç°

> é™¤äº†å……å€¼ã€æ”¯ä»˜ä¹‹å¤–ï¼Œç”¨æˆ·è¿˜å¯ä»¥å°†è™šæ‹Ÿé’±åŒ…ä¸­çš„ä½™é¢ï¼Œæç°åˆ°è‡ªå·±çš„é“¶è¡Œå¡ä¸­ã€‚è¿™ä¸ªè¿‡ç¨‹å®é™…ä¸Šå°±æ˜¯æ‰£å‡ç”¨æˆ·è™šæ‹Ÿé’±åŒ…ä¸­çš„ä½™é¢ï¼Œå¹¶ä¸”è§¦å‘çœŸæ­£çš„é“¶è¡Œè½¬è´¦æ“ä½œï¼Œä»åº”ç”¨çš„å…¬å…±é“¶è¡Œ
>
> è´¦æˆ·è½¬é’±åˆ°ç”¨æˆ·çš„é“¶è¡Œè´¦æˆ·ã€‚åŒæ ·ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦è®°å½•è¿™ç¬”æç°çš„äº¤æ˜“æµæ°´ä¿¡æ¯ã€‚

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image308.png){width="7.055452755905512in" height="3.2683333333333335in"}

### æŸ¥è¯¢ä½™é¢

> æŸ¥è¯¢ä½™é¢åŠŸèƒ½æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹è™šæ‹Ÿé’±åŒ…ä¸­çš„ä½™é¢æ•°å­—å³å¯ã€‚

### æŸ¥è¯¢äº¤æ˜“æµæ°´

> æŸ¥è¯¢äº¤æ˜“æµæ°´ä¹Ÿæ¯”è¾ƒç®€å•ã€‚æˆ‘ä»¬åªæ”¯æŒä¸‰ç§ç±»å‹çš„äº¤æ˜“æµæ°´ï¼šå……å€¼ã€æ”¯ä»˜ã€æç°ã€‚åœ¨ç”¨æˆ·å……å€¼ã€æ”¯ä»˜ã€æç°çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šè®°å½•ç›¸åº”çš„äº¤æ˜“ä¿¡æ¯ã€‚åœ¨éœ€è¦æŸ¥è¯¢çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦å°†ä¹‹å‰è®°å½•çš„äº¤æ˜“æµæ°´ï¼ŒæŒ‰ç…§æ—¶é—´ã€ç±»å‹ç­‰æ¡ä»¶è¿‡æ»¤ä¹‹åï¼Œæ˜¾ç¤ºå‡ºæ¥å³å¯ã€‚

## é’±åŒ…ç³»ç»Ÿçš„è®¾è®¡æ€è·¯

> æ ¹æ®åˆšåˆšè®²çš„ä¸šåŠ¡å®ç°æµç¨‹å’Œæ•°æ®æµè½¬å›¾ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ•´ä¸ªé’±åŒ…ç³»ç»Ÿçš„ä¸šåŠ¡åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†å•çº¯è·Ÿåº”ç”¨å†…çš„è™šæ‹Ÿé’±åŒ…è´¦æˆ·æ‰“äº¤é“ï¼Œå¦ä¸€éƒ¨åˆ†å•çº¯è·Ÿé“¶è¡Œè´¦æˆ·æ‰“äº¤é“ã€‚æˆ‘ä»¬åŸºäºè¿™æ ·ä¸€ä¸ªä¸šåŠ¡åˆ’åˆ†ï¼Œç»™ç³»ç»Ÿè§£è€¦ï¼Œå°†æ•´ä¸ªé’±åŒ…ç³»ç»Ÿæ‹†åˆ†ä¸ºä¸¤ä¸ªå­ç³»ç»Ÿï¼šè™šæ‹Ÿé’±åŒ…ç³»ç»Ÿå’Œä¸‰æ–¹æ”¯ä»˜ç³»ç»Ÿã€‚
>
> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image309.png){width="7.061193132108486in" height="5.513957786526684in"}
>
> ä¸ºäº†èƒ½åœ¨æœ‰é™çš„ç¯‡å¹…å†…ï¼Œå°†ä»Šå¤©çš„å†…å®¹è®²é€å½»ï¼Œæˆ‘ä»¬æ¥æ¥ä¸‹åªèšç„¦äºè™šæ‹Ÿé’±åŒ…ç³»ç»Ÿçš„è®¾è®¡ä¸å®ç°ã€‚å¯¹äºä¸‰æ–¹æ”¯ä»˜ç³»ç»Ÿä»¥åŠæ•´ä¸ªé’±åŒ…ç³»ç»Ÿçš„è®¾è®¡ä¸å®ç°ï¼Œæˆ‘ä»¬ä¸åšè®²è§£ã€‚ä½ å¯ä»¥è‡ªå·±æ€è€ƒä¸‹ã€‚
>
> **ç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸‹ï¼Œå¦‚æœè¦æ”¯æŒé’±åŒ…çš„è¿™äº”ä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼Œè™šæ‹Ÿé’±åŒ…ç³»ç»Ÿéœ€è¦å¯¹åº”å®ç°å“ªäº›æ“ ä½œã€‚**æˆ‘ç”»äº†ä¸€å¼ å›¾ï¼Œåˆ—å‡ºäº†è¿™äº”ä¸ªåŠŸèƒ½éƒ½ä¼šå¯¹åº”è™šæ‹Ÿé’±åŒ…çš„å“ªäº›æ“ä½œã€‚æ³¨æ„ï¼Œäº¤æ˜“æµæ°´çš„è®°å½•å’ŒæŸ¥è¯¢ï¼Œæˆ‘æš‚æ—¶åœ¨å›¾ä¸­æ‰“äº†ä¸ªé—®å·ï¼Œé‚£æ˜¯å› ä¸ºè¿™å—æ¯”è¾ƒç‰¹æ®Šï¼Œæˆ‘ä»¬å¾…ä¼šå†è®²ã€‚
>
> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image310.png){width="7.057270341207349in" height="5.189166666666667in"}
>
> ä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œè™šæ‹Ÿé’±åŒ…ç³»ç»Ÿè¦æ”¯æŒçš„æ“ä½œéå¸¸ç®€å•ï¼Œå°±æ˜¯ä½™é¢çš„åŠ åŠ å‡å‡ã€‚å…¶ä¸­ï¼Œå……å€¼ã€æç°ã€æŸ¥è¯¢ä½™é¢ä¸‰ä¸ªåŠŸèƒ½ï¼Œåªæ¶‰åŠä¸€ä¸ªè´¦æˆ·ä½™é¢çš„åŠ å‡æ“ä½œï¼Œè€Œæ”¯ä»˜åŠŸèƒ½æ¶‰åŠä¸¤ä¸ªè´¦æˆ·çš„ä½™é¢åŠ å‡æ“ä½œï¼šä¸€ä¸ªè´¦æˆ·å‡ä½™é¢ï¼Œå¦ä¸€ä¸ªè´¦æˆ·åŠ ä½™é¢ã€‚
>
> **ç°åœ¨ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹å›¾ä¸­é—®å·çš„é‚£éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯äº¤æ˜“æµæ°´è¯¥å¦‚ä½•è®°å½•å’ŒæŸ¥è¯¢ï¼Ÿ**æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ï¼Œäº¤æ˜“æµæ°´éƒ½éœ€è¦åŒ…å«å“ªäº›ä¿¡æ¯ã€‚æˆ‘è§‰å¾—ä¸‹é¢è¿™å‡ ä¸ªä¿¡æ¯æ˜¯å¿…é¡»åŒ…å«çš„ã€‚

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image311.png){width="7.079291338582677in" height="1.8218744531933508in"}

> ä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œäº¤æ˜“æµæ°´çš„æ•°æ®æ ¼å¼åŒ…å«ä¸¤ä¸ªé’±åŒ…è´¦å·ï¼Œä¸€ä¸ªæ˜¯å…¥è´¦é’±åŒ…è´¦å·ï¼Œä¸€ä¸ªæ˜¯å‡ºè´¦é’±åŒ…è´¦å·ã€‚ä¸ºä»€ä¹ˆè¦æœ‰ä¸¤ä¸ªè´¦å·ä¿¡æ¯å‘¢ï¼Ÿè¿™ä¸»è¦æ˜¯ä¸ºäº†å…¼å®¹æ”¯ä»˜è¿™ç§æ¶‰åŠä¸¤ä¸ªè´¦æˆ·çš„
>
> äº¤æ˜“ç±»å‹ã€‚ä¸è¿‡ï¼Œå¯¹äºå……å€¼ã€æç°è¿™ä¸¤ç§äº¤æ˜“ç±»å‹æ¥è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦è®°å½•ä¸€ä¸ªé’±åŒ…è´¦æˆ·ä¿¡æ¯å°±å¤Ÿäº†ï¼Œæ‰€ä»¥ï¼Œè¿™æ ·çš„äº¤æ˜“æµæ°´æ•°æ®æ ¼å¼çš„è®¾è®¡ç¨å¾®æœ‰ç‚¹æµªè´¹å­˜å‚¨ç©ºé—´ã€‚
>
> å®é™…ä¸Šï¼Œæˆ‘ä»¬è¿˜æœ‰å¦å¤–ä¸€ç§äº¤æ˜“æµæ°´æ•°æ®æ ¼å¼çš„è®¾è®¡æ€è·¯ï¼Œå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬æŠŠ"æ”¯ä»˜"è¿™ä¸ªäº¤æ˜“ç±»å‹ï¼Œæ‹†ä¸ºä¸¤ä¸ªå­ç±»å‹ï¼šæ”¯ä»˜å’Œè¢«æ”¯ä»˜ã€‚æ”¯ä»˜å•çº¯è¡¨ç¤ºå‡ºè´¦ï¼Œä½™é¢æ‰£å‡ï¼Œè¢«æ”¯ä»˜å•çº¯è¡¨ç¤ºå…¥è´¦ï¼Œä½™é¢å¢åŠ ã€‚è¿™æ ·æˆ‘ä»¬åœ¨è®¾è®¡äº¤æ˜“æµæ°´æ•°æ®æ ¼å¼çš„æ—¶å€™ï¼Œåªéœ€è¦è®°å½•ä¸€ä¸ªè´¦æˆ·ä¿¡æ¯å³å¯ã€‚æˆ‘ç”»äº†ä¸€å¼ ä¸¤ç§äº¤æ˜“æµæ°´æ•°æ®æ ¼å¼çš„å¯¹æ¯”å›¾ï¼Œä½ å¯ä»¥å¯¹æ¯”ç€çœ‹ä¸€ä¸‹ã€‚

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image312.png){width="7.043004155730534in" height="2.8379166666666666in"}

#### é‚£ä»¥ä¸Šä¸¤ç§äº¤æ˜“æµæ°´æ•°æ®æ ¼å¼çš„è®¾è®¡æ€è·¯ï¼Œä½ è§‰å¾—å“ªä¸€ä¸ªæ›´å¥½å‘¢ï¼Ÿ

> ç­”æ¡ˆæ˜¯ç¬¬ä¸€ç§è®¾è®¡æ€è·¯æ›´å¥½äº›ã€‚å› ä¸ºäº¤æ˜“æµæ°´æœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼šä¸€ä¸ªæ˜¯ä¸šåŠ¡åŠŸèƒ½ï¼Œæ¯”å¦‚ï¼Œæä¾›ç”¨æˆ·æŸ¥è¯¢äº¤æ˜“æµæ°´ä¿¡æ¯ï¼›å¦ä¸€ä¸ªæ˜¯éä¸šåŠ¡åŠŸèƒ½ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚è¿™é‡Œä¸»è¦æ˜¯æŒ‡æ”¯ä»˜æ“ä½œæ•°æ®çš„ä¸€è‡´æ€§ã€‚
>
> æ”¯ä»˜å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªè½¬è´¦çš„æ“ä½œï¼Œåœ¨ä¸€ä¸ªè´¦æˆ·ä¸ŠåŠ ä¸Šä¸€å®šçš„é‡‘é¢ï¼Œåœ¨å¦ä¸€ä¸ªè´¦æˆ·ä¸Šå‡å»ç›¸åº”çš„é‡‘é¢ã€‚æˆ‘ä»¬éœ€è¦ä¿è¯åŠ é‡‘é¢å’Œå‡é‡‘é¢è¿™ä¸¤ä¸ªæ“ä½œï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ã€‚å¦‚æœä¸€ä¸ªæˆåŠŸï¼Œä¸€ä¸ªå¤±è´¥ï¼Œå°±ä¼šå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ï¼Œä¸€ä¸ªè´¦æˆ·æ˜æ˜å‡æ‰äº†é’±ï¼Œå¦ä¸€ä¸ªè´¦æˆ·å´æ²¡æœ‰æ”¶åˆ° é’±ã€‚
>
> ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ä¾èµ–æ•°æ®åº“äº‹åŠ¡çš„åŸå­æ€§ï¼Œå°†ä¸¤ä¸ªæ“ä½œæ”¾åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­æ‰§è¡Œã€‚ä½†æ˜¯ï¼Œè¿™æ ·çš„åšæ³•ä¸å¤Ÿçµæ´»ï¼Œå› ä¸ºæˆ‘ä»¬çš„æœ‰å¯èƒ½åšäº†åˆ†åº“åˆ†è¡¨ï¼Œæ”¯ä»˜æ¶‰åŠçš„ä¸¤ä¸ªè´¦æˆ·å¯èƒ½å­˜å‚¨åœ¨ä¸åŒçš„åº“ä¸­ï¼Œæ— æ³•ç›´æ¥åˆ©ç”¨æ•°æ®åº“æœ¬èº«çš„äº‹åŠ¡ç‰¹æ€§ï¼Œåœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­æ‰§è¡Œä¸¤ä¸ªè´¦æˆ·çš„æ“ä½œã€‚å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€äº›æ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡çš„å¼€æºæ¡†æ¶ï¼Œä½†æ˜¯ï¼Œä¸ºäº†ä¿è¯æ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼Œå®ƒä»¬çš„å®ç°é€»è¾‘ä¸€èˆ¬éƒ½æ¯”è¾ƒå¤æ‚ã€æœ¬èº«çš„æ€§èƒ½ä¹Ÿä¸é«˜ï¼Œä¼šå½±å“ä¸šåŠ¡çš„æ‰§è¡Œæ—¶é—´ã€‚æ‰€ä»¥ï¼Œ
>
> æ›´åŠ æƒè¡¡çš„ä¸€ç§åšæ³•å°±æ˜¯ï¼Œä¸ä¿è¯æ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼Œåªå®ç°æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åˆšåˆšæåˆ°çš„äº¤æ˜“æµæ°´è¦å®ç°çš„éä¸šåŠ¡åŠŸèƒ½ã€‚
>
> å¯¹äºæ”¯ä»˜è¿™æ ·çš„ç±»ä¼¼è½¬è´¦çš„æ“ä½œï¼Œæˆ‘ä»¬åœ¨æ“ä½œä¸¤ä¸ªé’±åŒ…è´¦æˆ·ä½™é¢ä¹‹å‰ï¼Œå…ˆè®°å½•äº¤æ˜“æµæ°´ï¼Œå¹¶ä¸”æ ‡è®°ä¸º"å¾…æ‰§è¡Œ"ï¼Œå½“ä¸¤ä¸ªé’±åŒ…çš„åŠ å‡é‡‘é¢éƒ½å®Œæˆä¹‹åï¼Œæˆ‘ä»¬å†å›è¿‡å¤´æ¥ï¼Œå°†äº¤æ˜“æµæ°´æ ‡è®°ä¸º"æˆåŠŸ"ã€‚åœ¨ç»™ä¸¤ä¸ªé’±åŒ…åŠ å‡é‡‘é¢çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæœ‰ä»»æ„ä¸€ä¸ªæ“ä½œå¤±è´¥ï¼Œæˆ‘ä»¬å°±å°†äº¤æ˜“è®°å½•çš„çŠ¶æ€æ ‡è®°ä¸º"å¤±è´¥"ã€‚æˆ‘ä»¬é€šè¿‡åå°è¡¥æ¼ Jobï¼Œæ‹‰å–çŠ¶æ€ä¸º"å¤±è´¥"æˆ–è€…é•¿æ—¶é—´å¤„ äº"å¾…æ‰§è¡Œ"çŠ¶æ€çš„äº¤æ˜“è®°å½•ï¼Œé‡æ–°æ‰§è¡Œæˆ–è€…äººå·¥ä»‹å…¥å¤„ç†ã€‚
>
> å¦‚æœé€‰æ‹©ç¬¬äºŒç§äº¤æ˜“æµæ°´çš„è®¾è®¡æ€è·¯ï¼Œä½¿ç”¨ä¸¤æ¡äº¤æ˜“æµæ°´æ¥è®°å½•æ”¯ä»˜æ“ä½œï¼Œé‚£è®°å½•ä¸¤æ¡äº¤æ˜“æµæ°´æœ¬èº«åˆå­˜åœ¨æ•°æ®çš„ä¸€è‡´æ€§é—®é¢˜ï¼Œæœ‰å¯èƒ½å…¥è´¦çš„äº¤æ˜“æµæ°´è®°å½•æˆåŠŸï¼Œå‡ºè´¦çš„äº¤æ˜“æµæ°´ä¿¡æ¯è®°å½•å¤±è´¥ã€‚æ‰€ä»¥ï¼Œæƒè¡¡åˆ©å¼Šï¼Œæˆ‘ä»¬é€‰æ‹©ç¬¬ä¸€ç§ç¨å¾®æœ‰äº›å†—ä½™çš„æ•°æ®æ ¼å¼è®¾è®¡æ€è·¯ã€‚

#### ç°åœ¨ï¼Œæˆ‘ä»¬å†æ€è€ƒè¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šå……å€¼ã€æç°ã€æ”¯ä»˜è¿™äº›ä¸šåŠ¡äº¤æ˜“ç±»å‹ï¼Œæ˜¯å¦åº”è¯¥è®©è™šæ‹Ÿé’±åŒ…ç³»ç»Ÿæ„ŸçŸ¥ï¼Ÿæ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬æ˜¯å¦åº”è¯¥åœ¨è™šæ‹Ÿé’±åŒ…ç³»ç»Ÿçš„äº¤æ˜“æµæ°´ä¸­è®°å½•è¿™ä¸‰ç§ç±»å‹ï¼Ÿ

> ç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚è™šæ‹Ÿé’±åŒ…ç³»ç»Ÿä¸åº”è¯¥æ„ŸçŸ¥å…·ä½“çš„ä¸šåŠ¡äº¤æ˜“ç±»å‹ã€‚æˆ‘ä»¬å‰é¢è®²åˆ°ï¼Œè™šæ‹Ÿé’±åŒ…æ”¯æŒçš„æ“ä½œï¼Œä»…ä»…æ˜¯ä½™é¢çš„åŠ åŠ å‡å‡æ“ä½œï¼Œä¸æ¶‰åŠå¤æ‚ä¸šåŠ¡æ¦‚å¿µï¼ŒèŒè´£å•ä¸€ã€åŠŸèƒ½é€šç”¨ã€‚å¦‚æœè€¦åˆå¤ªå¤šä¸šåŠ¡æ¦‚å¿µåˆ°é‡Œé¢ï¼ŒåŠ¿å¿…å½±å“ç³»ç»Ÿçš„é€šç”¨æ€§ï¼Œè€Œä¸”è¿˜ä¼šå¯¼è‡´ç³»ç»Ÿè¶Šåšè¶Šå¤æ‚ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›å°†å……å€¼ã€æ”¯ä»˜ã€æç°è¿™æ ·çš„ä¸šåŠ¡æ¦‚å¿µæ·»åŠ åˆ°è™šæ‹Ÿé’±åŒ…ç³»ç»Ÿä¸­ã€‚

#### ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ä¸åœ¨è™šæ‹Ÿé’±åŒ…ç³»ç»Ÿçš„äº¤æ˜“æµæ°´ä¸­è®°å½•äº¤æ˜“ç±»å‹ï¼Œé‚£åœ¨ç”¨æˆ·æŸ¥è¯¢äº¤æ˜“æµæ°´çš„æ—¶å€™ï¼Œå¦‚ä½•æ˜¾ç¤ºæ¯æ¡äº¤æ˜“æµæ°´çš„äº¤æ˜“ç±»å‹å‘¢ï¼Ÿ

> ä»ç³»ç»Ÿè®¾è®¡çš„è§’åº¦ï¼Œæˆ‘ä»¬ä¸åº”è¯¥åœ¨è™šæ‹Ÿé’±åŒ…ç³»ç»Ÿçš„äº¤æ˜“æµæ°´ä¸­è®°å½•äº¤æ˜“ç±»å‹ã€‚ä»äº§å“éœ€æ±‚çš„è§’åº¦æ¥è¯´ï¼Œæˆ‘ä»¬åˆå¿…é¡»è®°å½•äº¤æ˜“æµæ°´çš„äº¤æ˜“ç±»å‹ã€‚å¬èµ·æ¥æ¯”è¾ƒçŸ›ç›¾ï¼Œè¿™ä¸ªé—®é¢˜è¯¥å¦‚ä½•è§£å†³ å‘¢ï¼Ÿ
>
> æˆ‘ä»¬å¯ä»¥é€šè¿‡è®°å½•ä¸¤æ¡äº¤æ˜“æµæ°´ä¿¡æ¯çš„æ–¹å¼æ¥è§£å†³ã€‚æˆ‘ä»¬å‰é¢è®²åˆ°ï¼Œæ•´ä¸ªé’±åŒ…ç³»ç»Ÿåˆ†ä¸ºä¸¤ä¸ªå­ç³»ç»Ÿï¼Œä¸Šå±‚é’±åŒ…ç³»ç»Ÿçš„å®ç°ï¼Œä¾èµ–åº•å±‚è™šæ‹Ÿé’±åŒ…ç³»ç»Ÿå’Œä¸‰æ–¹æ”¯ä»˜ç³»ç»Ÿã€‚å¯¹äºé’±åŒ…ç³»ç»Ÿæ¥ è¯´ï¼Œå®ƒå¯ä»¥æ„ŸçŸ¥å……å€¼ã€æ”¯ä»˜ã€æç°ç­‰ä¸šåŠ¡æ¦‚å¿µï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨é’±åŒ…ç³»ç»Ÿè¿™ä¸€å±‚é¢å¤–å†è®°å½•ä¸€æ¡åŒ…å«äº¤æ˜“ç±»å‹çš„äº¤æ˜“æµæ°´ä¿¡æ¯ï¼Œè€Œåœ¨åº•å±‚çš„è™šæ‹Ÿé’±åŒ…ç³»ç»Ÿä¸­è®°å½•ä¸åŒ…å«äº¤æ˜“ç±»å‹çš„äº¤æ˜“æµæ°´ä¿¡æ¯ã€‚
>
> ä¸ºäº†è®©ä½ æ›´å¥½åœ°ç†è§£åˆšåˆšçš„è®¾è®¡æ€è·¯ï¼Œæˆ‘ç”»äº†ä¸€å¼ å›¾ï¼Œä½ å¯ä»¥å¯¹æ¯”ç€æˆ‘çš„è®²è§£ä¸€å—å„¿æ¥çœ‹ã€‚

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image313.png){width="7.236148293963255in" height="2.2985411198600176in"}

> æˆ‘ä»¬é€šè¿‡æŸ¥è¯¢ä¸Šå±‚é’±åŒ…ç³»ç»Ÿçš„äº¤æ˜“æµæ°´ä¿¡æ¯ï¼Œå»æ»¡è¶³ç”¨æˆ·æŸ¥è¯¢äº¤æ˜“æµæ°´çš„åŠŸèƒ½éœ€æ±‚ï¼Œè€Œè™šæ‹Ÿé’±åŒ…ä¸­çš„äº¤æ˜“æµæ°´å°±åªæ˜¯ç”¨æ¥è§£å†³æ•°æ®ä¸€è‡´æ€§é—®é¢˜ã€‚å®é™…ä¸Šï¼Œå®ƒçš„ä½œç”¨è¿˜æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ç”¨æ¥å¯¹è´¦ç­‰ã€‚é™äºç¯‡å¹…ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ä¸å±•å¼€è®²äº†ã€‚
>
> æ•´ä¸ªè™šæ‹Ÿé’±åŒ…çš„è®¾è®¡æ€è·¯åˆ°æ­¤è®²å®Œäº†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼Œå¦‚ä½•åˆ†åˆ«ç”¨åŸºäºè´«è¡€æ¨¡å‹çš„ä¼ ç»Ÿå¼€å‘æ¨¡å¼å’ŒåŸºäºå……è¡€æ¨¡å‹çš„ DDD å¼€å‘æ¨¡å¼ï¼Œæ¥å®ç°è¿™æ ·ä¸€ä¸ªè™šæ‹Ÿé’±åŒ…ç³»ç»Ÿï¼Ÿ

## åŸºäºè´«è¡€æ¨¡å‹çš„ä¼ ç»Ÿå¼€å‘æ¨¡å¼

> å®é™…ä¸Šï¼Œå¦‚æœä½ æœ‰ä¸€å®š Web é¡¹ç›®çš„å¼€å‘ç»éªŒï¼Œå¹¶ä¸”å¬æ˜ç™½äº†æˆ‘åˆšåˆšè®²çš„è®¾è®¡æ€è·¯ï¼Œé‚£å¯¹ä½ æ¥è¯´ï¼Œåˆ©ç”¨åŸºäºè´«è¡€æ¨¡å‹çš„ä¼ ç»Ÿå¼€å‘æ¨¡å¼æ¥å®ç°è¿™æ ·ä¸€ä¸ªç³»ç»Ÿï¼Œåº”è¯¥æ˜¯ä¸€ä»¶æŒºç®€å•çš„äº‹æƒ…ã€‚ä¸è¿‡ï¼Œä¸ºäº†å¯¹æ¯”ä¸¤ç§å¼€å‘æ¨¡å¼ï¼Œæˆ‘è¿˜æ˜¯å¸¦ä½ ä¸€å—å„¿æ¥å®ç°ä¸€éã€‚
>
> è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ Web åç«¯é¡¹ç›®çš„ä¸‰å±‚ç»“æ„ã€‚å…¶ä¸­ï¼ŒController å’Œ VO è´Ÿè´£æš´éœ²æ¥å£ï¼Œå…·ä½“çš„ä»£ç å®ç°å¦‚ä¸‹æ‰€ç¤ºã€‚æ³¨æ„ï¼ŒController ä¸­ï¼Œæ¥å£å®ç°æ¯”è¾ƒç®€å•ï¼Œä¸»è¦å°±æ˜¯è°ƒç”¨ Service çš„æ–¹æ³•ï¼Œæ‰€ä»¥ï¼Œæˆ‘çœç•¥äº†å…·ä½“çš„ä»£ç å®ç°ã€‚
>
> Service å’Œ BO è´Ÿè´£æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ŒRepository å’Œ Entity è´Ÿè´£æ•°æ®å­˜å–ã€‚Repository è¿™ä¸€å±‚çš„ä»£ç å®ç°æ¯”è¾ƒç®€å•ï¼Œä¸æ˜¯æˆ‘ä»¬è®²è§£çš„é‡ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿçœç•¥æ‰äº†ã€‚Service å±‚çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚æ³¨æ„ï¼Œè¿™é‡Œæˆ‘çœç•¥äº†ä¸€äº›ä¸é‡è¦çš„æ ¡éªŒä»£ç ï¼Œæ¯”å¦‚ï¼Œå¯¹ amount æ˜¯å¦å°äº 0ã€é’±åŒ…æ˜¯å¦å­˜åœ¨çš„æ ¡éªŒç­‰ç­‰ã€‚

1.  public class VirtualWalletBo {// çœç•¥ getter/setter/constructor æ–¹æ³•

2.  private Long id;

3.  private Long createTime;

4.  private BigDecimal balance;

> 5 }
>
> 6

7.  public class VirtualWalletService {

8.  // é€šè¿‡æ„é€ å‡½æ•°æˆ–è€… IOC æ¡†æ¶æ³¨å…¥

9.  private VirtualWalletRepository walletRepo;

10.  private VirtualWalletTransactionRepository transactionRepo;

> 11
>
> 12 public VirtualWalletBo getVirtualWallet(Long walletId) {
>
> î˜“ å¤åˆ¶ä»£ç 
>
> 13
>
> 14
>
> 15
>
> 16 }
>
> 17
>
> VirtualWalletEntity walletEntity = walletRepo.getWalletEntity(walletId); VirtualWalletBo walletBo = convert(walletEntity);
>
> return walletBo;

18. public BigDecimal getBalance(Long walletId) {

19. return virtualWalletRepo.getBalance(walletId);

> 20 }
>
> 21

22. public void debit(Long walletId, BigDecimal amount) {

23. VirtualWalletEntity walletEntity = walletRepo.getWalletEntity(walletId);

24. BigDecimal balance = walletEntity.getBalance();

25. if (balance.compareTo(amount) \< 0) {

26. throw new NoSufficientBalanceException(\...);

> 27 }
>
> 28 walletRepo.updateBalance(walletId, balance.subtract(amount));
>
> 29 }
>
> 30

31. public void credit(Long walletId, BigDecimal amount) {

32. VirtualWalletEntity walletEntity = walletRepo.getWalletEntity(walletId);

33. BigDecimal balance = walletEntity.getBalance();

34. walletRepo.updateBalance(walletId, balance.add(amount));

> 35 }
>
> 36

37. public void transfer(Long fromWalletId, Long toWalletId, BigDecimal amount)

38. VirtualWalletTransactionEntity transactionEntity = new VirtualWalletTransa

39. transactionEntity.setAmount(amount);

40. transactionEntity.setCreateTime(System.currentTimeMillis());

41. transactionEntity.setFromWalletId(fromWalletId);

42. transactionEntity.setToWalletId(toWalletId);

43. transactionEntity.setStatus(Status.TO_BE_EXECUTED);

> ä»¥ä¸Šä¾¿æ˜¯åˆ©ç”¨åŸºäºè´«è¡€æ¨¡å‹çš„ä¼ ç»Ÿå¼€å‘æ¨¡å¼æ¥å®ç°çš„è™šæ‹Ÿé’±åŒ…ç³»ç»Ÿã€‚å°½ç®¡æˆ‘ä»¬å¯¹ä»£ç ç¨å¾®åšäº†ç®€åŒ–ï¼Œä½†æ•´ä½“çš„ä¸šåŠ¡é€»è¾‘å°±æ˜¯ä¸Šé¢è¿™æ ·å­ã€‚å…¶ä¸­å¤§éƒ¨åˆ†ä»£ç é€»è¾‘éƒ½éå¸¸ç®€å•ï¼Œæœ€å¤æ‚çš„æ˜¯ Service ä¸­çš„ transfer() è½¬è´¦å‡½æ•°ã€‚æˆ‘ä»¬ä¸ºäº†ä¿è¯è½¬è´¦æ“ä½œçš„æ•°æ®ä¸€è‡´æ€§ï¼Œæ·»åŠ äº†ä¸€äº›è·Ÿ transaction ç›¸å…³çš„è®°å½•å’ŒçŠ¶æ€æ›´æ–°çš„ä»£ç ï¼Œç†è§£èµ·æ¥ç¨å¾®æœ‰ç‚¹éš¾åº¦ï¼Œä½ å¯ä»¥å¯¹ç…§ç€ä¹‹å‰è®²çš„è®¾è®¡æ€è·¯ï¼Œè‡ªå·±å¤šæ€è€ƒä¸€ä¸‹ã€‚

## åŸºäºå……è¡€æ¨¡å‹çš„ DDD å¼€å‘æ¨¡å¼

> åˆšåˆšè®²äº†å¦‚ä½•åˆ©ç”¨åŸºäºè´«è¡€æ¨¡å‹çš„ä¼ ç»Ÿå¼€å‘æ¨¡å¼æ¥å®ç°è™šæ‹Ÿé’±åŒ…ç³»ç»Ÿï¼Œç°åœ¨ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹ï¼Œå¦‚ä½•åˆ©ç”¨åŸºäºå……è¡€æ¨¡å‹çš„ DDD å¼€å‘æ¨¡å¼æ¥å®ç°è¿™ä¸ªç³»ç»Ÿï¼Ÿ
>
> åœ¨ä¸Šä¸€èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬è®²åˆ°ï¼ŒåŸºäºå……è¡€æ¨¡å‹çš„ DDD å¼€å‘æ¨¡å¼ï¼Œè·ŸåŸºäºè´«è¡€æ¨¡å‹çš„ä¼ ç»Ÿå¼€å‘æ¨¡å¼çš„ä¸»è¦åŒºåˆ«å°±åœ¨ Service å±‚ï¼ŒController å±‚å’Œ Repository å±‚çš„ä»£ç åŸºæœ¬ä¸Šç›¸åŒã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬é‡ç‚¹çœ‹ä¸€ä¸‹ï¼ŒService å±‚æŒ‰ç…§åŸºäºå……è¡€æ¨¡å‹çš„ DDD å¼€å‘æ¨¡å¼è¯¥å¦‚ä½•æ¥å®ç°ã€‚
>
> åœ¨è¿™ç§å¼€å‘æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬æŠŠè™šæ‹Ÿé’±åŒ… VirtualWallet ç±»è®¾è®¡æˆä¸€ä¸ªå……è¡€çš„ Domain é¢†åŸŸæ¨¡å‹ï¼Œå¹¶ä¸”å°†åŸæ¥åœ¨ Service ç±»ä¸­çš„éƒ¨åˆ†ä¸šåŠ¡é€»è¾‘ç§»åŠ¨åˆ° VirtualWallet ç±»ä¸­ï¼Œè®© Service ç±»çš„å®ç°ä¾èµ– VirtualWallet ç±»ã€‚å…·ä½“çš„ä»£ç å®ç°å¦‚ä¸‹æ‰€ç¤ºï¼š
>
> 7 this.id = preAllocatedId;
>
> 8 }
>
> 9
>
> 10
>
> 11
>
> 12
>
> 13
>
> 14
>
> 15
>
> 16
>
> 17
>
> 18
>
> 19
>
> 20
>
> 21
>
> 22
>
> 23
>
> 24
>
> 25
>
> 26
>
> 27 }
>
> 28
>
> public BigDecimal balance() { return this.balance;
>
> }
>
> public void debit(BigDecimal amount) {
>
> if (this.balance.compareTo(amount) \< 0) { throw new InsufficientBalanceException(\...);
>
> }
>
> this.balance.subtract(amount);
>
> }
>
> public void credit(BigDecimal amount) {
>
> if (amount.compareTo(BigDecimal.ZERO) \< 0) { throw new InvalidAmountException(\...);
>
> }
>
> this.balance.add(amount);
>
> }

29. public class VirtualWalletService {

30. // é€šè¿‡æ„é€ å‡½æ•°æˆ–è€… IOC æ¡†æ¶æ³¨å…¥

31. private VirtualWalletRepository walletRepo;

32. private VirtualWalletTransactionRepository transactionRepo;

> 33

34. public VirtualWallet getVirtualWallet(Long walletId) {

35. VirtualWalletEntity walletEntity = walletRepo.getWalletEntity(walletId);

36. VirtualWallet wallet = convert(walletEntity);

37. return wallet;

> 38 }
>
> 39

40. public BigDecimal getBalance(Long walletId) {

41. return virtualWalletRepo.getBalance(walletId);

> 42 }
>
> 43

44. public void debit(Long walletId, BigDecimal amount) {

45. VirtualWalletEntity walletEntity = walletRepo.getWalletEntity(walletId);

46. VirtualWallet wallet = convert(walletEntity);

47. wallet.debit(amount);

48. walletRepo.updateBalance(walletId, wallet.balance());

> 49 }
>
> 50

51. public void credit(Long walletId, BigDecimal amount) {

52. VirtualWalletEntity walletEntity = walletRepo.getWalletEntity(walletId);

53. VirtualWallet wallet = convert(walletEntity);

54. wallet.credit(amount);

55. walletRepo.updateBalance(walletId, wallet.balance());

> 56 }
>
> 57
>
> 58 public void transfer(Long fromWalletId, Long toWalletId, BigDecimal amount)
>
> çœ‹äº†ä¸Šé¢çš„ä»£ç ï¼Œä½ å¯èƒ½ä¼šè¯´ï¼Œé¢†åŸŸæ¨¡å‹ VirtualWallet ç±»å¾ˆå•è–„ï¼ŒåŒ…å«çš„ä¸šåŠ¡é€»è¾‘å¾ˆç®€ å•ã€‚ç›¸å¯¹äºåŸæ¥çš„è´«è¡€æ¨¡å‹çš„è®¾è®¡æ€è·¯ï¼Œè¿™ç§å……è¡€æ¨¡å‹çš„è®¾è®¡æ€è·¯ï¼Œè²Œä¼¼å¹¶æ²¡æœ‰å¤ªå¤§ä¼˜åŠ¿ã€‚ä½ è¯´å¾—æ²¡é”™ï¼è¿™ä¹Ÿæ˜¯å¤§éƒ¨åˆ†ä¸šåŠ¡ç³»ç»Ÿéƒ½ä½¿ç”¨åŸºäºè´«è¡€æ¨¡å‹å¼€å‘çš„åŸå› ã€‚ä¸è¿‡ï¼Œå¦‚æœè™šæ‹Ÿé’±åŒ…ç³»ç»Ÿéœ€è¦æ”¯æŒæ›´å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼Œé‚£å……è¡€æ¨¡å‹çš„ä¼˜åŠ¿å°±æ˜¾ç°å‡ºæ¥äº†ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬è¦æ”¯æŒé€æ”¯ä¸€å®šé¢åº¦å’Œå†»ç»“éƒ¨åˆ†ä½™é¢çš„åŠŸèƒ½ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬é‡æ–°æ¥çœ‹ä¸€ä¸‹ VirtualWallet ç±»çš„å®ç°ä»£ç ã€‚

+------+-----+-------------------------------------------------+
| > 36 |     | > }                                             |
+======+=====+=================================================+
| > 37 |     | > this.balance.subtract(amount);                |
+------+-----+-------------------------------------------------+
| > 38 | > } |                                                 |
+------+-----+-------------------------------------------------+
| > 39 |     |                                                 |
+------+-----+-------------------------------------------------+
| > 40 |     | > public void credit(BigDecimal amount) {       |
+------+-----+-------------------------------------------------+
| > 41 |     | > if (amount.compareTo(BigDecimal.ZERO) \< 0) { |
+------+-----+-------------------------------------------------+
| > 42 |     | > throw new InvalidAmountException(\...);       |
+------+-----+-------------------------------------------------+
| > 43 |     | > }                                             |
+------+-----+-------------------------------------------------+
| > 44 |     | > this.balance.add(amount);                     |
+------+-----+-------------------------------------------------+
| > 45 |     | > }                                             |
+------+-----+-------------------------------------------------+
| > 46 | > } |                                                 |
+------+-----+-------------------------------------------------+

> é¢†åŸŸæ¨¡å‹ VirtualWallet ç±»æ·»åŠ äº†ç®€å•çš„å†»ç»“å’Œé€æ”¯é€»è¾‘ä¹‹åï¼ŒåŠŸèƒ½çœ‹èµ·æ¥å°±ä¸°å¯Œäº†å¾ˆå¤šï¼Œä»£ç ä¹Ÿæ²¡é‚£ä¹ˆå•è–„äº†ã€‚å¦‚æœåŠŸèƒ½ç»§ç»­æ¼”è¿›ï¼Œæˆ‘ä»¬å¯ä»¥å¢åŠ æ›´åŠ ç»†åŒ–çš„å†»ç»“ç­–ç•¥ã€é€æ”¯ç­–ç•¥ã€æ”¯æŒé’±åŒ…è´¦å·ï¼ˆVirtualWallet id å­—æ®µï¼‰è‡ªåŠ¨ç”Ÿæˆçš„é€»è¾‘ï¼ˆä¸æ˜¯é€šè¿‡æ„é€ å‡½æ•°ç»å¤–éƒ¨ä¼ å…¥ IDï¼Œè€Œæ˜¯é€šè¿‡åˆ†å¸ƒå¼ ID ç”Ÿæˆç®—æ³•æ¥è‡ªåŠ¨ç”Ÿæˆ IDï¼‰ç­‰ç­‰ã€‚VirtualWallet ç±»çš„ä¸šåŠ¡é€»è¾‘ä¼šå˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œä¹Ÿå°±å¾ˆå€¼å¾—è®¾è®¡æˆå……è¡€æ¨¡å‹äº†ã€‚

## è¾©è¯æ€è€ƒä¸çµæ´»åº”ç”¨

> å¯¹äºè™šæ‹Ÿé’±åŒ…ç³»ç»Ÿçš„è®¾è®¡ä¸ä¸¤ç§å¼€å‘æ¨¡å¼çš„ä»£ç å®ç°ï¼Œæˆ‘æƒ³ä½ åº”è¯¥æœ‰ä¸ªæ¯”è¾ƒæ¸…æ™°çš„äº†è§£äº†ã€‚ä¸è¿‡ï¼Œæˆ‘è§‰å¾—è¿˜æœ‰ä¸¤ä¸ªé—®é¢˜å€¼å¾—è®¨è®ºä¸€ä¸‹ã€‚

#### ç¬¬ä¸€ä¸ªè¦è®¨è®ºçš„é—®é¢˜æ˜¯ï¼šåœ¨åŸºäºå……è¡€æ¨¡å‹çš„ DDD å¼€å‘æ¨¡å¼ä¸­ï¼Œå°†ä¸šåŠ¡é€»è¾‘ç§»åŠ¨åˆ° Domain ä¸­ï¼ŒService ç±»å˜å¾—å¾ˆè–„ï¼Œä½†åœ¨æˆ‘ä»¬çš„ä»£ç è®¾è®¡ä¸å®ç°ä¸­ï¼Œå¹¶æ²¡æœ‰å®Œå…¨å°† Service ç±»å»æ‰ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿæˆ–è€…è¯´ï¼ŒService ç±»åœ¨è¿™ç§æƒ…å†µä¸‹æ‹…å½“çš„èŒè´£æ˜¯ä»€ä¹ˆï¼Ÿå“ªäº›åŠŸèƒ½é€»è¾‘ä¼šæ”¾åˆ° Service ç±»ä¸­ï¼Ÿ

> åŒºåˆ«äº Domain çš„èŒè´£ï¼ŒService ç±»ä¸»è¦æœ‰ä¸‹é¢è¿™æ ·å‡ ä¸ªèŒè´£ã€‚

1.  Service ç±»è´Ÿè´£ä¸ Repository äº¤æµã€‚åœ¨æˆ‘çš„è®¾è®¡ä¸ä»£ç å®ç°ä¸­ï¼ŒVirtualWalletService ç±»è´Ÿè´£ä¸ Repository å±‚æ‰“äº¤é“ï¼Œè°ƒç”¨ Respository ç±»çš„æ–¹æ³•ï¼Œè·å–æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œè½¬åŒ–æˆé¢†åŸŸæ¨¡å‹ VirtualWalletï¼Œç„¶åç”±é¢†åŸŸæ¨¡å‹ VirtualWallet æ¥å®Œæˆä¸šåŠ¡é€»è¾‘ï¼Œæœ€åè°ƒç”¨ Repository ç±»çš„æ–¹æ³•ï¼Œå°†æ•°æ®å­˜å›æ•°æ®åº“ã€‚

> è¿™é‡Œæˆ‘å†ç¨å¾®è§£é‡Šä¸€ä¸‹ï¼Œä¹‹æ‰€ä»¥è®© VirtualWalletService ç±»ä¸ Repository æ‰“äº¤é“ï¼Œè€Œä¸æ˜¯è®©é¢†åŸŸæ¨¡å‹ VirtualWallet ä¸ Repository æ‰“äº¤é“ï¼Œé‚£æ˜¯å› ä¸ºæˆ‘ä»¬æƒ³ä¿æŒé¢†åŸŸæ¨¡å‹çš„ç‹¬ç«‹
>
> æ€§ï¼Œä¸ä¸ä»»ä½•å…¶ä»–å±‚çš„ä»£ç ï¼ˆRepository å±‚çš„ä»£ç ï¼‰æˆ–å¼€å‘æ¡†æ¶ï¼ˆæ¯”å¦‚ Springã€ MyBatisï¼‰è€¦åˆåœ¨ä¸€èµ·ï¼Œå°†æµç¨‹æ€§çš„ä»£ç é€»è¾‘ï¼ˆæ¯”å¦‚ä» DB ä¸­å–æ•°æ®ã€æ˜ å°„æ•°æ®ï¼‰ä¸é¢†åŸŸæ¨¡å‹çš„ä¸šåŠ¡é€»è¾‘è§£è€¦ï¼Œè®©é¢†åŸŸæ¨¡å‹æ›´åŠ å¯å¤ç”¨ã€‚

2.  Service ç±»è´Ÿè´£è·¨é¢†åŸŸæ¨¡å‹çš„ä¸šåŠ¡èšåˆåŠŸèƒ½ã€‚VirtualWalletService ç±»ä¸­çš„ transfer() è½¬è´¦å‡½æ•°ä¼šæ¶‰åŠä¸¤ä¸ªé’±åŒ…çš„æ“ä½œï¼Œå› æ­¤è¿™éƒ¨åˆ†ä¸šåŠ¡é€»è¾‘æ— æ³•æ”¾åˆ° VirtualWallet ç±»ä¸­ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æš‚ä¸”æŠŠè½¬è´¦ä¸šåŠ¡æ”¾åˆ° VirtualWalletService ç±»ä¸­äº†ã€‚å½“ç„¶ï¼Œè™½ç„¶åŠŸèƒ½æ¼”è¿›ï¼Œä½¿å¾—è½¬è´¦ä¸šåŠ¡å˜å¾—å¤æ‚èµ·æ¥ä¹‹åï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†è½¬è´¦ä¸šåŠ¡æŠ½å–å‡ºæ¥ï¼Œè®¾è®¡æˆä¸€ä¸ªç‹¬ç«‹çš„é¢†åŸŸæ¨¡å‹ã€‚

3.  Service ç±»è´Ÿè´£ä¸€äº›éåŠŸèƒ½æ€§åŠä¸ä¸‰æ–¹ç³»ç»Ÿäº¤äº’çš„å·¥ä½œã€‚æ¯”å¦‚å¹‚ç­‰ã€äº‹åŠ¡ã€å‘é‚®ä»¶ã€å‘æ¶ˆæ¯ã€è®°å½•æ—¥å¿—ã€è°ƒç”¨å…¶ä»–ç³»ç»Ÿçš„ RPC æ¥å£ç­‰ï¼Œéƒ½å¯ä»¥æ”¾åˆ° Service ç±»ä¸­ã€‚

#### ç¬¬äºŒä¸ªè¦è®¨è®ºé—®é¢˜æ˜¯ï¼šåœ¨åŸºäºå……è¡€æ¨¡å‹çš„ DDD å¼€å‘æ¨¡å¼ä¸­ï¼Œå°½ç®¡ Service å±‚è¢«æ”¹é€ æˆäº†å……è¡€æ¨¡å‹ï¼Œä½†æ˜¯ Controller å±‚å’Œ Repository å±‚è¿˜æ˜¯è´«è¡€æ¨¡å‹ï¼Œæ˜¯å¦æœ‰å¿…è¦ä¹Ÿè¿›è¡Œå……è¡€é¢†åŸŸå»ºæ¨¡å‘¢ï¼Ÿ

> ç­”æ¡ˆæ˜¯æ²¡æœ‰å¿…è¦ã€‚Controller å±‚ä¸»è¦è´Ÿè´£æ¥å£çš„æš´éœ²ï¼ŒRepository å±‚ä¸»è¦è´Ÿè´£ä¸æ•°æ®åº“æ‰“äº¤é“ï¼Œè¿™ä¸¤å±‚åŒ…å«çš„ä¸šåŠ¡é€»è¾‘å¹¶ä¸å¤šï¼Œå‰é¢æˆ‘ä»¬ä¹Ÿæåˆ°äº†ï¼Œå¦‚æœä¸šåŠ¡é€»è¾‘æ¯”è¾ƒç®€å•ï¼Œå°±æ²¡å¿…è¦åšå……è¡€å»ºæ¨¡ï¼Œå³ä¾¿è®¾è®¡æˆå……è¡€æ¨¡å‹ï¼Œç±»ä¹Ÿéå¸¸å•è–„ï¼Œçœ‹èµ·æ¥ä¹Ÿå¾ˆå¥‡æ€ªã€‚
>
> å°½ç®¡è¿™æ ·çš„è®¾è®¡æ˜¯ä¸€ç§é¢å‘è¿‡ç¨‹çš„ç¼–ç¨‹é£æ ¼ï¼Œä½†æˆ‘ä»¬åªè¦æ§åˆ¶å¥½é¢å‘è¿‡ç¨‹ç¼–ç¨‹é£æ ¼çš„å‰¯ä½œç”¨ï¼Œç…§æ ·å¯ä»¥å¼€å‘å‡ºä¼˜ç§€çš„è½¯ä»¶ã€‚é‚£è¿™é‡Œçš„å‰¯ä½œç”¨æ€ä¹ˆæ§åˆ¶å‘¢ï¼Ÿ
>
> å°±æ‹¿ Repository çš„ Entity æ¥è¯´ï¼Œå³ä¾¿å®ƒè¢«è®¾è®¡æˆè´«è¡€æ¨¡å‹ï¼Œè¿åé¢ç›¸å¯¹è±¡ç¼–ç¨‹çš„å°è£…ç‰¹æ€§ï¼Œæœ‰è¢«ä»»æ„ä»£ç ä¿®æ”¹æ•°æ®çš„é£é™©ï¼Œä½† Entity çš„ç”Ÿå‘½å‘¨æœŸæ˜¯æœ‰é™çš„ã€‚ä¸€èˆ¬æ¥è®²ï¼Œæˆ‘ä»¬æŠŠå®ƒä¼ é€’åˆ° Service å±‚ä¹‹åï¼Œå°±ä¼šè½¬åŒ–æˆ BO æˆ–è€… Domain æ¥ç»§ç»­åé¢çš„ä¸šåŠ¡é€»è¾‘ã€‚Entity çš„ç”Ÿå‘½å‘¨æœŸåˆ°æ­¤å°±ç»“æŸäº†ï¼Œæ‰€ä»¥ä¹Ÿå¹¶ä¸ä¼šè¢«åˆ°å¤„ä»»æ„ä¿®æ”¹ã€‚
>
> æˆ‘ä»¬å†æ¥è¯´è¯´ Controller å±‚çš„ VOã€‚å®é™…ä¸Š VO æ˜¯ä¸€ç§ DTOï¼ˆData Transfer Objectï¼Œæ•°æ®ä¼ è¾“å¯¹è±¡ï¼‰ã€‚å®ƒä¸»è¦æ˜¯ä½œä¸ºæ¥å£çš„æ•°æ®ä¼ è¾“æ‰¿è½½ä½“ï¼Œå°†æ•°æ®å‘é€ç»™å…¶ä»–ç³»ç»Ÿã€‚ä»åŠŸèƒ½ä¸Šæ¥è®²ï¼Œå®ƒç†åº”ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘ã€åªåŒ…å«æ•°æ®ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å°†å®ƒè®¾è®¡æˆè´«è¡€æ¨¡å‹ä¹Ÿæ˜¯æ¯”è¾ƒåˆç† çš„ã€‚

## é‡ç‚¹å›é¡¾

> ä»Šå¤©çš„å†…å®¹åˆ°æ­¤å°±è®²å®Œäº†ã€‚æˆ‘ä»¬ä¸€å—æ¥æ€»ç»“å›é¡¾ä¸€ä¸‹ï¼Œä½ åº”è¯¥é‡ç‚¹æŒæ¡çš„çŸ¥è¯†ç‚¹ã€‚
>
> åŸºäºå……è¡€æ¨¡å‹çš„ DDD å¼€å‘æ¨¡å¼è·ŸåŸºäºè´«è¡€æ¨¡å‹çš„ä¼ ç»Ÿå¼€å‘æ¨¡å¼ç›¸æ¯”ï¼Œä¸»è¦åŒºåˆ«åœ¨ Serviceå±‚ã€‚åœ¨åŸºäºå……è¡€æ¨¡å‹çš„å¼€å‘æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬å°†éƒ¨åˆ†åŸæ¥åœ¨ Service ç±»ä¸­çš„ä¸šåŠ¡é€»è¾‘ç§»åŠ¨åˆ°äº†ä¸€ä¸ªå……è¡€çš„ Domain é¢†åŸŸæ¨¡å‹ä¸­ï¼Œè®© Service ç±»çš„å®ç°ä¾èµ–è¿™ä¸ª Domain ç±»ã€‚
>
> åœ¨åŸºäºå……è¡€æ¨¡å‹çš„ DDD å¼€å‘æ¨¡å¼ä¸‹ï¼ŒService ç±»å¹¶ä¸ä¼šå®Œå…¨ç§»é™¤ï¼Œè€Œæ˜¯è´Ÿè´£ä¸€äº›ä¸é€‚åˆæ”¾åœ¨ Domain ç±»ä¸­çš„åŠŸèƒ½ã€‚æ¯”å¦‚ï¼Œè´Ÿè´£ä¸ Repository å±‚æ‰“äº¤é“ã€è·¨é¢†åŸŸæ¨¡å‹çš„ä¸šåŠ¡èšåˆåŠŸèƒ½ã€å¹‚ç­‰äº‹åŠ¡ç­‰éåŠŸèƒ½æ€§çš„å·¥ä½œã€‚
>
> åŸºäºå……è¡€æ¨¡å‹çš„ DDD å¼€å‘æ¨¡å¼è·ŸåŸºäºè´«è¡€æ¨¡å‹çš„ä¼ ç»Ÿå¼€å‘æ¨¡å¼ç›¸æ¯”ï¼ŒController å±‚å’Œ Repository å±‚çš„ä»£ç åŸºæœ¬ä¸Šç›¸åŒã€‚è¿™æ˜¯å› ä¸ºï¼ŒRepository å±‚çš„ Entity ç”Ÿå‘½å‘¨æœŸæœ‰é™ï¼Œ Controller å±‚çš„ VO åªæ˜¯å•çº¯ä½œä¸ºä¸€ç§ DTOã€‚ä¸¤éƒ¨åˆ†çš„ä¸šåŠ¡é€»è¾‘éƒ½ä¸ä¼šå¤ªå¤æ‚ã€‚ä¸šåŠ¡é€»è¾‘ä¸»è¦é›†ä¸­åœ¨ Service å±‚ã€‚æ‰€ä»¥ï¼ŒRepository å±‚å’Œ Controller å±‚ç»§ç»­æ²¿ç”¨è´«è¡€æ¨¡å‹çš„è®¾è®¡æ€è·¯æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚

## è¯¾å ‚è®¨è®º

> è¿™ä¸¤èŠ‚è¯¾ä¸­å¯¹äº DDD çš„è®²è§£ï¼Œéƒ½æ˜¯æˆ‘çš„ä¸ªäººä¸»è§‚çœ‹æ³•ï¼Œä½ å¯èƒ½ä¼šæœ‰ä¸åŒçœ‹æ³•ã€‚
>
> æ¬¢è¿åœ¨ç•™è¨€åŒºè¯´ä¸€è¯´ä½ å¯¹ DDD çš„çœ‹æ³•ã€‚å¦‚æœè§‰å¾—æœ‰å¸®åŠ©ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚
>
> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image314.png){width="7.048103674540682in" height="4.18739501312336in"}
>
> Â© ç‰ˆæƒå½’æå®¢é‚¦ç§‘æŠ€æ‰€æœ‰ï¼Œæœªç»è®¸å¯ä¸å¾—ä¼ æ’­å”®å–ã€‚ é¡µé¢å·²å¢åŠ é˜²ç›—è¿½è¸ªï¼Œå¦‚æœ‰ä¾µæƒæå®¢é‚¦å°†ä¾æ³•è¿½ç©¶å…¶æ³•å¾‹è´£ä»»ã€‚
>
> ä¸Šä¸€ç¯‡ 11 \| å®æˆ˜ä¸€ï¼ˆä¸Šï¼‰ï¼šä¸šåŠ¡å¼€å‘å¸¸ç”¨çš„åŸºäºè´«è¡€æ¨¡å‹çš„MVCæ¶æ„è¿èƒŒOOPå—ï¼Ÿ
>
> ä¸‹ä¸€ç¯‡ 13 \| å®æˆ˜äºŒï¼ˆä¸Šï¼‰ï¼šå¦‚ä½•å¯¹æ¥å£é‰´æƒè¿™æ ·ä¸€ä¸ªåŠŸèƒ½å¼€å‘åšé¢å‘å¯¹è±¡åˆ†æï¼Ÿ
>
> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image315.png)**ç²¾é€‰ç•™è¨€ (86)**
>
> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image70.png){width="0.36475174978127733in" height="0.36475174978127733in"}**miracle**
>
> 2019-11-29
>
> å»ºè®®å°†å®Œæ•´ä¸€äº›çš„ä»£ç æ”¾åˆ° github ä¸Š ç„¶åæ„Ÿå…´è¶£çš„è¯å¯ä»¥è‡ªè¡Œå»github ä¸Šç ”ç©¶æˆ–è€…æ pr
>
> ä½œè€…å›å¤: å¥½çš„ï¼Œæˆ‘æŠŠå®Œæ•´ä»£ç æŠ½ç©ºæ•´ç†å¥½æ”¾åˆ°githubä¸Š https://github.com/wangzheng0822

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image317.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image318.png)4 23

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image319.png){width="0.36475174978127733in" height="0.36475174978127733in"}**potato00fa**
>
> 2019-11-29
>
> æˆ‘å¯¹DDDçš„çœ‹æ³•å°±æ˜¯ï¼Œå®ƒå¯ä»¥æŠŠåŸæ¥æœ€é‡çš„serviceé€»è¾‘æ‹†åˆ†å¹¶ä¸”è½¬ç§»ä¸€éƒ¨åˆ†é€»è¾‘ï¼Œå¯ä»¥ä½¿å¾—ä»£ç å¯è¯»æ€§ç•¥å¾®æé«˜ï¼Œå¦ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„ç‚¹æ˜¯ä½¿å¾—æ¨¡å‹å……è¡€ä»¥åï¼ŒåŸºäºæ¨¡å‹çš„ä¸šåŠ¡æŠ½è±¡åœ¨ä¸æ–­çš„è¿­ä»£ä¹‹åä¼šè¶Šæ¥è¶Šæ˜ç¡®ï¼Œä¸šåŠ¡çš„ç»†èŠ‚ä¼šè¶Šæ¥è¶Šç²¾å‡†ï¼Œé€šè¿‡é˜…è¯»æ¨¡å‹çš„å……è¡€è¡Œä¸ºä»£
>
> ç ï¼Œèƒ½å¤Ÿæå¿«çš„äº†è§£ç³»ç»Ÿçš„ä¸šåŠ¡ï¼Œå¯¹äºå¼€å‘æ¥è¯´èƒ½è¯´æ˜æ˜¾çš„æå‡å¼€å‘æ•ˆç‡ã€‚
>
> åœ¨ç»´æŠ¤æ€§ä¸Šæ¥è¯´ï¼Œå¦‚æœé¡¹ç›®æ–°è¿›äº†å¼€å‘äººå‘˜ï¼Œå¦‚æœæ˜¯è´«è¡€æ¨¡å‹çš„serviceä»£ç ï¼Œæ— è®ºä»£ç ...
>
> å±•å¼€î˜ƒ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image320.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image321.png)2 13

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image322.png){width="0.36475174978127733in" height="0.36475174978127733in"}**ä¸¿æ·¡å¿˜**
>
> 2019-11-29
>
> è¿™ä¸¤å¤©ä¸€ç›´åœ¨æ€è€ƒdddï¼Œå°±ç­‰è¯¾ç¨‹æ›´æ–°ï¼Œè¿™æ ·ä¸€è¯´å°±ç†è§£äº†ï¼Œdomainæ¨¡å‹ä½¿ç”¨å……è¡€æ¨¡å‹è®¾è®¡ï¼Œä½¿ä¹‹å…·å¤‡ç‹¬ç«‹æ€§ï¼Œè€Œä¸šåŠ¡æ— å…³çš„voï¼Œpoå°±å¯ä»¥ä½¿ç”¨è´«è¡€æ¨¡å‹è¿›è¡Œè®¾è®¡ï¼Œå› ä¸ºä¸æ¶‰åŠå…·ä½“å¤æ‚ä¸šåŠ¡ï¼Œå¦‚æœcontrolå±‚éœ€è¦è°ƒç”¨å¤šä¸ªé¢†åŸŸæ¨¡å‹ï¼Œåˆ™æŠŠç›¸å…³çš„é¢†åŸŸæœåŠ¡ç»„åˆåœ¨ä¸€èµ·ï¼Œè¿™é‡Œæœ‰ä¸ªå°é—®é¢˜ï¼Œå°±æ˜¯doè½¬ä¸ºdtoè¿™ä¸ªè¿‡ç¨‹ï¼Œåº”è¯¥æ˜¯åœ¨åº”ç”¨å±‚å®Œæˆè¿˜æ˜¯é¢†åŸŸå±‚å®Œæˆï¼Œå¦‚æœåœ¨åº”ç”¨å±‚å®Œæˆï¼Œå¥½åƒå±äºæŠŠé¢†åŸŸæ¨¡å‹æš´éœ²å‡ºå»äº†ï¼Œå¸Œæœ›è€å¸ˆå¯ä»¥åœ¨æŒ‡ç‚¹ä¸€ä¸‹
>
> å±•å¼€î˜ƒ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image320.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image321.png)5 13

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image213.png){width="0.36475174978127733in" height="0.36475174978127733in"}**è¾£ä¹ˆå¤§**
>
> 2019-11-29
>
> ç†è§£OOPï¼Œæˆ‘ä»¬å°±ä¸éš¾ç†è§£DDDï¼š DDDç¬¬ä¸€åŸåˆ™ï¼šå°†æ•°æ®å’Œæ“ä½œç»“åˆã€‚ï¼ˆè´«è¡€æ¨¡å‹å°†æ•°æ®å’Œæ“ä½œåˆ†ç¦»ï¼Œè¿åOOPçš„åŸåˆ™ã€‚ï¼‰ DDDç¬¬äºŒåŸåˆ™ï¼šç•Œé™ä¸Šä¸‹æ–‡ã€‚è¿™æ˜¯å°†"å•ä¸€æŒ‡è´£"åº”ç”¨äºæˆ‘ä»¬çš„é¢†åŸŸæ¨¡å‹ã€‚
>
> DDD is nothing more than OOP applied to business models. DDDå…¶å®å°±æ˜¯æŠŠOOP...
>
> å±•å¼€î˜ƒ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image106.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image323.png)9 10

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image324.png){width="0.36475174978127733in" height="0.36475174978127733in"}**Cy23**
>
> 2019-11-29
>
> å¬å®Œä¸€éï¼Œçœ‹æ¥æˆ‘éœ€è¦åœ¨å¬ä¸€éï¼Œphpè§†ä¹è¦ç†è§£JAVAçš„æœ‰ç‚¹å·®å¼‚å•Š

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image106.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image104.png)10 6

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image325.png){width="0.36475174978127733in" height="0.36475174978127733in"}**è½å¶é£é€çš„æ‹**
>
> 2019-11-29
>
> è¿˜æœ‰ä¸€ç‚¹ï¼ŒæœŸå¾…è€å¸ˆå®ç°ä¸€ä¸ªå®Œæ•´çš„æ¡ˆä¾‹çš„ä»£ç ä»¥ä¾›æˆ‘ä»¬å‚è€ƒç¢ç£¨ã€‚
>
> ä½œè€…å›å¤: å®Œæ•´æ¡ˆä¾‹ä»£ç å¯èƒ½å°±å¤ªå¤šäº†

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image326.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image101.png)1 4

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image127.png){width="0.36475174978127733in" height="0.36475174978127733in"}**å¢¨é›¨**
>
> 2019-11-29
>
> çœ‹äº†è€å¸ˆçš„è¿™ç¯‡æ–‡ç« è®©æˆ‘å¯¹ entityï¼Œboï¼Œvoæœ‰äº†ä¸€ä¸ªæ›´æ¸…æ™°çš„è®¤è¯†ã€‚æˆ‘æ˜¯è¿™æ ·ç†è§£çš„ï¼Œen tityæ˜¯å¯¹æ•°æ®åº“çš„æ˜ å°„ï¼Œvo æ˜¯å‰ç«¯å±•ç¤ºçš„æ˜ å°„ï¼Œbo åœ¨ DDD å……è¡€æ¨¡å‹ä¸­æˆ‘çœ‹åˆ°äº†ä»–çš„ç”¨ å¤„ï¼Œçœ‹èµ·æ¥ä»–æ˜¯å°† entity çš„ä¸€äº›é€»è¾‘ä¸šåŠ¡åˆ†ç¦»äº†å‡ºæ¥åšäº†ä¸€ä¸ªè§£è€¦ï¼ˆåœ¨æˆ‘çœ‹æ¥è²Œä¼¼æ²¡æœ‰ b o æˆ–è€…è¯´ Domain ç±»ä¼¼ åŠ ä½™é¢å‡ä½™é¢çš„é€»è¾‘ä¹Ÿå¯ä»¥å†™åœ¨ entity ä¸­ï¼Œåªæ˜¯è¿™æ ·åšå¯¹äºä¸“æ³¨
>
> äºæ•°æ®åº“çš„ entity æ¥è¯´é€»è¾‘æ›´å¤æ‚äº†ï¼Œç»´æŠ¤èµ·æ¥ä¼šå¾ˆå›°éš¾ ï¼‰ï¼ŒåŒæ—¶ä¹Ÿè§£å†³äº† entity æš´éœ²...
>
> å±•å¼€î˜ƒ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image327.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image328.png)4 4

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image329.png){width="0.36475174978127733in" height="0.36475174978127733in"}**é£ä¹‹å°„æ‰‹åº§**
>
> 2019-11-30
>
> ç¬¬2æ­¥æ”¯ä»˜å¤„ç†æµç¨‹æ„Ÿè§‰æœ‰ç‚¹é—®é¢˜:
>
> ä»ç”¨æˆ·çš„è™šæ‹Ÿé’±åŒ…è½¬90åˆ°å•†å®¶è™šæ‹Ÿé’±åŒ…åº”è¯¥å°±å®Œäº†ï¼Œä¸åº”è¯¥å†ä»åº”ç”¨å…¬å…±é“¶è¡Œå¡å†åˆ’é’±åˆ°å•†å®¶é“¶è¡Œå¡ã€‚å¦‚æœè¦å³æ—¶åˆ’è½¬åˆ°å•†å®¶é“¶è¡Œå¡ï¼Œå°±è¦è®°å¾—æŠŠå•†å®¶çš„è™šæ‹Ÿé’±åŒ…å‡å°‘90ã€‚
>
> å¥½åƒæ˜¯è¿™æ ·å§ï¼Ÿ
>
> å±•å¼€î˜ƒ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image330.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image331.png)1 3

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image332.png){width="0.36475174978127733in" height="0.36475174978127733in"}**join**
>
> 2019-11-30
>
> çœ‹åˆ°è¿™é‡Œï¼Œæ„Ÿè§‰æ‰çœŸæ­£ç†è§£å……è¡€æ¨¡å‹çš„ä½œç”¨ï¼š
>
> çœŸæ­£çš„ä¸šåŠ¡é€»è¾‘éƒ½æ”¾åœ¨å……è¡€çš„é¢†åŸŸå¯¹è±¡ä¸­ï¼Œä¸å…·ä½“ä½¿ç”¨ä»€ä¹ˆæ¡†æ¶ï¼ˆæ¯”å¦‚Springï¼ŒMyBati sï¼‰ï¼Œå…·ä½“ä½¿ç”¨ä»€ä¹ˆæ•°æ®åº“æ— å…³ã€‚è¿™æ ·æœ‰åˆ©äºä¿æŠ¤é¢†åŸŸå¯¹è±¡ä¸­çš„æ•°æ®ï¼Œæ¯”å¦‚é’±åŒ…ä¸­çš„ä½™é¢ï¼Œå½“æœ‰å…¥è´¦å’Œå‡ºè´¦æ“ä½œæ—¶ï¼Œä½™é¢åœ¨é¢†åŸŸå¯¹è±¡ä¸­è‡ªåŠ¨æ‰§è¡ŒåŠ å‡æ“ä½œï¼Œè€Œä¸æ˜¯å°†ä½™é¢æš´éœ²åœ¨Ser...å±•å¼€î˜ƒ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image333.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image331.png)2

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image261.png){width="0.36475174978127733in" height="0.36475174978127733in"}**ç¡è§‰**ğŸ’¤
>
> 2019-11-29
>
> åœ¨æˆ‘çœ‹æ¥ï¼ŒRepositoryä¸Domianéƒ½æ˜¯serviceçš„åº•å±‚ã€‚Repositoryå¤æ‚æ•°æ®çš„å­˜å‚¨ï¼ŒDom ianè´Ÿè´£ä¸šåŠ¡é€»è¾‘ï¼Œserviceå°†ä¸¤è€…èåˆã€‚
>
> å±•å¼€î˜ƒ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image109.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image328.png)2

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image334.png){width="0.36475174978127733in" height="0.36475174978127733in"}**è½å¶é£é€çš„æ‹**
>
> 2019-11-29
>
> DDD ä¸­VirtualWalletService convertå“ªé‡Œå®šä¹‰äº†ã€‚
>
> å±•å¼€î˜ƒ
>
> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image335.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image328.png)2
>
> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image336.png){width="0.36475174978127733in" height="0.364747375328084in"}**è€å§œ**
>
> 2019-11-29
>
> æ›´æ–°æµæ°´å‡ºç°å¼‚å¸¸ä¼šå¯¼é’±åŒ…æ“ä½œæˆåŠŸäº†ï¼Œä½†æ˜¯å°±æ˜¯çŠ¶æ€æ˜¯é”™è¯¯çš„ï¼Ÿæ˜¯ä¸æ˜¯åº”è¯¥æŠŠç”Ÿæˆæµæ°´æ”¾åˆ°ä¸€ä¸ªäº‹åŠ¡é‡Œé¢ï¼Œæ›´æ–°é’±åŒ…å’Œæ›´æ–°æµæ°´çŠ¶æ€æ”¾åˆ°å¦å¤–ä¸€ä¸ªäº‹åŠ¡é‡Œé¢ä¼šé¿å…è¿™ä¸ªé—®é¢˜ï¼Ÿ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image337.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image338.png)2

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image339.png){width="0.36475174978127733in" height="0.36475174978127733in"}**Angus**
>
> 2019-11-29
>
> æˆ‘ç†è§£çš„dddåˆ†ä¸ºå››å±‚ï¼Œç”¨æˆ·æ¥å£å±‚ï¼Œåº”ç”¨å±‚ï¼Œé¢†åŸŸå±‚ï¼ŒåŸºç¡€è®¾æ–½å±‚ã€‚é¢†åŸŸæœåŠ¡è¿˜æ˜¯è·ŸåŸºç¡€è®¾æ–½å±‚æ‰“äº¤é“ï¼Œé¢†åŸŸæœåŠ¡ä¸»è¦æ˜¯æä¾›è¿™ä¸ªé¢†åŸŸçš„ä¸šåŠ¡è¡Œä¸ºï¼Œé€šè¿‡åº”ç”¨å±‚èšåˆé¢†åŸŸæœåŠ¡ï¼Œè€Œåº”ç”¨å±‚æ­£æ˜¯å’Œé¢†åŸŸä¸“å®¶å»ºç«‹ç»Ÿä¸€è¯­è¨€çš„ä¸€å±‚ï¼Œ
>
> å±•å¼€î˜ƒ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image337.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image338.png)2

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image141.png){width="0.36475174978127733in" height="0.36475174978127733in"}**Monday**
>
> 2019-12-01
>
> è€å¸ˆï¼Œæœ€åä¸€å¼ è®¾è®¡å›¾ç¥­å‡ºäº†ä¸¤æ¡æµæ°´çº¿ï¼Œæ˜¯åˆ†åˆ«å¯¹åº”æ•°æ®åº“çš„ä¸¤å¼ è¡¨å—ï¼Ÿ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image340.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image341.png)1

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image342.png){width="0.36475174978127733in" height="0.36475174978127733in"}**æ›¾æ³½ä¼Ÿ**
>
> 2019-11-29
>
> åœ¨å¹³æ—¶å¼€å‘çš„æ—¶å€™ï¼Œæˆ‘æ›´å–œæ¬¢å°†serviceåˆ†æˆå¤šå±‚ï¼ˆå¯ä»¥ç†è§£ä¸º2å±‚ï¼‰ï¼Œä¸€å±‚æ˜¯åŸºäºæ•°æ®å±‚çš„ç®€å•å°è£…æ“ä½œdataServiceï¼Œå¦ä¸€å±‚ï¼Œæ˜¯ä¸“é—¨ç”¨æ¥ç»„åˆè°ƒç”¨dataServiceæ–¹æ³•çš„ï¼Œè¿™æ ·æ—¢æœ‰å°è£…åˆæœ‰èƒ½è®©å¼€å‘äººå‘˜æ›´å¥½çš„ç†è§£ï¼Œä¸çŸ¥é“æˆ‘è¿™ç§æ–¹å¼æ˜¯å¦å¯ä»¥ï¼Ÿæœ‰ä»€ä¹ˆéœ€è¦æ”¹è¿›çš„åœ°æ–¹å—ï¼Ÿ
>
> å¦å¤–æ—¶é—´é•¿äº†ï¼Œé¡¹ç›®å¯èƒ½å°±é¢ç›®å…¨éäº†ï¼Œä¸çŸ¥é“è¿™ä¸ªæƒ…å†µï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ...
>
> å±•å¼€î˜ƒ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image340.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image341.png)1

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image343.png){width="0.36475174978127733in" height="0.36475174978127733in"}**sprinty**
>
> 2019-11-29
>
> æ„Ÿè°¢è€å¸ˆçš„åˆ†äº«ï¼Œæ”¶è·å¾ˆå¤šï¼Œä¹Ÿäº§ç”Ÿäº†ä¸¤ä¸ªé—®é¢˜ï¼š
>
> é—®é¢˜1ï¼šEntity è½¬æ¢æˆ Domain çš„ä»£ç åº”è¯¥åœ¨å“ªä¸€å±‚å®ç°ï¼Ÿæ„Ÿè§‰åœ¨ Service å±‚ä¸å¤§åˆé€‚ï¼Œå› ä¸ºå¯èƒ½å¤šä¸ª Service ä¼šä½¿ç”¨åˆ°ã€‚
>
> é—®é¢˜2ï¼šå¦‚æœæ¶‰åŠåˆ°è¡¨å•çš„ä¿å­˜ï¼Œå…¥å‚æ˜¯ä¸€ä¸ªä¿å­˜å…¨é‡æ•°æ®çš„å¯¹è±¡(æ¯”å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·...
>
> å±•å¼€î˜ƒ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image344.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image338.png)1 1

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image345.png){width="0.36475174978127733in" height="0.31264326334208226in"}**grey927**
>
> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image346.png){width="0.2552679352580927in" height="5.210411198600175e-2in"}2019-12-02
>
> å¦‚æœæ˜¯ç®€å•çš„å¢åˆ æ”¹æŸ¥é™„åŠ ä¸€ç‚¹ç‚¹åˆ¤æ–­é€»è¾‘çš„æ“ä½œï¼Œæ˜¯ä¸æ˜¯ä¸å¤ªé€‚åˆç”¨å……è¡€æ¨¡å‹

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image347.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image348.png)

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image349.png){width="0.36475174978127733in" height="0.3647386264216973in"}**DullBird**
>
> 2019-12-02

1.  çœ‹å®Œæ–‡ç« ç†è§£äº†ä¹‹å‰çš„ä¸€ä¸ªç–‘æƒ‘ç‚¹ã€‚ä¹‹å‰ä¸€ç›´ç–‘æƒ‘Domainæ¨¡å‹ï¼Œä¸€å®šè¦è‡ªå·±å»å’Œæ•°æ®åº“æ‰“äº¤é“ï¼Œå¹¶ä¸”åªèƒ½è®¿é—®è‡ªå·±ç®¡ç†çš„æ•°æ®ã€‚

> å­¦ä¹ åˆ°äº†serviceå¯ä»¥æ§åˆ¶æ“ä½œdbã€‚è¿™æ ·è®©Domainæ¨¡å‹æ›´åŠ å¹²å‡€ï¼Œç®€æ´ã€‚

2.  ä¹‹å‰åšOOPè®¾è®¡çš„æ—¶å€™ï¼Œä¼šè¢«ä¸šåŠ¡å¿…é¡»è¦ï¼Œè€Œæ¨¡å‹ä¸åº”è¯¥æœ‰çš„åœºæ™¯æ‰€å›°æ‰°ï¼Œæœ€ååšå‡ºçš„å†³å®šéƒ½æ˜¯æ¨¡å‹åŠ ä¸Šå¥½äº†ï¼Œå†å¤–é¢è°ƒç”¨æ–¹å†å¼„ä¸€éä¸å°±é‡å¤äº†ä¹ˆã€‚å­¦ä¹ äº†ä»Šå¤©çš„çŸ¥è¯†ï¼Œå¾—...å±•å¼€î˜ƒ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image347.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image348.png)

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image350.png){width="0.36475174978127733in" height="0.36475174978127733in"}**çœŸé£é¸Ÿ**
>
> 2019-12-02
>
> è€å¸ˆä½ å¥½ï¼Œçœ‹å®Œè‡ªå·±å®ç°çš„æ—¶å€™æœ‰ä¸ªç–‘é—®ï¼Œæ¯æ¬¡å®ä¾‹åŒ–VirtualWalletæ—¶å€™ä»–çš„balanceéƒ½ä¼šè¢«åˆå§‹åŒ–ä¸º0ï¼Œæˆ‘åˆä¸æƒ³æŠŠbalance setçš„æ–¹æ³•æš´éœ²å‡ºæ¥ï¼Œä½†æ˜¯å¦‚æœDomainä¸è·ŸReposit oryå±‚äº¤äº’çš„è¯ï¼Œå°±æ— æ³•è·å–åˆ°å½“å‰å…¶ä¸­çš„ä½™é¢ã€‚è¯·é—®ä¸‹è€å¸ˆæ˜¯å¦åªèƒ½åœ¨æ„é€ å‡½æ•°ä¸­ä¼ å…¥è¿™ä¸€ç§åŠæ³•ï¼Ÿ
>
> å±•å¼€î˜ƒ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image351.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image352.png)

> ![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image353.png){width="0.36475174978127733in" height="0.3647386264216973in"}**Eden Ma**
>
> 2019-12-02
>
> iOSç«¯æ˜¯å¦å¯ä»¥è¿™æ ·ç†è§£ï¼šMVVMä¸­VMå±‚ç›¸å½“äºDomainï¼Œå°±Vå±‚ä¸­æ§åˆ¶å™¨çš„ä¸šåŠ¡é€»è¾‘æŠ½åˆ°äº†VMä¸­ï¼ŒMå±‚è´Ÿè´£æ•°æ®å’Œæ•°æ®åº“æ“ä½œï¼Œå› ä¸ºMå±‚æ•°æ®æ˜¯å¯¹å¤–æš´éœ²çš„ä¾ç„¶æ˜¯è´«è¡€ã€‚Vå±‚ä¸­çš„Viewç›¸å½“äºæ–‡ä¸­çš„Controllerå¯¹å¤–å±•ç¤ºæ•°æ®ï¼Œåªåšå±•ç¤ºåŠŸèƒ½ï¼Œæ‰€ä»¥å¯ä»¥ç»§ç»­è´«è¡€ï¼ŒVMå’Œ VåŒå‘ç»‘å®šã€‚å› ä¸ºæ²¡æœ‰BOè¿™ç§ï¼Œæ‰€ä»¥æ›´å¤šçš„æ˜¯å¯¹æ§åˆ¶å™¨æ•°æ®å’Œä¸šåŠ¡é€»è¾‘çš„æŠ½ç¦»åˆ°VMã€‚è€ŒM VPä¹ŸMVVMä¹Ÿè›®ç›¸ä¼¼ã€‚æ‰€ä»¥æˆ‘å¯ä»¥ç†è§£MVVMå’ŒMVPç®—æ˜¯è¿ç”¨åˆ°äº†å……è¡€æ¨¡å‹å—ï¼Ÿ
>
> å±•å¼€î˜ƒ

![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image347.png)![](E:/Program/Notes/DesignPattern/è®¾è®¡æ¨¡å¼ä¹‹ç¾/media/image348.png)

![](media/image1.png)