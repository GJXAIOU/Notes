# 第2讲 \| 网络分层的真实含义是什么？

作者: 刘超

完成时间:

总结时间:

![](<https://static001.geekbang.org/resource/image/cb/0c/cb61d303b4ef508b856037e208f0c30c.jpg>)

<audio><source src="https://static001.geekbang.org/resource/audio/e5/05/e539fc94a00a3db0b72acd53bba93f05.mp3" type="audio/mpeg"></audio>

长时间从事计算机网络相关的工作，我发现，计算机网络有一个显著的特点，就是这是一个不仅需要背诵，而且特别需要将原理烂熟于胸的学科。很多问题看起来懂了，但是就怕往细里问，一问就发现你懂得没有那么透彻。

我们上一节列了之后要讲的网络协议。这些协议本来没什么稀奇，每一本教科书都会讲，并且都要求你背下来。因为考试会考，面试会问。可以这么说，毕业了去找工作还答不出这类题目的，那你的笔试基本上也就挂了。

当你听到什么二层设备、三层设备、四层LB和七层LB中层的时候，是否有点一头雾水，不知道这些所谓的层，对应的各种协议具体要做什么“工作”？

## 这四个问题你真的懂了吗？

因为教科书或者老师往往会打一个十分不恰当的比喻：为什么网络要分层呀？因为不同的层次之间有不同的沟通方式，这个叫作协议。例如，一家公司也是分“层次”的，分总经理、经理、组长、员工。总经理之间有他们的沟通方式，经理和经理之间也有沟通方式，同理组长和员工。有没有听过类似的比喻？

那么**第一个问题**来了。请问经理在握手的时候，员工在干什么？很多人听过TCP建立连接的**三次握手协议**，也会把它当知识点背诵。同理问你，TCP在进行三次握手的时候，IP层和MAC层对应都有什么操作呢？

除了上面这个不恰当的比喻，教科书还会列出每个层次所包含的协议，然后开始逐层地去讲这些协议。但是这些协议之间的关系呢？却很少有教科书会讲。

学习第三层的时候会提到，IP协议里面包含**目标地址**和**源地址。**第三层里往往还会学习**路由协议**。路由就像中转站，我们从原始地址A到目标地址D，中间经过两个中转站A->B->C->D，是通过路由转发的。

那么**第二个问题**来了。A知道自己的下一个中转站是B，那从A发出来的包，应该把B的IP地址放在哪里呢？B知道自己的下一个中转站是C，从B发出来的包，应该把C的IP地址放在哪里呢？如果放在IP协议中的目标地址，那包到了中转站，怎么知道最终的目的地址是D呢？

教科书不会通过场景化的例子，将网络包的生命周期讲出来，所以你就会很困惑，不知道这些协议实际的应用场景是什么。

我**再问你一个问题**。你一定经常听说二层设备、三层设备。二层设备处理的通常是MAC层的东西。那我发送一个HTTP的包，是在第七层工作的，那是不是不需要经过二层设备？或者即便经过了，二层设备也不处理呢？或者换一种问法，二层设备处理的包里，有没有HTTP层的内容呢？

<!-- [[[read_end]]] -->

最终，我想问你**一个综合的问题**。从你的电脑，通过SSH登录到公有云主机里面，都需要经历哪些过程？或者说你打开一个电商网站，都需要经历哪些过程？说得越详细越好。

实际情况可能是，很多人回答不上来。尽管对每一层都很熟悉，但是知识点却串不起来。

上面的这些问题，有的在这一节就会有一个解释，有的则会贯穿我们整个课程。好在后面一节中我会举一个贯穿的例子，将很多层的细节讲过后，你很容易就能把这些知识点串起来。

## 网络为什么要分层？

这里我们先探讨第一个问题，网络为什么要分层？因为，是个复杂的程序都要分层。

理解计算机网络中的概念，一个很好的角度是，想象网络包就是一段Buffer，或者一块内存，是有格式的。同时，想象自己是一个处理网络包的程序，而且这个程序可以跑在电脑上，可以跑在服务器上，可以跑在交换机上，也可以跑在路由器上。你想象自己有很多的网口，从某个口拿进一个网络包来，用自己的程序处理一下，再从另一个网口发送出去。

当然网络包的格式很复杂，这个程序也很复杂。**复杂的程序都要分层，这是程序设计的要求。**比如，复杂的电商还会分数据库层、缓存层、Compose层、Controller层和接入层，每一层专注做本层的事情。

## 程序是如何工作的？

我们可以简单地想象“你”这个程序的工作过程。

![](<https://static001.geekbang.org/resource/image/5c/76/5c00f6e610f533d17fb4ad7decacc776.jpg?wh=3226*3472>)

当一个网络包从一个网口经过的时候，你看到了，首先先看看要不要请进来，处理一把。有的网口配置了混杂模式，凡是经过的，全部拿进来。

拿进来以后，就要交给一段程序来处理。于是，你调用**process\_layer2(buffer)**。当然，这是一个假的函数。但是你明白其中的意思，知道肯定是有这么个函数的。那这个函数是干什么的呢？从Buffer中，摘掉二层的头，看一看，应该根据头里面的内容做什么操作。

假设你发现这个包的MAC地址和你的相符，那说明就是发给你的，于是需要调用**process\_layer3(buffer)**。这个时候，Buffer里面往往就没有二层的头了，因为已经在上一个函数的处理过程中拿掉了，或者将开始的偏移量移动了一下。在这个函数里面，摘掉三层的头，看看到底是发送给自己的，还是希望自己转发出去的。

如何判断呢？如果IP地址不是自己的，那就应该转发出去；如果IP地址是自己的，那就是发给自己的。根据IP头里面的标示，拿掉三层的头，进行下一层的处理，到底是调用process\_tcp(buffer)呢，还是调用process\_udp(buffer)呢？

假设这个地址是TCP的，则会调用**process\_tcp(buffer)**。这时候，Buffer里面没有三层的头，就需要查看四层的头，看这是一个发起，还是一个应答，又或者是一个正常的数据包，然后分别由不同的逻辑进行处理。如果是发起或者应答，接下来可能要发送一个回复包；如果是一个正常的数据包，就需要交给上层了。交给谁呢？是不是有process\_http(buffer)函数呢？

没有的，如果你是一个网络包处理程序，你不需要有process\_http(buffer)，而是应该交给应用去处理。交给哪个应用呢？在四层的头里面有端口号，不同的应用监听不同的端口号。如果发现浏览器应用在监听这个端口，那你发给浏览器就行了。至于浏览器怎么处理，和你没有关系。

浏览器自然是解析HTML，显示出页面来。电脑的主人看到页面很开心，就点了鼠标。点击鼠标的动作被浏览器捕获。浏览器知道，又要发起另一个HTTP请求了，于是使用端口号，将请求发给了你。

你应该调用**send\_tcp(buffer)**。不用说，Buffer里面就是HTTP请求的内容。这个函数里面加一个TCP的头，记录下源端口号。浏览器会给你目的端口号，一般为80端口。

然后调用**send\_layer3(buffer)**。Buffer里面已经有了HTTP的头和内容，以及TCP的头。在这个函数里面加一个IP的头，记录下源IP的地址和目标IP的地址。

然后调用**send\_layer2(buffer)**。Buffer里面已经有了HTTP的头和内容、TCP的头，以及IP的头。这个函数里面要加一下MAC的头，记录下源MAC地址，得到的就是本机器的MAC地址和目标的MAC地址。不过，这个还要看当前知道不知道，知道就直接加上；不知道的话，就要通过一定的协议处理过程，找到MAC地址。反正要填一个，不能空着。

万事俱备，只要Buffer里面的内容完整，就可以从网口发出去了，你作为一个程序的任务就算告一段落了。

## 揭秘层与层之间的关系

知道了这个过程之后，我们再来看一下原来困惑的问题。

首先是分层的比喻。**所有不能表示出层层封装含义的比喻，都是不恰当的。**总经理握手，不需要员工在吧，总经理之间谈什么，不需要员工参与吧，但是网络世界不是这样的。正确的应该是，总经理之间沟通的时候，经理将总经理放在自己兜里，然后组长把经理放自己兜里，员工把组长放自己兜里，像套娃娃一样。那员工直接沟通，不带上总经理，就不恰当了。

现实生活中，往往是员工说一句，组长补充两句，然后经理补充两句，最后总经理再补充两句。但是在网络世界，应该是总经理说话，经理补充两句，组长补充两句，员工再补充两句。

那TCP在三次握手的时候，IP层和MAC层在做什么呢？当然是TCP发送每一个消息，都会带着IP层和MAC层了。因为，TCP每发送一个消息，IP层和MAC层的所有机制都要运行一遍。而你只看到TCP三次握手了，其实，IP层和MAC层为此也忙活好久了。

这里要记住一点：**<span class="orange">只要是在网络上跑的包，都是完整的。可以有下层没上层，绝对不可能有上层没下层。</span>

**

所以，**对TCP协议来说，三次握手也好，重试也好，只要想发出去包，就要有IP层和MAC层，不然是发不出去的。**

经常有人会问这样一个问题，我都知道那台机器的IP地址了，直接发给他消息呗，要MAC地址干啥？这里的关键就是，没有MAC地址消息是发不出去的。

所以如果一个HTTP协议的包跑在网络上，它一定是完整的。无论这个包经过哪些设备，它都是完整的。

所谓的二层设备、三层设备，都是这些设备上跑的程序不同而已。一个HTTP协议的包经过一个二层设备，二层设备收进去的是整个网络包。这里面HTTP、TCP、 IP、 MAC都有。什么叫二层设备呀，就是只把MAC头摘下来，看看到底是丢弃、转发，还是自己留着。那什么叫三层设备呢？就是把MAC头摘下来之后，再把IP头摘下来，看看到底是丢弃、转发，还是自己留着。

## 小结

总结一下今天的内容，理解网络协议的工作模式，有两个小窍门：

- 始终想象自己是一个处理网络包的程序：如何拿到网络包，如何根据规则进行处理，如何发出去；
- 始终牢记一个原则：只要是在网络上跑的包，都是完整的。可以有下层没上层，绝对不可能有上层没下层。

<!-- -->

最后，给你留两个思考题吧。

1. 如果你也觉得总经理和员工的比喻不恰当，你有更恰当的比喻吗？
2. 要想学习网络协议，IP这个概念是最最基本的，那你知道如何查看IP地址吗？

<!-- -->

欢迎你留言和我讨论。趣谈网络协议，我们下期见！

## 精选留言(385)

- ![img](https://static001.geekbang.org/account/avatar/00/0f/ac/a1/43d83698.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  云学

  通信协议就像没有天桥的双子楼，要从A座的24层到达B座24层就得先下楼梯再上楼梯，其他协议也是如此，比如4G

  2018-05-21

  **10

  **1124

- ![img](https://static001.geekbang.org/account/avatar/00/0f/61/62/72296b09.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  小雨

  很像发快递的过程（http，应用层)，你向顺丰下单(第一次请求),顺丰接单(应答),你向手机小伙联系(回应应答)，你将消息放进盒子里(开始封装请求，会话层)，快递员封装一层盒子贴上快递单带回网店(传输层），到快递点检查是否区域快件（网络层），将快件交给运输车（链路层），各个快递转运中心（物理层），快件到达收件市转运中心（物理层），转运输车（链路层），到达区域分发（网络层），网点派送（传输层），快递员方面签收（会话层），拆开检查（表示层），收到快递（应用层）。

  2018-05-22

  **6

  **750

- ![img](https://static001.geekbang.org/account/avatar/00/11/eb/1e/cbd63297.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  croco

  很像你去找你女朋友。  你=》穿内衣=》穿衣服=》坐车=》转车到地方=》脱衣服=脱内衣=见女朋友

  编辑回复: ......

  2019-06-13

  **62

  **356

- ![img](https://thirdwx.qlogo.cn/mmopen/vi_32/Sna2Ad816jdviaPJib5RADSNdnhIqlUeVHibbcCLicO8FCzicvviaG5QBicYAXDoNo8U52vXNooibJL2rlNWEMzttia450g/132)

  丹丹

  为啥有了ip还需要mac地址，因为没有mac地址网络包发不出去？这个解释还是很模糊看不懂啊

  2018-05-21

  **52

  **299

- ![img](https://static001.geekbang.org/account/avatar/00/10/0b/d0/e5d26891.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  nil

  mac地址局域网寻址，ip地网络寻址，感觉这个作用对理解也很重要

  2018-05-21

  **5

  **148

- ![img](https://static001.geekbang.org/account/avatar/00/0f/5e/de/4e7ec66d.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  蠢蠢欲动的腹肌

  很多朋友都有疑惑为什么有ip还需要mac地址，其实在老师第一篇文章中已经有了一定的解释，第一篇底下的留言也有不错的说明，个人理解是ip可以保证要发送的包在网络中传输，到达目标服务器所在的局域网的网关，但是到了网关后，ip就没有用了，因为局域网中的ip对应的机器是不确定的，可能今天对应A机器，明天对应B机器。所以在局域网中使用ip寻址是不严谨的，这时就需要mac地址来唯一对应一台机器，这样网络包就可以准确的传输到需要的主机上了。 另想请教老师，在网关之间传输的时候，下一个网关的ip是如何存储的，这是文章中的问题，但是好像没发现答案，谢谢

  作者回复: 这在后面网关一节有回答

  2018-05-23

  **8

  **135

- ![img](https://static001.geekbang.org/account/avatar/00/11/44/35/3b8372c5.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  chinhu ko

  计算机科学领域的任何问题都可以通过增加一个间接的中间层来解决，计算机整个体系从上到下都是按照严格的层次结构设计的。

  作者回复: 赞

  2018-05-26

  **4

  **105

- ![img](https://static001.geekbang.org/account/avatar/00/11/2b/0d/f4e7245a.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  黑桃

  感觉说ip地址会变，mac不变的，都没有好好看文章，包在到达目的地之前是不知道目标mac地址的，包到达目的地之后也是大吼一声谁是ip XXX，那么mac地址不变有毛用？？目前的理解应该是，封装对下层的变化

  作者回复: 对的，理解很正确

  2018-09-20

  **4

  **85

- ![img](https://static001.geekbang.org/account/avatar/00/12/07/14/7b571a24.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  哈哈

  为什么网络要分层？，你竟然说，是个复杂的程序就要分层，，，，，，，那么苹果为什么掉到地上，你的解释就是，是个苹果都掉地上咯，，

  2018-07-21

  **16

  **71

- ![img](https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  return

  我觉得就像古代战报传送一样。将军发命令，秘书写。在找人包装盖章，再找人发送，每过一个关卡都要盖公函。到了皇城 一层一层往上。先看是发给那个部门的，去掉一层直接把内容发到上一级。最终到了皇上手里，他无需知道是经过了哪些驿站关卡。只需要知道是哪个将军发的，发的什么。用中文写的还是英文写的就OK了

  2018-05-21

  **

  **66

- ![img](https://static001.geekbang.org/account/avatar/00/0f/b2/0f/2e778849.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  陈炽伟

  老师你好，        我觉得对于 网络为何要分层？这个问题的解释有点过于牵强，虽说复杂的程序都要分层这点没错，但我觉得这只是它的表现，网络每一层协议负责的工作都是不一样的，也就对应了有不同设备来处理。        比如应用层，一般是由计算机来处理，用于用户可使用的实际程序上；网络层，是网关之间的通讯协议，一般是路由器作处理转发。        倘若说整个网络只有一层，网络上所有节点都处于同一层级，必然会造成混乱，所以最主要原因还是要明确职责。

  作者回复: 对的，这是架构和设计模式的问题

  2018-06-02

  **2

  **54

- ![img](https://static001.geekbang.org/account/avatar/00/0f/f8/ba/14e05601.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  约书亚

  这应该算是解答了上一节课的思考题了，就这么简单。翻回头看上节课留言，很多人一两句话解答了，0赞，很多绕了一大圈也没回答到点上的，高票。极客时间应产品经理应该考虑重新定义点赞功能了，对于不不了解这部分知识的人容易被高票误导。甚至在隔壁看到过高票写的内容和老师讲的正相反的情况，结果一堆赞，说明根本也没人细看 说到process http的例子，确实思考过为什么不能由操作系统或者驱动来实现“部分”（不可能是全部）http协议，让web server开发更简单些

  2018-05-21

  **2

  **36

- ![img](https://static001.geekbang.org/account/avatar/00/0f/ba/01/5ce8ce0b.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Leoorz

  感觉两个问题老师还可以答的更深，不知道是不是篇幅限制: 1.网络为什么要分层； 2.有了ip地址，还要mac地址做什么。 希望老师能够就这两方面给各同学更多的解答

  作者回复: 接下来，会从物理层，二层，三层，一层层讲上去的

  2018-05-21

  **

  **30

- ![img](https://static001.geekbang.org/account/avatar/00/10/12/1a/8a6a8ac0.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  不爱学习的好孩子

  对于我这样的热门者，觉得这篇不冗余，而且写的很好，原因是这是一篇bigpicture，对后续的学习很有指导意义。

  2018-05-21

  **

  **27

- ![img](https://static001.geekbang.org/account/avatar/00/10/30/71/3ef22394.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  桐仲康

  就想我们之前写信一样，ip地址是收信人的地址，mac地址对写信人不可见，就是各个邮政局的地址，信件在各个邮政局间传递，mac地址不断变化，最后到达收信人手中。

  2018-05-23

  **

  **25

- ![img](https://static001.geekbang.org/account/avatar/00/11/54/57/79aeae9f.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  啦啦啦

  为啥我一般都不喜欢比喻，喜欢直接理解原理，通过说明理解原理，是我与众不同吗？还是有不少和我一样的

  2018-09-27

  **5

  **23

- ![img](https://static001.geekbang.org/account/avatar/00/10/c0/95/6f0aad03.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  loveluckystar

  我觉得传输包的过程就是一次快递打包的过程。店家发货，把商品交给快递，快递层层包装，运输给用户。用户拿到以后，并不知道是什么，只知道是给自己的，然后层层拆包装拿到商品

  2018-05-21

  **

  **21

- ![img](https://static001.geekbang.org/account/avatar/00/10/51/11/aa9438a6.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  俊杰

  比喻并不能帮助人们认识事物的本质。事情往往是自己已经认识了本质之后，才想到一个比喻，试图用它向不懂的人解释。比喻的意义往往是一群懂的人之间心领神会的交流方式罢了

  2018-12-16

  **

  **20

- ![img](https://static001.geekbang.org/account/avatar/00/14/38/c9/cb71029f.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  李颖倩🐰

  我感觉有点像出门要穿衣服，一件一件穿完了，就可以出去玩了，玩回来，再一件一件的脱～

  2018-11-26

  **2

  **18

- ![img](https://static001.geekbang.org/account/avatar/00/10/4e/38/3faa8377.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  登高

  实心俄罗斯套娃

  2018-05-21

  **

  **18

- ![img](https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  钱

  分而治之，这种处理问题的方式是人类解决问题的基本方式之一，尤其针对复杂的问题更是首先会想到使用这种方式来处理。 比喻，感觉无天桥的双子楼加送快递结合比较合适，有一座无天桥的双子楼一共五层，从上到下的楼层依次命名为应用层、传输层、网络层、链路层、物理层，从A座的应用层发送一个非常珍贵的东西到B层的时候，必须层层打包，然后到B层后必须层层拆包后往上传递。

  2018-08-05

  **

  **16

- ![img](https://static001.geekbang.org/account/avatar/00/10/56/4e/9291fac0.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  Jay

  这个上下层是不是指的内外层，最内层是http包，最外层是Mac地址？

  作者回复: 是的

  2018-05-23

  **

  **15

- ![img](https://static001.geekbang.org/account/avatar/00/10/e4/45/846f8441.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  MichaelJY

  刚看完，感觉被面试到又gg了…… 我感觉网络层之间的关系可以类比信封发送和接收的过程。邮递员，邮局相当于网络各层。整体下来都是装包和拆包。 查看ip，我一般用ipconfig/ifconfig……，感觉又有坑点，希望通过整个网络协议的学习，达到知而不惑

  2018-05-21

  **

  **15

- ![img](https://static001.geekbang.org/account/avatar/00/12/35/5a/7431e82e.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Michael

  分层有以下优点： 1.各层独立 每一层不需要知道下一层是如何实现的，只需要知道层间的接口和所提供的服务。 2.灵活性好 当任意层发生变化时，只要接口不变，上下层均不受影响。 3.结构上分开 各层可采用最适合的技。 4.易于实现和维护 5.促进标准化 由于每一层及其提供的服务都有明确的定义，所以能够促进标准化。

  作者回复: 赞，分层就像煎饼要分层一样，可以灵活组合。面层：有人要吃绿豆面的，有人要吃紫薯面的，加层：有人要加薄脆，有人要加油条，另加层：有人要加烤肠，有人要加里脊，蛋层：有人加一个蛋，有人加两个蛋，酱层：有人要辣酱，有人要甜面酱，菜层：有人要生菜，有人要鸡毛菜

  2019-05-03

  **2

  **14

- ![img](https://static001.geekbang.org/account/avatar/00/11/78/3f/90a129d6.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  陈毓飞

  \1. IP是三层协议，必须封装在二层协议（比如以太网协议）中，然后二层协议再通过硬件把包发出去，所以需要MAC地址（二层地址）；2. IP，Internet Protocol，网络互联协议，它设计出来是为了互联不同的网络的，他的作用是在不同网络之间做寻址。

  作者回复: 是的

  2018-09-12

  **

  **14

- ![img](https://static001.geekbang.org/account/avatar/00/16/69/81/01c2bde8.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  kid

  有次去面试 被问到： 每层都要加一个‘头部’，可不可以把这个‘头部’放到后面？为什么？ 本来是  MAC头 - IP头 - TCP头 - HTTP头 - HTTP正文 变成     HTTP正文 - HTTP头 - TCP头 - IP头 - MAC头                 因为很都教程上都是把头信息放到‘数组’前面的。 所以我当时回答是可以的 现在想来 其实不是‘数组’而是一层一层的‘包裹’？？

  作者回复: 是的buffer

  2019-03-21

  **3

  **11

- ![img](https://static001.geekbang.org/account/avatar/00/0f/7c/1b/abb7bfe3.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Daniel

  可以类比为方法调用过程中的入栈和出栈

  2018-05-23

  **1

  **11

- ![img](https://static001.geekbang.org/account/avatar/00/17/85/0a/e564e572.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  N_H

  按照作者的讲述，mac层包装ip层的时候，对方的mac层地址还不一定是目标（最终的）mac地址，有可能是相连的一台路由器的mac地址，然后解码之后看ip，发现ip不在这个局域网内，然后再次包装一层mac地址，发给相连（也有可能不是相连，反正就是根据某种规则规定的下一个路由器）路由器。

  作者回复: 是的

  2019-06-27

  **

  **9

- ![img](https://static001.geekbang.org/account/avatar/00/11/1f/66/59e0647a.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  万历十五年

  1.问为什么要分层？就好比问，写程序为什么要写函数一样。要传递的信息是由许多01组合抽象而来的，这样复杂的一堆01被抽象的分层处理，就好比要创建不同函数，每一个函数都是高内聚低耦合的，只专注于自己本层工作；每个函数的功能单一，但把多个函数组合使用，就能实现强大的功能，这样就把一个复杂的问题简单化了。 2. 为什么会有应用层，传输层，网络层（或称为3层），链路层（或称为2层）？链路层下边还有一层，所以叫2层，它的主要目的是处理本网络内链路相关工作，所以叫链路层；网络层处于从下往上的第3层，它主要处理不同网络之间通信的工作，它会跨网通信，所以叫网络层；传输层，它是把从网络层提取出的信息按不同端口分配给不同应用程序，所以叫传输层，可以说凡是到达传输层的数据都是和本机ip地址相关的数据

  2018-10-11

  **

  **9

- ![img](https://static001.geekbang.org/account/avatar/00/0f/8d/93/e7a8bfad.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  acebean

  公网IP地址一般是不会改变的，但是内部IP是会发生改变的，那如何获取到准确的目标主机的mac地址从而将目标mac写在请求中的mac层呢？

  作者回复: 从公网到私网是nat，从私网ip到mac是arp

  2018-09-04

  **

  **9

- ![img](https://static001.geekbang.org/account/avatar/00/0f/d9/db/66d5b3f4.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Leo

  因为ip地址是可以随时变化的，而mac地址是机器厂商给每个网卡配置的，是独一无二的，所以需要通过ip地址找到对应的mac地址再传输。并且这个过程所用的方法是ARP协议，即地址解析协议。通过广播的方式找到对应的mac地址。实际过程很复杂，因为ip地址会改变，所以同一个ip对应的mac地址也会变，需要用到其他技术来缓存，看地址是否失效，失效则需要重新使用arp广播查找mac地址

  2018-05-22

  **1

  **9

- ![img](data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABkAAD/4QN5aHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MCA3OS4xNjA0NTEsIDIwMTcvMDUvMDYtMDE6MDg6MjEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YWE3YmZhMDItMzBhMC00MDg3LTg3MmYtOGMwMjMxNjNhZWRjIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI2MTlEODM3NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI2MTlEODM2NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTYyRTNCMDNBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTYyRTNCMDRBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRm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)

  Geek_5443a0

  合适的例子，送快递吧……拿盒子包起来，分拣，装车，送过去，然后卸货，拆盒子，最后回去送到目标手上

  2018-05-21

  **

  **9

- ![img](https://static001.geekbang.org/account/avatar/00/17/59/fb/1d2f9bec.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  小虎子

  IP是地址，mac是身份证。按地址送快递，接收快递时需要身份证验证身份。是这样吗

  作者回复: 是的

  2019-05-13

  **

  **8

- ![img](https://static001.geekbang.org/account/avatar/00/11/46/74/1d9980a7.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  saxon

  讲的很生动，但是个人觉得这一章节有点冗余了……希望从最难懂的tcp流量控制说起

  作者回复: 您好，当时这门课的的定位是入门课，如果上来就讲tcp，难度有点高，后面tcp会有两节重点讲。其实不同的工作关注点不同，做开发的比较关注tcp，运维的对于底层的感兴趣

  2018-05-21

  **

  **8

- ![img](https://static001.geekbang.org/account/avatar/00/16/8e/2a/5fa6c07b.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  jung

  1、很多人把网络传输类比物流公司取件送快递的过程，其实我个人觉得不是很恰当，网络传输协议最重要的是到了每一层加一个头信息，有一层套一层的意思；而快递公司并没有这样的操作，所以类比不是很合理；个人想了很久也没有想到一个很好的类比； 2、在看本节内容的时候突然想到一个问题，既然发到外网ip的所有信息都要经过网关，那么是不是可以认为相关部门可以在网关上做手脚，任何网上信息它都能截取到；

  作者回复: 第一个，你说的对 第二个，当然啊，你以为你上班看视频，你们公司想知道没法知道？

  2019-04-23

  **2

  **6

- ![img](https://static001.geekbang.org/account/avatar/00/10/39/43/84039ac0.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  S.H.E.R

  为啥有了ip还需要mac地址，因为没有mac地址网络包发不出去？就跟我们现实中写信一样，ip是对方的地址，而mac地址是对方的名字，网络世界里地址是可能重复的，但是 名字是唯一的。例如:在公司里办公，你和大家的ip地址都是内网地址，但是大家发请求用的都是外网地址，这个时候 一个消息来了 怎么能找到具体是那一个同事的电脑呢？mac地址~

  2018-06-10

  **

  **6

- ![img](https://static001.geekbang.org/account/avatar/00/0f/88/b4/72f61627.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  老黑

  对于我这样一个初学者来讲，我认为老师讲的非常好，思路很清晰，重点很明确。看评论有很多同学认为某些问题没有讲清楚，或者某些东西没有涉及，我认为是老师的教学计划的有自己的考虑，本篇只是开端，细节的东西将来肯定会讲到，到时候就清楚了。作为看专栏的我们，get到每一讲的关键点才是最重要的。

  作者回复: 谢谢，是的

  2018-05-29

  **

  **6

- ![img](https://static001.geekbang.org/account/avatar/00/10/61/c1/93031a2a.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Aaaaaaaaaaayou

  想象有这么一个场景，居住在a市的小明想给自己居住在b市的朋友小红写信。 小明写好了，然后把信给自己的妈妈。这里信的内容就是应用层的内容，小明就是应用层。 妈妈拿到信，帮小明把信用信封装好，然后信封上写上，from 小明 to 小红，然后把信交给邮递员。这里妈妈是传输层。 邮递员拿到信，查到小红的住址，然后把信放到一个包裹里面，在上面写上 from a to b，然后把信交给物流。这里邮递员是网络层。 物流拿到包裹，把包裹分发到到开往b的火车上。这里物流是数据链路层，火车是数据包内容。

  2018-05-22

  **

  **6

- ![img](https://static001.geekbang.org/account/avatar/00/0f/49/a5/e4c1c2d4.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  小文同学

  人与人之间的对话也有协议一说，普通话就是协议，说话的时候得通过空气传播，大自然的声音物理就是底层设备。假如没有空气，上层的语言交流就不复存在了。

  2018-05-21

  **1

  **6

- ![img](https://static001.geekbang.org/account/avatar/00/11/4c/2e/4c4582ee.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  懒猫

  这一节听的懵懵懂懂的，

  作者回复: 没关系，但是一定要记住这些原则，否则后面会糊涂

  2018-05-21

  **

  **5

- ![img](data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABkAAD/4QN5aHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MCA3OS4xNjA0NTEsIDIwMTcvMDUvMDYtMDE6MDg6MjEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YWE3YmZhMDItMzBhMC00MDg3LTg3MmYtOGMwMjMxNjNhZWRjIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI2MTlEODM3NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI2MTlEODM2NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTYyRTNCMDNBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTYyRTNCMDRBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRm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)

  15652790052

  只要在网络上跑的包，都是完整的，这个解决了我很久的困惑。

  2018-11-06

  **

  **4

- ![img](https://static001.geekbang.org/account/avatar/00/13/3a/b3/97945ef8.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Hansen

  这个上下层的顺序是 应用层永远为最上层 物理层永远为最下层吗？ 

  作者回复: 是的

  2018-10-08

  **

  **4

- ![img](https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  钱

  理解网络协议的工作模式，有两个小窍门： 1:始终想象自己是一个处理网络包的程序：如何拿到网络包，如何根据规则进行处理，如何发出去； 2:始终牢记一个原则：只要是在网络上跑的包，都是完整的。可以有下层没上层，绝对不可能有上层没下层。

  2018-08-05

  **

  **4

- ![img](https://static001.geekbang.org/account/avatar/00/0f/ce/1f/220c6d83.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  深蓝

  二层设备，三层设备定义还是不明白

  2018-06-12

  **

  **4

- ![img](https://static001.geekbang.org/account/avatar/00/0f/c2/1f/343f2dec.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  9527

  老师您好，有几个问题不太明白 1.按理说下层的协议不需要知道上层的协议，那ip层转给上层的时候应该不是if判断而且一个回调函数？ 2.假设有很多tcp请求某个服务器A，各请求的端口不同，对于操作系统来说，是有一个统一的入口处理这些请求，然后检查机器上是否有这个端口再做转发处理，在操作系统这个层面他的大致流程是什么样的呢？

  2018-05-21

  **

  **4

- ![img](https://static001.geekbang.org/account/avatar/00/11/50/66/047ee060.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Return12321

  不可能有上层没下层我能理解（因为是完整的），但什么情况下会出现有下层没上层的通信，这点想不明白

  作者回复: 例如你自己写socket编程，其实没有用到现有应用层的协议。当然你可以说你自己定义的包格式就是应用层。我的意思主要针对上次给的层级图

  2018-05-21

  **

  **4

- ![img](https://static001.geekbang.org/account/avatar/00/10/ea/d7/9506fe35.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  pllsxyc

  个人认为分层的真正意义是为了简化、是为了解耦，每一层专注干自己的工作，所有的层配合起来完成网络传输的过程。例如传输层解决进程定位的问题，网络层解决数据包寻路的问题，数据链路层解决局域网传输的问题等

  作者回复: 是的

  2020-06-10

  **

  **3

- ![img](https://static001.geekbang.org/account/avatar/00/10/e4/57/df7e0d1e.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  随缘风

  很多朋友都有疑惑为什么有ip还需要mac地址，其实在老师第一篇文章中已经有了一定的解释，第一篇底下的留言也有不错的说明，个人理解是ip可以保证要发送的包在网络中传输，到达目标服务器所在的局域网的网关，但是到了网关后，ip就没有用了，因为局域网中的ip对应的机器是不确定的，可能今天对应A机器，明天对应B机器。所以在局域网中使用ip寻址是不严谨的，这时就需要mac地址来唯一对应一台机器，这样网络包就可以准确的传输到需要的主机上了

  2018-11-20

  **

  **3

- ![img](https://static001.geekbang.org/account/avatar/00/11/45/49/ec15c943.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  霏哥

  有个问题一直没找到解答，就是子网掩码为/32 或者255.255.255.255 那么对应的ip应该怎么理解

  作者回复: 这种ip常是vip

  2018-05-23

  **

  **3

- ![img](https://static001.geekbang.org/account/avatar/00/0f/95/96/0020bd67.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  夏洛克的救赎

  如何通过实验去理解这些协议的工作细节？

  作者回复: 学习网络实验很重要，但是实验的输出一方面会需要复杂的环境，另一方面大量的实验结果不太适应这种语音的方式。后面会教给大家在一台机器上搭建一个实验环境

  2018-05-21

  **

  **3

- ![img](data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABkAAD/4QN5aHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MCA3OS4xNjA0NTEsIDIwMTcvMDUvMDYtMDE6MDg6MjEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YWE3YmZhMDItMzBhMC00MDg3LTg3MmYtOGMwMjMxNjNhZWRjIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI2MTlEODM3NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI2MTlEODM2NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTYyRTNCMDNBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTYyRTNCMDRBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRm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)

  Geek_65e8ee

  目标mac地址是怎么拿到的呢？二层里有缓存？在没有的时候先用ip通过网关询问到mac？

  2020-09-07

  **

  **2

- ![img](https://static001.geekbang.org/account/avatar/00/16/16/58/0ef55c6a.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Geek-Pax

  为什么网络要分层呢？ 因为涉及到职责和分工问题。现实世界中，做路由器的公司，跟做网卡的公司，和做互联网的公司所需要做的工作不同，大家各司其职，各自工作在各自的层面即可井井有条。 打个比喻，就好像送快递。  ----你在家打包这个快递，装进去的是水果？是衣服？是海鲜？ 需要不同的打包方法，这是应用层协议例如HTTP。 ---你打电话或者网络下单，握手到了一个快递公司的快递小哥。 这是传输层，比如TCP。 ----你把包裹写上了自己的地址，门牌号，要邮寄的地址，门牌号。这是网络层，比如IP。 ----快递小哥骑着三轮车按照你写的地址，门牌号来到你家里取件，然后投递，相当于链路层。 ------------------------------------------------------------------------------------ 快递小哥(TCP)根据地址(IP)，门牌号(MAC) 找到目标地址后，投递快递，收件人收到快递拆开包裹(HTTP)。

  作者回复: 赞

  2019-08-09

  **

  **2

- ![img](https://static001.geekbang.org/account/avatar/00/11/c9/f9/39492855.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  阿阳

  协议是水平的，服务是垂直的。协议表达在同一层之间的规范，服务是底层给上层的接口，用于完成具体的通信行为。

  2019-05-10

  **

  **2

- ![img](https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  Ryoma

  第一题：俄罗斯套娃 第二题：ipconfig / ifconfig

  2019-03-03

  **

  **2

- ![img](https://static001.geekbang.org/account/avatar/00/11/41/c4/add90df3.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  fresh_vito:)

  衔接性和非重点篇幅有点多。重要知识点和内容有点少。建议内容或实践拓展知识点加多。

  作者回复: 您好，这门课当时的定位是入门课，所以前期基础的铺垫会比较多，越往后就越实践，如果一开始就实践，可能很多新人就看不懂了

  2018-05-21

  **

  **2

- ![img](https://static001.geekbang.org/account/avatar/00/21/42/e1/fd96d534.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Joker

  初学者提问：既然数据包发送出去都是通过MAC地址，那么为什么还要存在IP地址？假设不考虑维护所有MAC带来的巨大开销问题。

  2021-01-17

  **

  **1

- ![img](https://static001.geekbang.org/account/avatar/00/16/a0/a3/8da99bb0.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  业余爱好者

  网络协议的目标是连接一切异构的网络与设备。不同的设备规格，与外部信息交换的格式都不一样，如何实现?抽象出一个逻辑概念，然后基于这个逻辑的东西去构造出整个网络。在tcp/ip,中，这个逻辑的概念就是ip,它区别于物理的的mac地址，是逻辑层面的。有了ip地址，整个网络世界的骨架就构造出来了。到了特定的物理设备之间的通信，就交给链路层实现这些细节，ip层只关注逻辑上的通信。tcp/ip是个哑铃状的架构，ip协议处于咽喉部位。 物理流变不已，唯逻辑永存。

  2020-10-14

  **

  **1

- ![img](https://static001.geekbang.org/account/avatar/00/0f/ea/27/a3737d61.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Shanks-王冲

  ifconfig和ipconfig，前者Mac/Linux，后者Windows。

  作者回复: 是的

  2020-06-02

  **

  **1

- ![img](https://static001.geekbang.org/account/avatar/00/10/e6/1c/9d3744ee.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  小李讲源码

  1.我觉得更像是电梯，比如楼是10层的，那么我们到10层就必须经过1-9层。但是我们要到1层，只需要坐一层就可以，不需要经过2-10层。这就是同理，我们处在传输层，那么就必须经过网络层和MAC层。但我们在MAC层就不需要经过网络层和传输层。 2.通过ping域名 例如ping www.baidu.com  其它的方式没用过 3.表白刘超，你太帅了，我突然喜欢上你讲的网络协议了，太有意思了。

  2019-10-15

  **

  **1

- ![img](https://static001.geekbang.org/account/avatar/00/12/48/7b/b80fef17.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  后米米米米

  包发送前，如何确定目标的mac地址？

  作者回复: arp

  2019-05-26

  **2

  **1

- ![img](data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABkAAD/4QN5aHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MCA3OS4xNjA0NTEsIDIwMTcvMDUvMDYtMDE6MDg6MjEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YWE3YmZhMDItMzBhMC00MDg3LTg3MmYtOGMwMjMxNjNhZWRjIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI2MTlEODM3NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI2MTlEODM2NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTYyRTNCMDNBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTYyRTNCMDRBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRm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)

  David

  "始终牢记一个原则：只要是在网络上跑的包，都是完整的。可以有下层没上层，绝对不可能有上层没下层。" 请问老师那些只有下层，而上层不全的包也算完整的？

  作者回复: 上层可以没有。

  2019-04-02

  **

  **1

- ![img](https://static001.geekbang.org/account/avatar/00/0f/93/4a/de82f373.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  AICC

  ifconfig | grep inet

  2019-03-13

  **

  **1

- ![img](https://static001.geekbang.org/account/avatar/00/10/12/9a/062f83c8.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  黑羽

  问题1：写信✉️ 问题2：Linux: ifconfig

  2018-12-11

  **

  **1

- ![img](https://static001.geekbang.org/account/avatar/00/12/bf/ea/1ecb4988.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  郑超杰

  老师我想问一下，一个包从下层传到上层，各层的头部是被删了，还是只是改变了“指针”的位置（这里用指针有点不恰当）

  2018-10-07

  **

  **1

- ![img](https://static001.geekbang.org/account/avatar/00/12/63/50/e71314c7.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  艾克

  用火车必须可能更直观

  2018-08-11

  **

  **1

- ![img](https://static001.geekbang.org/account/avatar/00/0f/4e/59/cdd842b2.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  zhengfc

  我觉的像快递的运输，快递运输也不可能直接端到端的运输，快递运输你先要到网点，然后转到区域中转站，然后到省域的分拨中心，然后分拨中心对开，派发正好相反！

  2018-07-13

  **

  **1

- ![img](https://static001.geekbang.org/account/avatar/00/10/87/1b/064f9f9d.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  极客追赶者

  老师你文章提到，当收到一个消息后，Mac都解析数据了，但是发现IP不是自己的，这种情况一般是路由收到消息吧，那么你提到这里会将消息转发出去，那么转发的时候，是怎么封包的呢

  2018-07-06

  **

  **1

- ![img](https://static001.geekbang.org/account/avatar/00/10/67/3d/4e7aec2f.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  江湖

  ip负责网络中传输找到网关，然后由mac在网关的局对应机器。ip可映射身份证，mac可映射工号（公司工号,学校学号等）

  2018-06-22

  **

  **1

- ![img](https://static001.geekbang.org/account/avatar/00/0f/9f/92/abb7bfe3.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  默

  确实是下层包上层，因为数据从上层传递到下层的时候，需要下一层来包装一下，当然包装了形象的来比喻就是穿衣服，也就是老师说的经理兜里是总经理了。哈哈，可以这样理解吧，老师。

  2018-05-29

  **

  **1

- ![img](https://static001.geekbang.org/account/avatar/00/10/83/ae/c082bb25.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  大星星

  邮局，收发室，接收人，快递员，这些词来理解比较好；网络分层放在兜里不好理解，应该是老板和老板吹牛逼，谈合作，每一句话，都有下面员工的努力，最终不是一个人的结果，是整个公司的产出，这是一个整体

  作者回复: 看来我得表述是有问题的，您已经是第二个问这个问题了。放兜里的比喻让大家一看就不合理，从而为了论证这种比喻是不恰当的。

  2018-05-25

  **

  **1

- ![img](https://static001.geekbang.org/account/avatar/00/10/d7/df/fc0a6709.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  WolvesLeader

  问个问题，我发数据的时候是不是就携带了目标主机的Mac地址呢？如果是，是怎么回去到Mac地址的呢？谢谢

  作者回复: 源mac地址也在包里

  2018-05-25

  **2

  **1

- ![img](https://static001.geekbang.org/account/avatar/00/10/91/b6/c4c08389.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  王强

  重新设计网络协议的话，ip这个概念可以删掉，完全由MAC代替也是可以的，只不过需要考虑转发的效率问题。所以不是不能去掉ip，而是现行方案都是有ip层的，必遵守已有的约定，各环节才能配合工作。

  2018-05-23

  **

  **1

- ![img](https://static001.geekbang.org/account/avatar/00/11/40/30/40690d3b.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  星辰大海

  终于等到你还好我没放弃。终于能听到权威的老师以架构分层的方式讲解网络。我个人对网络分层的理解也是类似的。听您讲解之前，我将网络比喻为七层架构。

  2018-05-21

  **

  **1

- ![img](https://static001.geekbang.org/account/avatar/00/11/41/6b/6c0c0f29.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  lalala

  把包在一端到发送出去这个过程比作流水线咋样

  2018-05-21

  **

  **1

- ![img](https://static001.geekbang.org/account/avatar/00/11/4c/0c/ada45f25.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  憎爱不关心

  就像和人说话一样，意根里有了想说的话->传给舌识->通过自己的舌识通知自己的嘴和舌头，气管，肺，喉咙->嘴和舌根，气管，肺，喉咙行动发出声音->声音传播到那个人的耳根->那个人的耳识辨别出声音->传到意根->意识分别出声音的内容。不过说话的声音添加的数据没那么明显，一般人都会忽略。比如声音是哪个人发出的，这个人自己认识不认识，是不是嘴巴发出的说话声，是不是说给自己听的。同理可参考眼神的对视，手势的交流等。

  2022-08-23

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/27/af/29/3c27174a.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  浪客剑心

  既然能先通过NAT，再通过ARP找到目标MAC地址，那为啥还会出现MAC地址相同，还要比较IP地址的情况呢？既然都已经找到象征唯一身份标识的MAC地址，就说明找到这台机器了，还有IP不等的情况吗？

  2022-05-26

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/f4/88/133bc14b.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  c340

  ip层解析ip头，往下应该要发给tcp还是udp就要解析四层协议头了，那processTcp还是processUdp就应该是在四层处理的，ip层应该调用的是一个统一的函数process_layer4 ？有谁解答下吗

  2022-05-24

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/13/e7/f7/8427bb06.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  ʘᴗʘ小白帽ʘᴗʘ

  一个完整的数据包是： MAC头|TCP头|IP头|HTTP头|HTTP体。 这个理解了，但有个疑惑： 信号是局域性覆盖，也就是每个网卡都能收到一切信号，只不过是能不能接收的问题。对么？ 如果局域网信息量非常大呢？ 每个网卡的cpu都很忙，都要判断每个请求包我能不能接收么？

  2022-04-18

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/13/23/6c/82ba5e1f.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  LIKE

  分层-职场场景类比，简单化3级职场： 1.员工发起某个审批：员工发起申请，员工签字-》基层领导签字-》高管签字 2.需要员工签字确认的公司文件：高管发起-》基层领导签字-》下发到基层，员工签字。

  2022-03-13

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/18/b1/63/68239c70.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Paradise

  “没有的，如果你是一个网络包处理程序，你不需要有 process_http(buffer)，而是应该交给应用去处理。交给哪个应用呢？在四层的头里面有端口号，不同的应用监听不同的端口号。如果发现浏览器应用在监听这个端口，那你发给浏览器就行了。至于浏览器怎么处理，和你没有关系。”  --- 我发现一个问题，这段话，以及上面的图片，我想知道 应用程序处理完成之后是如何返回给客户端的，是否是将左边的路径再走一边的呢？有理解的大佬回复一下么？

  2022-02-23

  **

  **

- ![img](data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABkAAD/4QN5aHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MCA3OS4xNjA0NTEsIDIwMTcvMDUvMDYtMDE6MDg6MjEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YWE3YmZhMDItMzBhMC00MDg3LTg3MmYtOGMwMjMxNjNhZWRjIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI2MTlEODM3NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI2MTlEODM2NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTYyRTNCMDNBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTYyRTNCMDRBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRm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)

  Geek_3ace9c

  就像在一条流水线封装食品罐头一样，先准备瓶子，然后在瓶子里装食物，接着加贴标签和包装袋。送到消费者手上后，先拆包装，吃掉食品，留下瓶子。

  2022-02-04

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/28/d2/c7/b7f52df2.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  雨里

  查看有ip地址有两种方法，ifconfig和ip addr  好像ip addr功能更强大

  2022-01-29

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/29/53/92/21c78176.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  小黄鸭

  老师你好，我想问一下，示例中的send_layer N函数，就是指第N层设备做的事情吗？那这样的话，经过了二层之后，数据包体不是没有了Mac头了，数据包再每一层都并不完整呀？

  2022-01-19

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/18/fe/2d/e23fc6ee.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  深水蓝

  请问一下，偶尔听说的三层交换机两层交换机，是不是指这款交换机可以通过硬件处理到第几层网络协议的意思呢？

  2022-01-19

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/24/13/26/8dfc7011.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  唯唯喏

  我理解的是一个复杂的程序，就必须要分层设计，那样才足够灵活，这也可以作为为什么有了ip地址，为何还要mac地址的一个佐证。现实中，不是每台设备都是需要走到第三层通过ip来交换信息，比如内网中的交换机，实际只走到了第二层。少了mac地址这一层，必然会让网络应用之间的交流变得更加复杂。

  2021-12-13

  **

  **

- ![img](data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABkAAD/4QN5aHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MCA3OS4xNjA0NTEsIDIwMTcvMDUvMDYtMDE6MDg6MjEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YWE3YmZhMDItMzBhMC00MDg3LTg3MmYtOGMwMjMxNjNhZWRjIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI2MTlEODM3NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI2MTlEODM2NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTYyRTNCMDNBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTYyRTNCMDRBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRm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)

  Paul Shan

  网络层次像是一个递归调用，就像计算斐波那契数列，上层代表更高数量级的，例如第100个，下层代表基本的，例如第0个，第1个。第100个必然要用到第1个和第0个，但是反之未必。

  2021-12-05

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/18/1a/94/dd7c4c33.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  章鱼goodest

  总经理谈话，底下的人一层一层的跑腿。

  2021-11-12

  **

  **

- ![img](https://wx.qlogo.cn/mmopen/vi_32/4kZee8j32ZOgdHLwga7BviaQmkfoBEWTbibZkQkNBaNnxFXD6Kbiciawb6kh1UAoia4ceyXwV4vNA6PiaOlMCHuBMJ7A/0)

  许嵩明

  老师，请问浏览器收到请求后会调用dns获取名称对应的IP地址，这个IP地址是怎么传递给网络层完成IP包头中目的IP字段的填写的？如果是放在传输层报文里，那么经过传输层处理后，应用层数据会被打上传输层包头，网络层不会去解开传输层的报文的头部。

  2021-10-31

  **1

  **

- ![img](https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  leslie

  重修的过程中，又提升了自己的理解深度；刘老师的课果然是越学越真正理解。

  2021-10-01

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/27/e0/c5/eb7638ad.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  飞

  比喻成货车/货船/货机/..拉货，没货不发车不好吗？

  2021-09-25

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/29/49/a1/a17b1074.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  彧

  我刚开始接触网络是一本叫做《网络是怎么连接的》， 我对网络传输的印象就像是快递一样， 快递一站一站到达再转发， 最终到达目标地点

  2021-09-15

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/1f/d9/2c/296b02b0.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  烟雨平生

  emm，老师，对于我这样零基础，什么是tcp都不知道的，是不是没救了。。

  2021-09-14

  **

  **

- ![img](http://thirdwx.qlogo.cn/mmopen/vi_32/3s31upu6rw0y5hHkeOlrriafpvGK5P8k0lzDohTyoww7ia4RWY4Z1lNPHBiaxHeTecbqpia0BttZuic9ktnmF5ooCbQ/132)

  rockrobo

  1.如果你也觉得总经理和员工的比喻不恰当，你有更恰当的比喻吗？ 快递包裹 应用层：用户 传输层：快递公司 网络层：运输公司 链路层：汽车站，火车站 物理层：汽车，火车，路

  2021-09-07

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/29/e5/a8/89af8f88.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  吾心自足

  个人理解IP地址就像一个人的姓名，Mac地址就像人的住址，只有IP地址不能保证把数据送到位，因为还需要Mac地址具体定下来接收地点

  2021-08-25

  **

  **

- ![img](https://thirdwx.qlogo.cn/mmopen/vi_32/WP4Ge8ABcINFkccKaNYKibicFnI0JAoojBBAUGrichNeRAgzm5RGbHG7GqYrFX3ELEzenuEbicQHJy2HZ72RxSOuMA/132)

  Geek_842f07

  上下楼梯 windows cmd ipconfig linux ifconfig

  2021-08-12

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/14/55/37/57aeb6af.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  没有軒的筝

  我的理解是：早期没有大量的网络，都是局域网，必须有有一个标识来标注一个计算机，这个就是mac地址，这个时候还没有IP概念，局域网内知道mac地址就可以进行通信，但是经过发展，网络普及越来越广，就出现了网络层的概念，而网络层的发展是基于数据链路层的，也就是需要mac地址，他们两个就是历史的产物，也有人说可以不用要mac地址，我认为也是可以的，但是目前链路层这套框架是标准的，不可替代的，或许以后有更好的网络框架会替代，这就是未知了，所以说MAC和IP完全没有可比性，这是我的理解，有什么问题可以告知

  2021-08-04

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/20/67/43/4ecb3075.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Tony

  如果不知道目标的MAC地址，那“通过一定的协议处理过程，找到 MAC 地址”。这个是什么意思呢？如果要找到，是不是要先做一次通信？

  2021-07-28

  **

  **

- ![img](https://thirdwx.qlogo.cn/mmopen/vi_32/WP4Ge8ABcINFkccKaNYKibicFnI0JAoojBBAUGrichNeRAgzm5RGbHG7GqYrFX3ELEzenuEbicQHJy2HZ72RxSOuMA/132)

  Geek_842f07

  ifconfig命令查看

  2021-07-16

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/27/e4/04/18933a58.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  心如水滴

  如果只有IP地址，没有MAC地址。那么每个设备的标识只能通过分配IP，那么如何能够保证分配的IP地址具有唯一性不冲突呢？

  2021-07-14

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/16/7d/a1/d03c445b.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  熊猫拍板砖

  不清楚MAC作用的，MAC是确定设备的，打个比方吧，你全家都连WiFi，你在家玩手机，要看羞羞的图片，你爸你妈都在玩手机，你一点击请求，返回来的信息只知道是你家发送的请求，但不知道是哪个设备，万一给你爸手机上发过去了呢，咋父慈子孝？一起看？

  2021-07-05

  **

  **

- ![img](data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABkAAD/4QN5aHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MCA3OS4xNjA0NTEsIDIwMTcvMDUvMDYtMDE6MDg6MjEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YWE3YmZhMDItMzBhMC00MDg3LTg3MmYtOGMwMjMxNjNhZWRjIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI2MTlEODM3NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI2MTlEODM2NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTYyRTNCMDNBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTYyRTNCMDRBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRm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)

  Geek_5baa01

  IP 地址不是 ifconfig 吗？然后会有很多IP，比如 aliyun esc 会有内外 ip/外网 ip, 如果安装的 docker 之类会有更多 IP

  2021-06-20

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/53/3c/c86e3052.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  猛仔

  IP地址的端到端，MAC地址是点对点

  2021-06-16

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/28/35/c9/4f9ee9cd.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  红英

  对的，我也觉得楼梯的概念更好一些。数栋有不同层的楼，楼层相同的遵守相同的协议，承载不同的信息。如果信息交互，必须先下楼再上楼。

  2021-06-14

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/28/4d/73/0141be45.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  湛途

  快递:来一个我送一个，来俩我送走一双

  2021-05-28

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/27/e4/18/e435ffae.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  j

  哈哈哈哈 讲的真好

  2021-05-15

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/5f/58/f58ad899.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  大梦一场

  ip寻找是否就像html里面的dom事件触发，一层一层查找，就像树一样~

  2021-05-13

  **

  **

- ![img](https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKe6CKs7cDJW5q6ce077G0uMygPHjDEuEbWdCc5mOEnpeRibAI5SjiafHZnic8qUVMohz9GaUPZHUqicA/132)

  Geek_3e6e01

  复杂的程序都是需要分层的，解释不到位呀

  2021-05-09

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/16/a3/03ac92d0.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Geek_0dc445

  俄罗斯套娃，最小的是内容，以此类推。

  2021-04-28

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/59/0f/dfb310b5.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  西

  客户端第一次发送网络包给目标服务器的时候是怎么知道目标服务器的mac地址的呢？如果不知道目标服务器的mac地址，那么为了确保数据包的完整性，通过网口发送出去的第一个数据包的目标mac地址填写的是什么值呢？后续的数据包的mac地址填写又是什么值呢？

  2021-04-27

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/13/90/9f/5459fd4f.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  serein

  "那什么叫三层设备呢？就是把 MAC 头摘下来之后，再把 IP 头摘下来，看看到底是丢弃、转发，还是自己留着"，三层设备的程序，怎么把 MAC 头摘下来呢？是根据以太帧头的固定长度吗？

  2021-04-26

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/15/ee/ae/855b7e6e.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Gabriel

  为什么需要ip和mac地址呢？ ip和mac在网络世界里都是唯一的，这样再寻找的时候，迟早都能找到对方，就是时间问题。 或是网络传输快慢的问题。

  2021-04-19

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/15/ee/ae/855b7e6e.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Gabriel

  多读，多听之后，果然感想不一样。 网络为什么要分层，这是一个很好的问题？当初看书的时候，就没有问为什么要分层，分层的好处有什么，坏处有什么？ 读到复杂的网络都需要分层，突然明白一些。 我是做后端开发，每个框架都会遵循最基本的MVC，每个层都处理自己负责的业务逻辑和职责。 当然你也可以全部写在一个函数里面，虽然这就是面向对象编程，代码之间的耦合度太高，后期维护起来就很难。 然后将程序，分层处理，那么每个层只需要负责处理的业务逻辑，互补干扰又互相关联。 就想7层模型一样。

  2021-04-19

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/1c/ef/59/6eda594b.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  octopus

  有的时候我们设置IP，多个IP配同一个mac，虽然能使用的IP只能是其中一个。

  2021-04-16

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/b6/26/b67c6209.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  半桶水

  要是ip所对应的机器变了咋办，会不会把包发到错误的机器上

  2021-04-13

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/1d/83/c1/6c40636e.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  ming

  \1. 老式的信件发送方式可以类比，一层层进行分装；2.windows可以直接点击网卡查看，linux可以用ifconfig或者ip addr

  2021-04-09

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/1a/d8/5d/07dfb3b5.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  杯莫停

  这跟寄一个包裹其实是一个流程，应用层是你要寄的东西和邮寄方式；传输层是收包裹的和寄包裹人的姓名（端口），表明谁（拥有这个端口的服务）来拆这个包裹；网络层是收包裹和寄包裹的地址（IP）是用来路由到收件人所在地的地址；数据链路层是写收件人家里的门牌号。想象一下只有上层没下层，你只有一份信，只写了收件人，地址和门牌号都没有，这个包裹能寄出去吗？当然不能。

  2021-03-31

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/19/eb/77/ffd16123.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  重洋

  厉害厉害，两节就把本科没理解的分层讲清楚了

  2021-03-24

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/1e/2c/82/98e2b82a.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Reborn 2.0

  使用货运的包装层级表示网络通信协议的层级更合适一点

  2021-03-18

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/24/dc/3b/436094dc.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  粉红回忆

  思考1.：作为一名在校大学生我认为网络分层还可以比喻为校长、副校长和师生，师生系、员工之间的关系  可以更换师生但校长和副校长在一定时间的任期内是不变的这就是上层与下层之间的关系副校长把校长放的话放心上，学生把老师的话放心上，以此类推层层封装。望指正谢谢。

  2021-02-20

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/17/1b/ab/a5f88914.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  kubxy

  什么叫二层设备呀，就是只把 MAC 头摘下来，看看到底是丢弃、转发，还是自己留着。 这里用词是否有不严谨的地方，这句话显然是接收这个场景，二层在收到数据帧后应该只有丢或留。

  2021-01-23

  **

  **

- ![img](https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqZjLcrj0O1D0EnDmbvROsYjic6cqiciabYMGUzYL3O90egkmgvAVT6WqBUKodCgyAy0hSuibxiaibRI2Ew/132)

  风尘

  有个描述，感觉有点问题。 二层设备，是根据MAC 地址进行转发的设备，并需要摘掉MAC 地址。典型的是二层交换机。保留有MAC 地址跟接口的关系，直接查接口MAC表转发。只有本身具备三层设备功能的时候，发现目的MAC是自己的MAC，才会摘掉二层头部，交给三层处理。 同样三层设备（路由器，三层交换机），发现MAC 地址是自己的，交给上层（三层）处理的时候，才把MAC 地址剥掉。IP 层再去根据IP 地址判断是否给自己，如果不是则并不剥掉IP 头，直接查路由进行转发。如果是给自己的，才会剥掉IP 头，交给传输层处理。

  2021-01-07

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/92/ce/9d24cb2c.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  小学一年级

  网络为什么要分层？  人脑不适合处理复杂的程序，我们的常见做法就是折分，把复杂的问题拆成一个个简单的子问题，通过子问题的解最终得到复杂问题的解，对应程序的设计原则就是拆分并且职责单一，解耦，对应网络就是分层

  2020-12-18

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/1c/f7/62/947004d0.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  www

  类似在餐馆点餐，你最终要吃的是面，吃到面，需要厨师做好面，需要服务员端过来，需要面放在碗里，你最终才能吃到面，抽象来看需要一层一层服务的包装，传递，最终才能解决本质需求，而通过分工协作，提高了整体效率。

  2020-12-10

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/07/0f/4b2dce32.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  夜月

  个人理解：为什么有了IP还要有MAC地址？ 整个数据包里的IP是目标IP，但是MAC地址不一定是目标IP的MAC地址。包在传输过程中保存的MAC地址其实是网关的MAC地址，只有到了目标IP那里通过ARP协议获取到MAC地址，这时保存的才是最终的MAC地址。所以在传输过程中，数据包中的MAC地址其实是在变化的。

  2020-12-01

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/07/0f/4b2dce32.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  夜月

  个人理解：为什么要分层？ 1、执行人员不同。比如应用层是由各个应用来执行的，如浏览器、各种游戏；网络层是由IP来执行的；MAC层是由网关来执行的。 2、明确权责。每个层只负责每个层的东西。这样出问题也能快速定位问题。

  2020-12-01

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/23/24/4e/ca730b17.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  马星

  两个公司在不同的城市，A公司总经理寄快递给B公司总经理，需要A总经理给A部门经理处理，A部门经理再给A员工（毕竟具体的微观事情都是由员工干的），A员工再给快递员，快递员写好地址姓名电话，交给快递车（网线），到达后快递员需要根据地址（哪区哪楼）送达，B员工收到后，看看是寄给哪个部门的，是自己部门，再看看是寄给谁的，如果是其它部门或上级部门就转出去，以此类推！

  2020-11-21

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/da/6a/91bd13de.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  张挺

  1、事业单位领导层层审批文件，由低阶领导高阶领导依次审批，审批完成后，文件再由高阶领导到低阶领导依次下发

  2020-11-19

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/13/41/32/b4e0450c.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  yamy

  我想知道ip层包着MAC层吗

  2020-11-04

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/18/4a/0a/cb9dfa3e.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  海绵

  Ip协议好比快递单上面的省市区，Mac协议好比街道单元房签收人，少了哪个快递小哥都没办法送达

  2020-11-02

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/22/36/1b/9b7d4402.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  吴旦卫Dawn

  有道理

  2020-10-19

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/22/10/e2/35f2fc23.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  吉法师

  我觉得网络协议就像水管，不管从哪里去哪里，都是一层一层必须把闸门打开的，而不是仅仅知道有水要过来就可以了。

  2020-10-17

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/13/b8/24/039f84a2.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  咱是吓大的![img](https://static001.geekbang.org/resource/image/89/43/89yyff4c4c2e2b73ce4931bb01a6a943.png)

  IP就像地址，mac就像单元号和房间号，邮递员根据地址找到你家宿舍楼，楼管阿姨根据单元号和房间号找到你家门口，就是这么形象。

  2020-10-09

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/21/d6/aa/ffa0bd0e.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  SolskGaer

  computer networking: a top-down approach里面的比喻特别合适

  2020-10-01

  **

  **

- ![img](https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIhkl44PZasVElycUTIUUvyhr2Gx3bI4J4U7icDUlYYFVibp3dTvBa6MANIDkrtZUIicXGqXPWoW5icsg/132)

  Autumn

  假设这个地址是 TCP 的，则会调用 process_tcp(buffer)。这时候，Buffer 里面没有三层的头，就需要查看四层的头，看这是一个发起，还是一个应答，又或者是一个正常的数据包，然后分别由不同的逻辑进行处理。如果是发起或者应答，接下来可能要发送一个回复包；如果是一个正常的数据包，就需要交给上层了。 老师，您好，这一段能给展开讲讲吗？看到四层的头，如果是一个发起请求则应答（如果顺利的话，tcp就建链成功）这个工作是os内核做的，这段能大概讲讲os内核用端口号做了什么吗？

  2020-09-27

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/16/6c/a8/1922a0f5.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  郑祖煌

  1.可以用收发快递来比喻收发包。 2. 通过ifconfig

  2020-08-18

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/1a/1e/c5/4e640126.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  momo

  我记得以前看到过一个故事，说一个农民捡到一大块金子，献给皇帝，但由于中间官员贪污，最后给皇帝的是一个鸡蛋，皇帝很高兴，然后赏了金子给农民，最后到农民手上的是一面锦旗？ 有点像这个下三层信息封装的原理……

  2020-08-06

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/1f/32/4a/e7a2678b.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  晓超

  问个问题，网络包是有HTTP的代表这次操作要获取什么，那么对应发送侧是不是也要组建回复的HTTP，里面含有HTML，那么发送测的这些信息是哪里获取的呢

  2020-08-04

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/1d/45/11/51aaa953.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Geek_wadehao

  看能否从历史演化的角度描述一下有了ip为什么还要有mac？以太网发明于1973年，TCP/IP协议成为标准是在1983年。ip被使用是因为它实现了局域网（含当时的以太网，令牌环网等）的互联互通，但ip协议只管局域网之间的事，信息包进入局域网后的通信还得依赖以前的技术（即mac地址）吧？否则ip就管的太多了，就没有覆盖在局域网的异构的第二层协议之上，而是变成了一个新的二层协议。变成新的二层协议的缺点是必然不能兼容所有的二层协议，而只是二层协议之一。比如令牌环网和以太网如何兼容？一个思路是在这些异构的二层协议基础上新建一层（即IP层，第三层），通过新建的第三层实现异构网络的互联互通。这也是为什么令牌环网等旧二层退出历史舞台也不影响ip层（分层的好处），同时也解释了新二层协议（比如4G）出现，也可以被ip层覆盖，用ip地址通信。不当之处，请老师和各位同学指正。

  2020-07-06

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/d8/13/082013bc.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  昵称C

  把mac比做身份证号码，把ip比做现居住地址，身份证号是你的唯一标记，但必须靠现居住地址才能被别人找到你

  2020-07-02

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/1f/39/d8/9727b45c.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Mångata

  思考题1： 收发快递。 发快递，发货人需要把收货人的地址（看成Mac或者IP都OK，不做区分）填写好，然后交给快递小哥，快递小哥扔给所在地区转运中心，转运中心根据地址的某字段对快递进行分拣，发给不同的转运中心，其他转运中心进行类似的操作，经过这样几个转运中心之后，快递到了收货人地址所在地区的转运中心，进而就到了送快递的快递小哥手中，然后送快递的小哥把快递交给收货地址处的那个收货人，完毕。 收快递，收货人等着从快递小哥手中接货就行了。 思考题2： Windows系统使用ipconfig命令查看本机ip地址，Linux系统使用ifconfig命令查看本机地址。

  2020-06-24

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/16/10/30/c07d419c.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  卡尔

  ip是确认给局域网内的哪台机器的吗

  2020-06-18

  **

  **

- ![img](https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep66fdwo3ebSicKjf0iacAx4C2tZOthDDD4bSJqib1iauFBK6EoMSWUBp4UbbN2BQlib7mFR3hQD6MUwew/132)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  chai

  寄信

  作者回复: 赞

  2020-06-10

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/a9/be/203cdc9e.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  连

  网络协议像是套娃，先一层层套，再一层层拆

  作者回复: 对的

  2020-06-05

  **

  **

- ![img](http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epEuxNkyqFG5Gpicu8XALibeicQLOlicL64tKw40J4zTWOvhAJV6CJu2GVzJG0UucIaSKzia5hzxicyKQaQ/132)

  张舒

  要寄的东西就是内容，发件地址信息:房号  /楼栋 /小区 /区域 / 市 /省/国家 就像各层附上的头，收件时层层剥离最后把东西送到收件人手上。

  2020-05-14

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/18/39/d2/845c0e39.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  送过快递的码农

  我觉得用快递员 网点 中转中心比较合适   快递员最底层 没有快递员 啥都干不成  网点相当于网关，他可以把同城件交给另外一个快递员做，如果非同城件交给上一级集散中心

  2020-05-09

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/8c/07/b4ea8f10.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  王丰

  ifconfig ipconfig 查看网卡信息

  2020-05-06

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/13/7c/99/4dac6ce6.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  lakeslove

  只要是在网络上跑的包，都是完整的。可以有下层没上层，绝对不可能有上层没下层。无论这个包经过哪些设备，它都是完整的。赞

  2020-04-28

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/d6/39/6b45878d.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  意无尽

  总结： 二层是 MAC 层，三层是 IP 层，四层是 TCP / UDP 层，最上面是 HTTP 头等内容。 当一个请求到达目标地址后，会先检查 MAC 层，如果是的，再检查 IP 层，然后再检查 TCP/UDP，如果是 TCP 当进行三次握手的时候，都会将 MAC IP 带上。 一个 HTTP 协议的包经过一个二层设备，二层设备收进去的是整个网络包。这里面 HTTP、TCP、 IP、 MAC 都有。 所以，只要是在网络上跑的包，都是完整的。可以有下层没上层，绝对不可能有上层没下层。

  2020-04-26

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/1e/29/86/ef6feb35.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  漫夜

  假如我是只黑猫，【我被劈腿了】（http文本）， 我要去干嘛呢？【打架】（http头）； 用啥姿势打呢？【18脚璇披风大腿】（tcp）；打谁呢？睡了我的老婆的【白猫】（IP）； 它在哪呢？可恶，居然在【我隔壁老婆家】（MAC）。然后我到了【老婆家】（MAC），找到了【白猫】（ip）， 然后使用【18脚璇披风大腿】（tcp）， 开始【打架】， 打完后，我最终不得不接受【我被劈腿了】 ----来自一位刚刚单身的黑猫自述

  2020-04-25

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/13/84/5aeaea9c.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  XXX

  想知道浏览器怎么知道服务器的mac地址？

  2020-04-24

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/1c/b3/28/316341ff.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  大帅

  俄罗斯套娃比喻更好理解网络包

  2020-04-24

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Heaven

  1.我觉得用快递去描述更加方便,可以有小哥,但没包裹,但只有包裹没有小哥,是没办法发送的 2.去使用ipconfig或者ifconfig吧

  2020-04-17

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/16/8b/ec/dc03f5ad.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  张天屹

  老师你好，分层这一块你主要是从MAC层开始讲起的，但是我对物理层其实有所疑惑想要请教下。比如我在成都连家里WIFI，不考虑CDN什么的，假设我要访问百度，他的服务器就在北京，那么是不是我的WIFI被转化为网络信号以后一路是走了上千公里的有线光纤到了北京呢？这中间会有无线传输的时候吗？再比如我访问谷歌的时候，物理层是怎么跨越太平洋到达美国的呢，是通过海底的光缆吗，有没有可能是通过卫星无线传输的呢

  2020-04-17

  **

  **

- ![img](http://thirdwx.qlogo.cn/mmopen/vi_32/4cjgCtJ67wtJweQn9mtzBy8A45kx8UicP8JnYbj09Rol6IjUqTYDrwOCiaBgcxiaAruMnFdW1pW1zw4slgvOVgcbQ/132)

  Geek_16548d

  我觉得可以发快递来举例。比如目标地址浙江省杭州市西湖区xxx，收到快递的人会首先核对浙江省，因为可能也有别的地方叫杭州市（打个比方），如果省份对了，再核对市，市对了的话再核对区内的详细地址，如果都对了，那就说明这个邮件是寄给我的。

  2020-04-16

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/1c/d0/9d/2d6117c3.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  李连生

  用不同层级总经理员工这些听起来确实不太恰当，可以考虑直接用收发快递之类的流程进行比喻，这样比较类似！

  2020-04-12

  **

  **

- ![img](https://thirdwx.qlogo.cn/mmopen/vi_32/wsRmxcKeyV39TNDN2918hJv3jGCDXE0OCicPWfOYsGQKKibRnN9YgS56l9hicKXZTLYFsMzVU38zgNib9dR7OGPuvA/132)

  hl finger

  回头看电商的例子，mac是身份信息，连接先看身份是否对应正确，再看IP地址在哪，找到了地址，利用身体器官(TCP)进行交流信息(也就是浏览器端口与服务器端口的对接)。

  2020-04-10

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/1b/35/d1/12439914.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  树洞老人

  可能理解的不对：mac在ip的下层，我们包发出去之后，有些网络中只有二层交换机，没有网络层。只能通过mac地址来寻址确定，没法用ip地址来路由，这样才能确保包能路由到目标ip所在的局域网。如果老师看到，希望能解惑。

  2020-04-04

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/1d/12/13/e103a6e3.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  扩散性百万咸面包

  “城关与城关之间是一个国家，当网络包知道了下一步去哪个城关，还是要使用国家内部的 MAC 地址，通过下一个城关的 MAC 地址，找到下一个城关，然后再问下一步的路怎么走，一直到走出最后一个城关。” 第一讲说网关之间传输靠MAC，现在又靠ip？真实的情况是怎么样的？有点迷糊了

  2020-03-27

  **

  **

- ![img](data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABkAAD/4QN5aHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MCA3OS4xNjA0NTEsIDIwMTcvMDUvMDYtMDE6MDg6MjEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YWE3YmZhMDItMzBhMC00MDg3LTg3MmYtOGMwMjMxNjNhZWRjIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI2MTlEODM3NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI2MTlEODM2NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTYyRTNCMDNBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTYyRTNCMDRBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRm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)

  Geek_f0bd6b

  看留言能发现牛人很多，但能有勇气有能力接下开这门课的活，是真的大牛！

  2020-03-22

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/87/93/3e150a25.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  跳跃的胖子

  对于一个非计算机专业出身的人，老师的课程很享受

  2020-03-22

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/13/94/0a/7f7c9b25.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  宋健

  收获很大

  2020-03-21

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/1d/39/f9/b946719a.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  King-ZJ

  得到：这一讲讲的是网络分层，作者用一个个生活中的例子说明层与层之间的分工和协作，更加说明分层可能是人们为了提供效率，专业的人干专业的事情，但是最终这要合在一起才是一个系统，才算达到目标。拆解是乘法，分久必合，合久必分。

  2020-03-20

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/1c/f9/69/384e33e6.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Zeal

  快递互送礼物： 准备礼物，包装礼物，裹上盒子，贴运单； 撕运单，拆开盒子，去掉包装，得到礼物。 如此回送。

  2020-03-14

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/d6/9f/0213e8a0.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  🤪HappyJoo

  套：tcp，ip，mac。 拆：mac，ip，tcp。 一条龙服务。

  2020-03-07

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/14/91/d4/3785c799.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  乐毅

  老师，如果数据包从一个路由转发到另一个路由, 数据包中的Mac地址是不是只包含了上一个路由的Mac地址?

  2020-02-22

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/06/15/702f3294.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  phil

  老师您好： “始终牢记一个原则：只要是在网络上跑的包，都是完整的。可以有下层没上层，绝对不可能有上层没下层” 这个应该怎么理解？

  2020-02-14

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/8f/4d/65fb45e6.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  学个球

  \1. 就像俄罗斯套娃一样，应用层逐渐往下走，包逐渐被更大的套娃包进去，最终到最下一层，对应着最大的那个套娃。接收端就通过打开套娃，逐层验证是不是要发送给我的数据包。 2. windows，使用 ipconfig 命令

  2020-02-13

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/1b/b0/9a/a58aeb1a.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  Jin

  就像下楼，想要从一栋楼的7层到达另一栋楼的7层，不可能直接飞过去，一定是从到本楼的1层，然后从另一栋的1层到达7层；  

  2020-02-08

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/18/8b/98/ddbdea57.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  暝

  用快递来类比是比较恰当的，一层一层包裹（封装），物流运输（物理层），最后送到目的地，再一层一层打开（解封装），最终收到货物（内容）

  2020-01-28

  **

  **

- ![img](http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIia6JywZv309ugNmusDlRnxibezH5iapAh4v40umnc5TYwcQfgFjvYFXHjIicZ7NpFozFjnWBBW8iaagA/132)

  Chad Wu

  我答不上来， 去了某家FAANG

  2020-01-15

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/7e/bb/019c18fc.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  徐云天

  2020年重新读了专栏，发现比以前好理解多了。

  作者回复: 恭喜进步

  2020-01-07

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/0e/ed/1c662e93.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  莫珣

  其实分层的目的就是简化复杂事物的处理过程，最后就是一个面向过程的处理方式，第一步做什么第二步做什么。每一个步骤专注于自己的任务，同时也是易于进行优化，每一步骤有自己的优化思路、方案，最终得到一个最优解。

  作者回复: 对的

  2020-01-05

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/1b/76/17/c1463ebe.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  格子妹妹

  啥二层，三层，二层是指应用层，三层是指网络层？

  2020-01-03

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/54/cf/fddcf843.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  芋头

  老师，有一点不懂，一般情况下不是先根据ip找到对应主机所在网络，再根据Mac匹配主机的吗，为啥上图中是先执行process_layer(2)判断Mac，再执行process_layer(3)判断ip呢？

  2020-01-02

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/19/30/3c/0668d6ae.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  盘胧

  个人理解，分层这个概念只是一种设计而已。就好像get.和post大家都设计或者规范好。规范设计好了，就不用自己去搞一套造轮子了，规范好的，办事效率更高。为啥要分层，大体上就自己觉得分层了更好理解，更清晰。但是，我们也不能墨守成规，也可以自己去规约封装，和外头能不能对接得上，又是一个问题了。

  2019-12-28

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/16/14/3c/d6be29f3.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  SnowsonZ

  经常有人会问这样一个问题，我都知道那台机器的 IP 地址了，直接发给他消息呗，要 MAC 地址干啥？这里的关键就是，没有 MAC 地址消息是发不出去的。 老师，这里还是没有说明MAC地址发挥什么作用。如果只有IP地址没有MAC地址，找不到这台目标机器吗？ 还有一个问题，目标MAC地址是怎么取到的？

  2019-12-24

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/15/50/bc/ce5c5834.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  小黄本黄

  在上一节课中，大家都对 MAC 地址的必要性做了解释：MAC 地址唯一；那从这节课的内容来看，服务器解析网络包时，先获取到的是 MAC 地址，如果是自己的 MAC 地址，才会去解析 IP 地址，那这个时候 IP 地址有什么用呢? 按照 ARP 协议，查找 MAC 地址是通过 IP 地址查找的，那 IP 地址为何不在 MAC 地址前面呢，越学越混乱...

  2019-12-20

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/18/c1/b0/b52d9ade.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  苏彧

  这个buffer指的是什么，老师

  2019-12-18

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/18/47/fd/895f0c27.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Cy23

  ipconfig -all

  2019-12-15

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/69/ec/ba28c292.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  RRRRRRRR

  为什么要分层？ 首先分层不是必须的，用双层模型甚至单层模型实现网络也行，只不过无法做到职责划分，就好比一家公司，所有员工都参与研发 销售 运营 行政等所有的工作。 按照不同的标准，网络分层模型也有不同，比如说五层和七层。 五层协议：从上到下有， 应用层、传输层、网络层、链路层和物理层。 七层协议（OSI网络分层模型）: 从上到下有， 应用层、表现层、会话层、传输层、网络层、链路层和物理层。

  2019-12-14

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/19/32/f1/fd24d52b.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  青禾qingh

  所以为什么您说的关键是没有mac地址消息发不出去？

  2019-12-10

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/d1/29/1b1234ed.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  DFighting

  老师这节课讲解的真的非常通俗易懂，特别是把自己想象成一段Buffer，然后再学习网络协议真的就好多了。

  2019-12-03

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/1a/e6/ef/2be5137f.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Alvin

  请问如果A机发http请求到B机，A和B都属同一个子网，到了交換机，拆了mac头，之後是一个怎样的处理动作？不送去路由器送到別的交換机端口也算是转发吗？

  2019-12-03

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/1a/c9/55/0e627a31.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  菽绣

  两个郡守进行书信交流

  2019-12-01

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/19/ec/0a/814dde78.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Fat car

  非计算机专业低级码农这章一脸蒙B。

  2019-11-02

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/d4/44/0ec958f4.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Eleven

  刘超老师，send的时候不就是先由上层再由下层的么？这里的上下层怎么理解呢？

  2019-10-24

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/16/d5/db/3f9499d1.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  勇闯天涯

  老师，二，三层设备中决定“丢弃”和“转发”的原则是什么？是看MAC缓存表和路由表吗？

  2019-10-24

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/16/d5/db/3f9499d1.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  勇闯天涯

  老师，文章说，网络包经过网口，会根据是否为混杂模式，决定是否请进该数据包，我的疑问是，如果不是混杂模式，网口是根据什么规则判断是否请去的呢？MAC地址？IP地址？

  2019-10-24

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/39/f9/acfb9a48.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  无言的约定

  所有不能表示出层层封装含义的比喻，都是耍流氓！

  2019-10-23

  **

  **

- ![img](http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIwL80nq0CbiaphH0fVwibmA1SeJTBgmVvMlhzgF1dbssRgprRaiaxNgl0axOUk2wM9r8jICLXeYZpcQ/132)

  tang

  看懂一点点又蒙了

  2019-10-22

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/19/f3/25/3652bd78.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Anson

  我是个小白，buffer是什么

  2019-10-18

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/13/15/f7/744720a2.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  DriveMan_邱佳源

  为什么能够通过目标ip就能知道目标的mac地址呢？一个网络包的发送，就是tcp协议加上一层ip协议（包含本机ip和目标ip）再加上一层mac协议（目标mac或者网关mac），是如何获取到目标mac的？麻烦作者大大告知

  2019-10-10

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/13/15/f7/744720a2.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  DriveMan_邱佳源

  一个网络包的完整发送，最内层是http包，最外层是Mac地址，那么这个包发送到外网的其它计算机，是不是就是靠mac地址进行寻址？mac地址是唯一，那么为何需要ip来确定是不是目标计算机？为何一开始不把域名通过某种协议成为mac地址，直接略过ip，岂不是更快更方便

  2019-10-10

  **

  **

- ![img](http://thirdwx.qlogo.cn/mmopen/vi_32/QFE00aXGzaS6ibbfJSJsDrpIkqs0OrIYjzZv6L9vZmMhOlut2j24iaeZb0MCQazToE6FRXN960nNiaTrsmw09YjGw/132)

  岁月如歌

  1、协议分层比喻： 网络通信过程好比快递运输过程：客户下单分派至快递员手上，快递员收到快递之后送到分拣中心等待分发根据地址选择不同的路线以尽快的运送快递，最后由快递卡车司机送往既定的运输路线。 当快递达到目的分拣中心，由其分派到具体的快递员手上，由快递员送达目的客户手上。客户即应用层，快递员即传输层，分拣中心即网络传输层，快递卡车司机即数据链路层。 2、linux下查看网卡信息   ifconfig

  2019-10-08

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/d8/6f/22e5ec55.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  零维

  老师请教一下，第一次发起请求的时候是如何带上目标MAC地址的？

  2019-10-08

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/18/90/8f/9c691a5f.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  奔跑的码仔

  网络为什么要分层？分层是为了抽象，抽象之后需要接口完成各层之间的通信，接口就是为了隔离变化。而接口就是每层之间通信的协议。软件设计的最终目的就是解决掉软件的复杂度，分层可以有效地降低复杂！

  2019-10-02

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  追风筝的人

  Windows:ipconfig   Linux :ifconfig

  2019-09-30

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/87/45/9edd38ba.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  超级励辰

  简单梳理一下 为什么要分层 因为分层效率更高 可以防止混乱

  2019-09-23

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/8e/46/e7129bc2.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Mindy

  理由协议属于哪一层？

  2019-09-22

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/c6/29/8d0f522b.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  丁绍成

  洋葱模型，解析过程就是一层一层拨开你的心

  2019-09-15

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/15/04/bb/5e5c37c1.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Angus

  MAC层的MAC地址是通过ARP协议获取的，在源头这边，本地网关通过ARP协议获取到源头和本地网关的MAC地址，封装好发送出去，在目标这边，目标网关通过ARP协议获取到目标和目标网关的MAC地址。所以说包在传输过程中，通过一步步的指引到达目标网关之后才能获取到目标的MAC地址。关于IP和MAC这两个标识如何寻址的，还有待下一步学习，目前暂时理解为IP是网关间寻址，MAC是网关内寻址，不知道这么理解对不对。

  2019-09-11

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/79/26/9ac98036.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  招谁惹谁

  所以分层的真实含义是什么？仅仅是复杂的程序都分层？

  2019-09-10

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/16/a5/9f/8b39334e.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  yhh

  高赞评论都是人才

  作者回复: 对的

  2019-09-04

  **

  **

- ![img](http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIRrgrGQYmic2XzN3QqE0iakHsyGmoNQTIaicYfBr2xQ7rTBAjlUI82vZNnQUfOHOl5DVSjqiapzQGibiag/132)

  蓝白条纹

  Mac是硬件唯一的，ip大多都是共用ip段。在分层模型中不是应该先ip再mac会寻址更准确吗？但现实是mac层是ip层的底层

  作者回复: 对于本地网络，mac定位简单，而且mac地址唯一

  2019-08-01

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/95/68/41546e8a.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Leo

  打卡

  2019-07-24

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/16/53/03930a6b.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  BY

  第二次读，终于看动了。

  作者回复: 赞，希望有收获

  2019-07-16

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/fd/f3/77223a8c.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  清新灬小柠檬

  像俄罗斯套娃；从上到下，层层封装；从下到上，层层拆封。

  作者回复: 赞

  2019-07-09

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  马以

  可以用送礼物给女朋友，送的时候要一层层包装，开的时候要一层层打开？其实礼物可能是一个求婚戒指，结婚才是目的；

  2019-07-04

  **

  **

- ![img](http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoicc4anfWMvw3wK6B4t9vO2HtyiaTyz2y2MEY3Pv5JzxgEtK6rdpLmSCYjc6c3gLouMQkncyMibYekg/132)

  周达文

  Windows DOS:ipconfig Unix: ifconfig Linux:IP addr

  作者回复: 赞

  2019-06-26

  **

  **

- ![img](http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKjX37aIYNjm4SOVDoACNe4TL5jFOkDPgFa7uTRKzDj0yN1uacEuyNzfyZt1DpIIjYL0Ribfhs9YIw/132)

  盒子妮

  老师讲的很好。学到了好的知识。

  2019-06-24

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/89/f4/b3dacf1a.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  VERITAS

  目标IP是指公网IP吧，又是怎么发到某个局域网的节点的呢

  作者回复: NAT

  2019-06-20

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/14/24/18/8edc6b97.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Roger

  Tcp三次握手时，这时候网络包只是到达了传输层，还没有到达IP层和MAC层，IP层和MAC层是从哪里获取保存在网络包中的？

  作者回复: 三次握手中的每一个网络包，都是要走IP层和MAC层的

  2019-06-11

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/df/d7/ee3da208.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Yuki

  我脑海中有浮现出了玩乐高的场景。 放上去、摘下来

  作者回复: 是的

  2019-05-28

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/17/95/6e/a4b264d3.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  知明

  请问“可以有下层没上层，绝对不可能有上层没下层。”这句话做何理解？

  作者回复: 可以有二层，三层但是没有四层，七层，不能只有四层，没有二层

  2019-05-24

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/80/5e/2d1c63b4.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Eric

  接收到请求时，Mac那层能判断出是给你的还是要转发吗？是不是要等到IP层才能判断出来？

  作者回复: IP层才行

  2019-05-24

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/eb/1a/579c941e.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  志远

  这句话很让人费解啊！只要是在网络上跑的包，都是完整的。可以有下层没上层，绝对不可能有上层没下层。 假如一个包经过的路径是A-B-C-D-E,那么自然A是有下层没上层，E是有上层没下层的，怎么可能不存在有上层没下层呢？总是有终点的吧，难道无穷无尽吗

  作者回复: B, C, D都是有下层的

  2019-05-22

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/7a/0a/0ce5c232.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  吕

  我觉得是不是买票坐高铁回家就基本可以解释这个问题

  作者回复: 不能吧

  2019-05-22

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/12/f9/7e6e3ac6.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Geek_04e22a

  记录一个问题：目标方的mac地址是如何获取的，什么时候获取的?

  作者回复: arp

  2019-05-15

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/7a/0a/0ce5c232.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  吕

  对于“只要是在网络上跑的包，都是完整的。可以有下层没上层，绝对不可以有上层没有下层”，这里的上层和下层分别指的是什么，对这句话额没有理解，请指教

  作者回复: 就是这里面的网络分层

  2019-05-14

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/15/e4/5c/663fed32.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  北极冰

  为啥有了ip还需要mac地址，因为没有mac地址网络包发不出去？这个解释还是很模糊看不懂啊。我想知道为什么设计成这种必须带mac地址的格式

  作者回复: 本地局域网使用mac进行通信的，简单

  2019-05-12

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/f3/cf/851dab01.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  Milittle

  这个过程和包装礼物和拆礼物差不多，还有穿衣服脱衣服也差不多。

  2019-05-10

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/0c/86/8e52afb8.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  花花大脸猫![img](https://static001.geekbang.org/resource/image/89/43/89yyff4c4c2e2b73ce4931bb01a6a943.png)

  针对老师提出的两个问题： 1. 突然想起抖音里面整人的俄罗斯玩具娃娃，可以嵌套很多层那种，但是要拿到里面最小的那个，必须从外面最大的开始一层层的剥开才能看到里面最小的娃娃。 2.ifconfig？好像就这个用的最多了。。。

  2019-04-26

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/16/cb/a2/5e7c557e.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  傲娇的小宝

  其实就像装快递，经手一个人装一次，完事到达了后你得层层的拆开。 查看ip地址的话，得看你想看图形界面的还是看黑窗的。图形界面看计算机的属性，自己去找了。看黑窗的话，windows的话，打开dos，输入ipcanfig /all。Linux用ifcanfig(不同版本的可能有区别)。

  2019-04-24

  **

  **

- ![img](data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABkAAD/4QN5aHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MCA3OS4xNjA0NTEsIDIwMTcvMDUvMDYtMDE6MDg6MjEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YWE3YmZhMDItMzBhMC00MDg3LTg3MmYtOGMwMjMxNjNhZWRjIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI2MTlEODM3NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI2MTlEODM2NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTYyRTNCMDNBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTYyRTNCMDRBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRm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)

  HE2RO

  可以比以发送包裹为例。我发送的包裹内容只有我知道。快递员没必要知道。快递员你帮我封装好，贴上物流单（目的ip）就可以。查看Ip的话可以进cmd，ifconfig。也可以通过交换机去查看与之相连的设备的ip。还有去网络适配器看IP。也可以通过抓包软件抓到数据包再看IP

  2019-04-23

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/9b/16/1dd3e6fa.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  曲冠儒

  很像发快递的过程（http，应用层)，你向顺丰下单(第一次请求),顺丰接单(应答),你向手机小伙联系(回应应答)，你将消息放进盒子里(开始封装请求，会话层)，快递员封装一层盒子贴上快递单带回网店(传输层），到快递点检查是否区域快件（网络层），将快件交给运输车（链路层），各个快递转运中心（物理层），快件到达收件市转运中心（物理层），转运输车（链路层），到达区域分发（网络层），网点派送（传输层），快递员方面签收（会话层），拆开检查（表示层），收到快递（应用层）。

  2019-04-20

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/24/d2/a5e272ce.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  夜空咏叹调

  网络协议分层是为了让功能更细化，职责更专一，便于设计，且由于功能单一，减少了耦合，也利于拓展。

  作者回复: 是的

  2019-04-18

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/14/bf/ef/f95cfd87.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  StackOverflow Oriented

  想问一下这些图是用什么软件画的, 感觉用来梳理知识体系会很方便

  作者回复: draw.io

  2019-04-13

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/50/b1/671a2285.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  奇奇怪怪

  感觉也可以理解成飞船发射，飞船要上天要先加一级火箭，然后二级火箭，然后三级火箭。到达不同高度火箭需要一级一级的脱落，最后把飞船送达目的地。

  作者回复: 不是这样的

  2019-04-08

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/16/af/73/946c4638.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  🤘🤘🤘

  ip确定目的节点  mac和arp确定下一跳节点

  2019-04-05

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/13/78/c9/5a89eb3a.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Wind

  看了“黑桃”的留言和作者回复，有一些疑惑。根据我的理解，发送方应该是通过ARP协议得到了MAC地址，然后才发送的吧。如果像你说的MAC唯一没用，那为什么需要MAC地址呢？MAC地址的作用不就是唯一确定主机吗？并且，关于到达目的地问谁是ip xxxx这个说法，我想问的是，如果在目标地点发现包内IP地址对应的MAC地址与包内之前存入的MAC地址不一样，那么会如何处理？

  作者回复: 为啥MAC唯一没用呀。到达目的地问谁是ip xxx，这就是在发arp呀。到达目的地，目的地又不管从哪里发来的， 只要按规则处理就行了。

  2019-04-04

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/16/a6/54/0509ccb7.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Leo

  谈所谓的为什么分层，没有意义，首先什么是分层，你写个程序都或多或少有某种意义上的分层，你用的语言，你所处的世界，你本身，任何复杂系统都有某种意义上的分层。所以，关键不应该在为什么分层，而是为什么这么分层。

  作者回复: 对的

  2019-04-04

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/16/a5/49/5bf449f2.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  安幕风尘笑为茜

  反驳老师一个解释：总经理之间沟通的时候，经理将总经理放在自己兜里，然后组长把经把经理放自己兜里，员工把组长放自己兜里，像套娃娃一样。网络通信里是这样没错，但是在实际生活中，放兜里这个比喻不太恰当，经理和总经理的一个沟通的一个过程，我是不是可以理解为组长携带员工的意见，经理携带组长和员工的意见反应给总经理。。。视角不同，见谅！！！

  作者回复: 这个比喻是反讽，意思是不对。

  2019-04-02

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/16/a5/49/5bf449f2.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  安幕风尘笑为茜

  我翻了一下留言，关于分层的思想，阐述一下我的观点：认可godtrue大佬的发言，分而治之。举个例子，就像一辆汽车，整体结构相当复杂，但是拆开来看由发动机，底盘，轴承，轮胎，仪表盘等组成。每一个零件都有自己的工作，互不干扰，又密不可分。。。应用层，传输层，网络层，数据链路层，物理层，是最能够清楚表示网络结构的一个模型。就像军师旅团营，连排带工兵描述军衔一样。。。

  作者回复: 是的

  2019-04-02

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/16/a0/57/3a729755.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  灯盖

  写的好

  2019-04-02

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/c1/86/afd6e862.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  王浩

  网络分层的目的是因为复杂的东西都要分层，即复杂的问题划分为几个简单的问题，而问题本身之间都存在写关联关系。 通过分层在不同的层面处理不同的问题，真所谓专业的人做专业的事。 网络分层也是如此，在不同的网络层由下到上处理。

  作者回复: 是的

  2019-04-01

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/16/66/3d/96ae6c64.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  main

  程序命令框，输入"ipconfig"以查询本机ip

  2019-04-01

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/16/70/c1/70867536.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  于 渊

  查看ip   我只知道window的 win+R  cmd打开控制台 ipconfig回车查看ipv4

  2019-03-28

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/9c/c6/05a6798f.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  苗

  老师好，想问下网络零基础的同学，在看这个专栏前是否需要先学习一些基础知识，有没有靠谱易懂的资料......谢谢老师。

  作者回复: 其实哪本书都挺难的，所以还是要多看几遍

  2019-03-27

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/da/16/8f18a016.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  HBC

  一个数据包分封装和解封装的过程

  作者回复: 是的

  2019-03-27

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/13/ff/a3/39aba44f.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  xin

  可以用俄罗斯套娃作比喻, 每次看最外面的一层, 看是否是自己想要的. 如果是, 就再"拆开"一层, 继续进行判断. 如果不是, 则"封装"好, 交给下一个人.

  作者回复: 是的

  2019-03-26

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/13/53/ca/44088dd0.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  花生

  老师，请教个问题，金融里用于高频交易的一层交换机，它做了什么工作。如果照您说的，二层以上还需要验证包头，一层就是什么都没做吗？

  作者回复: 一层也做了很多工作，是物理层的，只是这门课没有解析

  2019-03-24

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/c7/88/18fb4011.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  小坤

  有了IP为什么还要MAC? 感觉这种问法有点问题。实际上从网络的发展过程看应该是先有为了实现小范围连接的二层协议，之后为了把多个孤立的小网络连起来才在二层的基础上引入了三层协议。

  作者回复: 是的

  2019-03-23

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/ab/18/b01e71d1.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  immortalCockroach

  对于A->B->C->D的这链路，我理解网络层的包头里只有A和D的ip 中间B和C的ip是通过路由表+arp或者mac地址来转发的，不知道理解的是否正确？

  作者回复: 是的，是的

  2019-03-21

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/16/69/39/ab99b850.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  邓艺晋_Jim

  请问老师，数据包发出去的时候，对方的mac地址究竟是知道还是不知道？

  作者回复: 发出去的，是知道的，但不一定是对方的，有可能是本地网关的

  2019-03-20

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/23/e2/06575acb.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  t7ink

  IP一起记录源地址和目的地IP，像灯塔一样不迷失方向，Mac源地址和目的地址，每经过路由器一次就会被刷新一次。

  作者回复: 是的

  2019-03-09

  **2

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/23/e2/06575acb.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  t7ink

  发送包就是快递打包的过程，一层一层包起来，收数据包就是拆包的过程

  作者回复: 对的

  2019-03-09

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  QQ怪

  作为小白我都不知道网络协议有哪几层？😂

  2019-03-09

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/71/8c/63437f62.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  帅广应s

  网络分层，从硬件上，是不是更节约成本？

  作者回复: 灵活性

  2019-03-05

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/e9/29/629d9bb0.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  天王

  网络分层，之所以要分层，是处理网络包的程序比较复杂，复杂的东西分层处理，让每层专注做自己的事情。网络包处理程序具体工作流程是什么？层与层之间的关系是什么？用户发起一个请求，1 浏览器加上http请求头2 tcp层加上tcp头，有端口号3 带上ip头，有目标ip地址 4 带上mac头，里面有目标mac或网关mac.一个网络包从网口经过，混杂模式，会把网络包拿进来，先看下mac地址是不是自己的，是自己的，拿进来，再看下ip是自己的吗，如果不是，则转出去，是自己的，看下端口号多少，再看下地址是都是tcp地址，是的话，查看4层的头，是发起还是应答，还是处理，发给上层process_http继续处理。层与层之间的关系，是层层封装。想要发包，每一层都是不可缺少的，少了一层都发不出去。

  2019-03-02

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/14/1c/6f/3ea2a599.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  嘉木

  国家-州/市-县-门牌号

  2019-02-20

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/13/91/51/234f9a73.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  王肖武

  问一下，怎么能够抓到网络上跑的包，看看里面的内容，我们现在用抓包工具抓的包应该都是应用层的了吧？

  作者回复: tcpdump

  2019-02-20

  **

  **

- ![img](http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKEt0uKfP3pkrfWk41kchpMYibsalfGFWjWiajVXsUgGkKaBF7zegqTAyXm5WU0lj9keIaxRl1zLHdw/132)

  Patty

  一般都是用ifconfig查询ip

  2019-02-16

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/14/69/b2/f8bad126.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  好名字123

  mac是数据链路层的协议，是为了保证网络通讯中， `机器` 之间通讯的正确性；ip是网络层的协议，是为了保证网络通讯中，`应用`之间数据通讯的正确性，同时可以使用灵活多变的配置以应变在脆弱且复杂的网络拓扑中，以及其他高级功能，比如流量控制、灵活路由、分组交换等。同时网络层存在的意义也是为了剥离数据通讯对硬件机器的耦合，而是由网络组建者通过使用网络层的协议对现有网络进行控制。      举个例子，请联系我的秘书小张，小张是mac地址，秘书是ip。

  2019-02-14

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/14/55/e4/e263bd16.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  LC90

  我在想一个问题，为什么这么多精彩的评论，精彩的回答，大家都学的这么好，为什么还要来这里学呢？没别的意思，脑洞，可能是感觉有的地方需要学习吧！

  2019-01-22

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/13/cb/50/66d0bd7f.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  杰之7

  小白一枚，先阅读打卡。

  2019-01-19

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/14/94/71/e8ec9843.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  鹅鹅鹅

  我记得数据链路层只负责解数据帧，数据包并不归它管啊，这怎么一下去了两个头？

  作者回复: 就是MAC头

  2019-01-06

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/14/8b/2b/d174fe2a.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  李眼镜

  程序是如何工作的那张图，最后一步好像不太对，我理解应该是原路发了个响应包回去给请求端吧？

  作者回复: 这里写的是客户端，不是响应包，是发送了一个请求

  2019-01-03

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/13/6a/a2/f9efd9dc.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  春和景明

  从哪本教材开始的，说网络必须说上下层，而不是内外层。难道内外层不是更贴切吗？

  2018-12-25

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/14/47/fe/bf8ba605.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  面包牛奶西瓜

  1、MAC 地址是历史遗留下来的，封装起来是为了兼容性 2、只通过 IP 地址是可以找到目标机器的，因为在内网中有 NAT 协议

  2018-12-20

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/13/ec/30/9113f2de.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  小二上酒

  刘老师您好，谢谢您的课程，收获很多 关于这一章还存在和困惑想请教您 既然mac地址是唯一的，ip地址是分网段的 那么最外层为什么是mac而不是ip呢，因为传输过程中mac肯定不是自己的，，用ip做最外层，传到目标所在网段，就可以用mac寻找目标机

  2018-12-20

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/13/2b/ec/af6d0b10.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  caohuan

  七层 通信 一边 加上ip 头 或者mac头，另一是在各层减少 X头。 回答老师 节目：1.通讯与 俄罗斯 套娃 2.在 CM D中 输入命令：IPconfig 差IP

  2018-12-13

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/eb/e4/dabff318.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  邵峰

  富士康流水线贴切，ifconfig

  2018-12-10

  **

  **

- ![img](https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqFgxfGTCnupLL6iad7zLNPEhQ0yvkJiaTMhl4LBt8N0liaxibuo7gdwCcTqiaKI5ytX9OVNRibszrEvgUQ/132)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  轩呀

  ip addr Ipconfig ifconfig 感觉到了对文科生的满满恶意

  2018-12-10

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  多襄丸

  增加一个中间层，耦合性是不是太强了？

  2018-12-10

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/14/3b/03/9332db5a.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  NSDGB

  ifconfig可以查看到本机所有的ip信息（包括网关和子网掩码之类的）  对于为什么除了IP地址还要有MAC地址这个问题，我的理解是如果只知道IP地址的话只能找到所在的网络区域，但只有知道MAC地址才能找到目标主机（也就是那个要接受包的客户端），因为MAC地址是唯一的，出厂的时候就固定了，就像每个人的身份证一样，出生就定下来了。

  2018-12-01

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/72/5a/800cc3d2.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  旭楠

  学习了一段时间后，回过头来再看，很多当初很迷惑的事情，逐渐变得清晰，想要只看一遍就学会，不现实，脚踏实地的学，等待着豁然开朗！ 这里个人推荐"万历十五年"的解释，但赞咋那么低～他把问题换了一个角度解释，问为什么要分层，就如同问为什么要写函数一样；然后对各层的解释也比较容易让人理解， 1层物理层个人理解就是实物光缆。 2层数据链路层就是文章中那张事例图中的layer2，判断mac和做相关处理工作。 3层网络层就是事例图中的layer3，因为涉及跨网通信所以又叫网络层，判断ip和做相关处理工作。 4层传输层，就是事例图中的tcp层，把从网络层过来的数据按照指定协议tcp 或udp 找到指定的端口扔进去。 5层应用层，就是事例图中的浏览器了，应用层会监听不同的端口如8080，如果自己监听的端口有东西进来了，那么就触发事件进行处理。 PS：突然想了解一下每一层都有哪些协议了。。

  2018-11-26

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/6b/4e/507cd4a4.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  抛物线

  很经典的一个比喻就是寄信，每一层的收发员都在信封的外面加一层自己的信封

  2018-11-24

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/e0/99/5d603697.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  MJ

  win：ipconfig /all Linux：ifconfig、ip a

  2018-11-24

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/8e/10/10092bb1.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Luke

  评论里的问题后面肯定能自己解答了，其中有很多我之前也困惑，但是才看了两篇我已经想通了很多。 老师如果没有回复，也不要纳闷和失落。也许他觉得你的问题后面可以自己解答了，而且带着问题去学习效果更好！ 回答老师的话题： 我觉得可以用多重加密来举例，虽然也不是很贴切，两条地下党分支的领导要联系，每一层地下党都没有箱子的钥匙，他能做的就是给箱子加一个外壳，并上锁，对面同级的有同样的钥匙（私钥） 查看IP：网络管理器，ipconfig，ifconfig

  作者回复: 赞，后面有答疑环节

  2018-11-20

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/8a/9a/7270d764.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Enterprize

  process_layer3(buffer)中，如果ip不是自己的但是非说是自己的咋办，这样发出去的数据不就被不符合预期了么

  作者回复: 可以这样的，但是协议是一个交互的过程，你这里写了，别人都不认，包就被丢了

  2018-11-17

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/5e/4e/85502e98.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  balance

  在开发应用层协议时，经常有说长连接、短连接，如中国移动短信协议cmpp就是长连接，要通过心跳包来维持会话，中国联通短信协议smgp就是短长接，发完数据包就关闭连接，请问老师什么是长连接、短连接？它们在传输层、网络层上有区别吗，还是只是应用层的实现，没太懂，望老师解答，谢谢！

  作者回复: 网络层上没有区别。心跳包，tcp层可以发送，应用层也可以发送，看具体实现了

  2018-11-15

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/96/73/b5158f6c.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  笙南

  作为刚入门的小白，看完之后，我始终还是不能理解这句话--‘只要是在网络上跑的包，都是完整的。可以有下层没上层，绝对不可能有上层没下层’，麻烦老师可以详细的解释一下吗～

  作者回复: 请问四层负载均衡器收到的包，包含mac地址吗？他似乎没用到呢。

  2018-11-15

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/5e/4e/85502e98.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  balance

  就喜欢这样的老师，赞👍。大学里讲网络的老师怎么就不这么讲呢？

  2018-11-15

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/2f/fd/dead7549.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  codewu

  可以比作穿衣服，可以多穿，也可以少穿，但是不可以缺了人。

  2018-11-02

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/13/49/3c/5d54c510.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  静静聆听

  您好，刘超老师，我曾经遇到过一个问题，用netty发送数据，第一次请求头发出去了，请求体也发出去了，成功，第二次请求头发出去了，请求体却发不出去。请求体总是一次成功发出，一次无法成功发出，交替执行，如果是您，您会猜测是哪里出了问题

  2018-10-24

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/29/a0/5a13555e.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  胡明洋

  分层协议–俄罗斯套娃

  2018-10-23

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/13/05/c9/706221c9.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  KID

  老师你好，请问什么时候会出现 MAC 头已经确认了，却发现 IP 地址不是自己的需要转发的情况呢？毕竟通过 MAC 头，已经可以定位到具体的物理设备了？而且这个 MAC 地址不是根据 IP 地址确定的吗？没想明白，烦请解答，谢谢。

  作者回复: 当这个设备是一个路由器的时候

  2018-10-22

  **

  **

- ![img](data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABkAAD/4QN5aHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MCA3OS4xNjA0NTEsIDIwMTcvMDUvMDYtMDE6MDg6MjEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YWE3YmZhMDItMzBhMC00MDg3LTg3MmYtOGMwMjMxNjNhZWRjIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI2MTlEODM3NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI2MTlEODM2NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTYyRTNCMDNBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTYyRTNCMDRBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAgICAgICAgICAgIDAwMDAwMDAwMDAQEBAQEBAQIBAQICAgECAgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwP/wAARCADuAO4DAREAAhEBAxEB/8QAfAABAAICAwEBAAAAAAAAAAAAAAYHBAgBAwUCCgEBAAAAAAAAAAAAAAAAAAAAABAAAgIBAgIECwQJBQAAAAAAAAECAwQRBSEGMWESF0FRgVITk+MUVJTUIkJiB5EyhBVFhbXFNnFygqJTEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwD9vAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGHmbhg7fD0mbl4+LF69l32wrctPBCMmpTfUk2BG7ue+Wqm4rNsua6XTi5DWvVKyutPyaoDmnnrlq19l506W9NPTYuSk2/xQqnGPlaQElxM7Dzq/S4WVj5VfhlRbC1Rfil2G3GXU9GBlAAAAAAAAAAAAAAAAAAAAAAAAAAAA4bUU5SajGKblJtJJJattvgkkBVHMnP8AJSswtilHSLcLdxcVLV9DWHCWsdF/6ST1+6uiQFW35F+VbK/Jutvum9Z23WSssk/xTm3JgdIADvx8nIxLY34t9uPdD9W2myVc1412otPR6cV0MC1uWufvTTrwd8cITlpCrcYpQhKT4KOXBaQrbf346R8aXFgWmnrxXFPimvCAAAAAAAAAAAAAAAAAAAAAAAAAAFUfmBzHKLexYVjjrGMtxsg+LU12oYia6E4tSn400vOQFTAAAAAAAuDkDmSWRFbHm2OVtUHLb7ZvWU6oLWeK2+LdMV2ofgTX3UBaAAAAAAAAAAAAAAAAAAAAAAAABi52XDAwsvNs4wxce6+S10cvRQlNQX4ptaLrYGr+RfblX3ZN8nO7Itsutk/vWWSc5Pq4sDpAAAAAABlYWXbgZeNmUPS3Guruhx0TcJJ9mWnTGa4NeFMDaDGvrysejJqeteRTVfW/HC2EbI/9ZAdwAAAAAAAAAAAAAAAAAAAAAACJc8WurlncOzwdrxateqeVT2v0wTXlA18AAAAAAAAAbFcnXSu5a2mcnq402U/8cfJuoivJGtASYAAAAAAAAAAAAAAAAAAAAAABFOdqXdyzuSjxlWse7yVZVMp/or1YGvQAAAAAAAADY3lGiWPy3tNclo5Yzv8AF9nJusyYvyxtQEjAAAAAAAAAAAAAAAAAAAAAAAdGVj15eNkYty1qyaLaLF4exbCVctOvSXADWDNxLsDLycLIj2bsa6dM/E3B6KUfHCa0afhTAxQAAAAAAZ224Nu55+LgUp+kyboV6pa9iDetljXm1VpyfUgNnqaoUU1UVLs101wqrj4oVxUILyRQHYAAAAAAAAAAAAAAAAAAAAAAAAVrz5yzPNh++cGtzyaK1HNpgtZX0QX2bopcZW0R4NdLhp5ujCmQAAAAAAXbyLyzPbaXumdW4ZuVX2aKprSWNjS0bck+Mbr9FqumMeHS2gLDAAAAAAAAAAAAAAAAAAAAAAAAAACuOZOQ6c+dmbtDrxcubc7cWX2cbIm+LlW0n7vbLw8OxJ+bxbCpM7bM/bLXVn4l+NPVpekg1CenhrsWtdseuLaAwQAHo7ftO47raqsDEuyZapSlCOlVevhtul2aql/uaAt3lrkWjbJ15u5yry86Gk6qYrXFxpripfaSd90X0NpRi+hNpSAsIAAAAAAAAAAAAAAAAAAAAAAAAAAAAD4sqrug67a4W1y/WhZCM4P/AFjJNMDw7eVuXrm5T2jCTfT6Kr0C49VLrQHNPK/L1ElKvaMJtcU7alfo/Gle7FqB7cK4VQVdcIVwitIwhFQhFeJRikkgPsAAAAAAAAAAAAAAAAAAAAAAAAAY2XmYuBRPKzL68aiv9ay2XZjq+iKXTKcvBFJt+BARGf5g8uRk4q3LsSeinDFkoy60pyhPR9aQHz3h8u+dm/K+0Ad4fLvnZvyvtAHeHy752b8r7QB3h8u+dm/K+0Ad4fLvnZvyvtAHeHy752b8r7QB3h8u+dm/K+0Ad4fLvnZvyvtAMjG575cybY1PKtxnJpRnk0Trq1fglZHtxrXXLRLxgTCMozjGUZKUZJSjKLTjKLWqlFrVNNPgwOQAAAAAAAAAAAAAAAAAAAAUZ+YW43ZG9ywHOSx9vqpUa9fsu7IphkTta8MnCyMepLrYECAAAAAAAAAAAF0/lxuN2Tt+Zg2zlOO320uhyerhTlK1qpPzYWUSa8Xa06NALHAAAAAAAAAAAAAAAAAAAABr3zx/lO6fsX9OxAImAAAAAAAAAAALY/K/+Ofyz+4AWwAAAAAAAAAAAAAAAAAAAADXvnj/ACndP2L+nYgETAAAAAAAAAAAFsflf/HP5Z/cALYAAAAAAAAAAAAAAAAAAAABVvMfJG7bxvOZuONkbdCjI937Eb7cmNq9DiUUS7Ua8S2C1nU2tJPgB4fdrvvxe0+vzPoAHdrvvxe0+vzPoAHdrvvxe0+vzPoAHdrvvxe0+vzPoAHdrvvxe0+vzPoAHdrvvxe0+vzPoAHdrvvxe0+vzPoAHdrvvxe0+vzPoAHdrvvxe0+vzPoAHdrvvxe0+vzPoAJvyby1ncvfvH323Et989z9F7rZdPs+7+9dvt+loo019OtNNfD0ATcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//Z)

  sjxuan

  总经理和员工的比喻可能并不是不合适，只是角度不一样。网络分层协议可以理解为，上层要完成一件事情，都需要下层不断的努力丰富。总经理下达总体指令，经理进行初步分解，组长经过详细设计，员工执行。下层总是在围绕着上层的指令做具体的分解和执行。可能这样理解会略微符合一点吧。

  2018-10-15

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/be/d4/ff1c1319.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  金龟

  把应用层数据看成数据，其实每一层都是一个proxy，每一层都单独进行了处理

  2018-10-01

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/d7/85/f2d5997a.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Zzzzz

  我觉得“有ip地址后，为什么还需要mac地址”这问题，老师在文章里应该说清楚了吧。当一个网络包在传输时，首先通过物理层，再通过链路层，当到了链路层，就首先判断网络包中的mac地址是否与自己匹配，再决定是丢弃，转发，还是为自己所用。如果你发的网络包里没有mac地址，相当于没有办法往上传输至网络层(IP)，更别说再往上穿输了。相当于掐死在链路层了。

  2018-09-28

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/58/5d/8de7f8dc.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  爱新觉罗老流氓

  我猜想IP地址保存格式为： sourceIP: xxxx routingIP: xxxx destinationIP: xxxx 网关之间互相传递时会修改routingIP

  作者回复: 不是的，接着看会有答案哈

  2018-09-28

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/58/5d/8de7f8dc.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  爱新觉罗老流氓

  如果按四层网络模型，应用层在4楼（4层），传输层在3楼，网络层在2楼，链路层在1楼。刘老师的意思是，不可能有3楼（传输层常见TCP、UDP协议，如TCP封装的TCP报文）没有2楼（IP报文）和1楼（MAC报文），万丈高楼平地起！ 我的疑问是，这里我在描述3-1楼时用“报文”这个词，是正确的么？报文里包含头和内容吧？请老师指正

  作者回复: 不用这么严格，其实不同的层有不同的叫法，段，包，报文

  2018-09-28

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/2d/18/918eaecf.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  后端进阶

  想问下老师，我们知道了目标ip地址，那么在与目标IP地址通讯前，是怎么拿到目标Mac地址的？

  作者回复: arp

  2018-09-27

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/13/21/0c/30aed5df.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  晴空飞絮

  请问“只要是在网络上跑的包,都是完整的。可以有下层没上层,绝对不可能有上层没下层”这句话中什么叫可以有下层没上层,绝对不可能有上层没下层？网络包经过了应用层这种上层想要再从上层中获取，不总得经过网络层，数据链路层这些下层吗？

  作者回复: 比如ping的包里就没有应用层协议，但是必须有链路层。

  2018-09-27

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/95/96/0020bd67.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  夏洛克的救赎

  一层设备是客户端吗

  作者回复: 不是，是物理层

  2018-09-26

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/7e/d8/92a98fb6.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  逍遥思

  好比把物品层层包装好用快递寄出去，拆开时再一层一层拆

  2018-09-26

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/56/43/abb7bfe3.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  阿巍-豆夫

  员工和总经理的必须，我猜员工是ip，总经理是应用层。也就是说ip是套在tcp层外的一层，应用层是套在最里面的一层

  2018-09-26

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/56/43/abb7bfe3.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  阿巍-豆夫

  首先是分层的比喻。所有不能表示出层层封装含义的比喻，都是不恰当的。总经理握手，不需要员工在吧，总经理之间谈什么，不需要员工参与吧，但是网络世界不是这样的。正确的应该是，总经理之间沟通的时候，经理将总经理放在自己兜里，然后组长把经理放自己兜里，员工把组长放自己兜里，像套娃娃一样。那员工直接沟通，不带上总经理，就不恰当了。 比喻看明白了，但是没明白员工是哪一层，总经理又是哪一层。因为文中做比喻没有描述喻体。

  2018-09-26

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/7a/7f/1b389e44.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  刘晓宇

  有了ip地址，还要mac地址做什么？感觉可以类比java的面向接口，而不是具体实现。一样的道理。

  2018-09-25

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/c9/78/2532d3e5.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Roger Lee

  “就是把 MAC 头摘下来之后，再把 IP 头摘下来，看看到底是丢弃、转发，还是自己留着。”中的丢弃、转发还是自己留着可以解释一下吗？

  作者回复: 包就是内存里面的一段数据，丢了就清理了就行了，转发是找个网口，将这段数据发送出去。自己留着就是如果就是发给你的，就把这段数据发给应用

  2018-09-19

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/5e/95/4a4af03a.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  断章

  我联想到的俄罗斯套娃，就是那种一层一层的；现在假定有一个七层的套娃，每一层分别对应网络模型的一个层；最外层的是物理层，最内层的是应用层；发送http请求的封包过程就像是，我把一封信(http请求正文)放进最小的一个名为http的娃娃里, 外边再套上大一点的表示层、会话层、传输层(TCP协议)、网络层(IP协议)、数据链路层(MAC)和物理层的娃娃；现在我把这个套起来的娃娃交给了另外一个人，小s。他拿到娃娃后，就从外到内依次（最外层是物理层，最内层是http应用层）把每个娃娃都打开才可以看到我信里的内容;

  2018-09-11

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/ec/1c/d323b066.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  knull

  1、快递包裹差不多：先区盖章，再市盖章，再省盖章；如果跨国，国家盖章。发到对应国家（类似国家解包头），发到对应省；发到对应市、区。 2、

  作者回复: 是的，快递挺合适的

  2018-09-11

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/03/15/293a185d.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  JRich

  我觉得是不是可以先抛开分层，讲一下完整的流程，从整体上对功能有一个认知，然后在对应到一层层上去是不是更容易理解。

  作者回复: 这是讲解网络的一个难点，就是互相关联，最后有一个完整的例子，但是前面不讲，也不容易看懂

  2018-09-09

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/d7/ca/7b8bd13c.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  木木夕Ace

  为什么还要有mac地址。因为ip是会变的。ip并不能唯一标识计算机。

  2018-09-06

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/90/4e/efaea936.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  墨禾

  老师能介绍一下，网络封包异常处理机制吗？ 如何宏观地去考虑各种异常情况呢

  2018-09-04

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/8d/93/e7a8bfad.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  acebean

  内部ip地址是可以设置为固定的，而服务器一般是不会关机，这样，IP地址就不会发生改变或者被其它机器所占用，如此一来就可以在当前网关中通过ARP协议进行广播而得到目标主机的mac地址。而在源主机发送请求时，如果知道则会填入对应的mac地址，如果不知道目标主机的mac地址则会填入的是下一网关的mac地址吗？

  作者回复: 要看是不是本网络的，如果是则arp，如果arp找不到，就是不可达了

  2018-09-04

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/a3/62/abb7bfe3.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  grk

  118 为啥有了ip还需要mac地址，因为没有mac地址网络包发不出去？这个解释还是很模糊看不懂啊

  2018-08-30

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/43/f9/555d7aa0.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  人心向善

  ip和mac之间的关系就像树和树根的关系

  作者回复: 这个比喻不太恰当

  2018-08-28

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/43/87/7604d7a4.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  起而行

  每层的人，有嵌套关系，同时在运行 两个学校比拼成绩，先比校长气场，再比老师水平，最后比学生学习效果。

  2018-08-23

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/51/67/4777ccbf.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  不觉

  老师，刚刚看到tcp三次握手的时候 ip层和Mac也都要跑 ，那么三次握手这个都是http请求吗？

  作者回复: 不是，tcp握手的时候，http还没开始

  2018-08-23

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/12/71/ea/4ab8d452.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  4fun

  不错，刚开始慢慢看。

  2018-08-19

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/b4/0c/21185eca.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  五流诗人二手黑客

  分层概念在体系架构中我们常提起透明性，其实网络架构应该是透明性体现的一个经典应用，就是看着黑盒子也能完美工作，打开黑盒子就能学习到精髓，深入细节

  2018-08-11

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/eb/1a/579c941e.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  志远

  老师，感觉你的表述在我的理解看来是互相矛盾的。文章中说所以一个HTTP 协议的包跑在网络上，它一定是完整的，但是你又说在经过二层设备的时候会摘掉mac头，这样就不完整了啊？你所说的“摘掉”指的是什么？怎么摘？

  2018-08-10

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/d2/1a/19365924.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  爱上飞飞的面码

  在我看来分层就是流水线操作，只不过全部是串行没有并行罢了。就像制造电缆，中间的铜丝就是http正文，每过一个部门就加上一层皮。分层最大的意义应该是每个部门只关注一件事，只做一件事，复杂的事也能变简单。对网络世界来说，一个设备只做一件事，这设备就容易制造，要是一个设备得把所有的事都做了，就复杂了。

  2018-08-10

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/4c/be/25919d4b.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  FF

  对真二八经看书看的烦躁的福音

  2018-08-05

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/4c/be/25919d4b.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  FF

  对于看真二八经的书看的烦躁的人的福音

  2018-08-05

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/4c/be/25919d4b.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  FF

  透彻

  2018-08-05

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/40/a8/6af775e8.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Julie

  老师讲的确实挺好的，对我这种只了解最基本网络概念的人来讲，感觉课程是对网络知识的提炼和总结。👍

  2018-07-26

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/50/16/0a60e36a.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  lishaohui

  可以说一下为什么可以有下层没上层吗

  2018-07-24

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/da/3a/208b0859.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  snail🐌

  用寄信作比喻会不会生动点，发送方要一层层封装，先用信纸承载数据，然后用信封封上，然后写地址，然后依据地址发送，接收方要一层层拆头，把信封拆掉，才能读到信息。

  2018-07-23

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/84/eb/29ffead2.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  张伟祎vivian

  比如信件邮递过程中，按范围解析地址一样。国家，城市，区，具体地址，对应http，tcp，ip，mac地址。

  2018-07-20

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/62/2f/6fe8ee9e.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  李靖峰

  我有一个疑惑，发送者是如何知道接受者的Mac地址的呢？

  作者回复: arp

  2018-07-20

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/72/4c/4d636a23.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  在路上

  员工和经理的比喻不太好理解，更倾向于邮局的比喻

  作者回复: 是的，后面改一下

  2018-07-17

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/6f/1f/41422940.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Geek_b20b69

  俄罗斯套娃

  2018-07-16

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/87/1b/064f9f9d.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  极客追赶者

  老师你文章提到，当收到一个消息后，Mac都解析数据了，但是发现IP不是自己的，这种情况一般是路由收到消息吧，那么你提到这里会将消息转发出去，那么转发的时候，是怎么封包的呢

  2018-07-06

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/58/7c/f07dd453.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  任正

  要想让总经理和经理的比喻恰当，设置他们分别使用不同的语言就行了

  2018-07-02

  **

  **

- ![img](http://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM7vrkOLEl7Nic5EdFYdmsrjdUbqvJ4GDQKRftTzJ62IlUmKtVicTiaZ3P5gatnT8GQ0ZTqTZnpHRWY4g/132)

  极客乐园

  参考以前写信时信封上写的地址和邮编，从国家、省、市、县、乡镇、村、小组、门牌号，很好理解。

  2018-06-25

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/dc/68/006ba72c.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Untitled

  内容简而易懂，建议老师加一些重点术语的介绍，例如ip,mac等这些的意思~

  2018-06-24

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/a4/ea/5bd0f0a2.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Super陶

  用寄包裹会更加形象 发件人地址表示自己的Mac和IP 收件人地址表示目标的Mac和IP 包裹内的东西是上层协议的封装 Tcp是顺丰（代价高），udp是圆通     0.0！

  2018-06-14

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/cf/5a/ce1011b1.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  haha

  个人理解也是像快递一样，快递常常只包装一层就可以指向目的地，想象快递多次包装，多次转发，快递想象的复杂一点便可以模拟网络间的通信，他们都是为了将某种东西送到目标。

  2018-06-06

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/48/7f/eff2c474.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  沒結果的花

  其实把比喻反过来就好了，总经理应该是应用层，下面是ip总经理要做什么，要员工们的合作，员工具体的细节，总经理不需要关心

  2018-06-04

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/12/b3/9e8f4b4f.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  MoFanDon

  写的通俗易懂。以前看过一个网络报文怎么传输的视频，过程跟快递过程一样。

  2018-06-04

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/98/10/a85a5189.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Jane

  有个问题请教下，要发一个请求的时候，是如何知道通过mac和内网机器通信还是走交换机请求外网的

  2018-05-31

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/e9/53/5c19021b.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  梁鹏

  老师，比如一个http服务器，请求从网卡进来，然后直到第七层，这期间数据包都经过哪些函数处理，涉及到哪些Linux的内核参数，这个以后会讲吗？或者是可以推荐本书

  2018-05-31

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/49/ea/813e195d.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Nick

  在二层设备中，目标MAC地址是如何得到的；数据包经过n个网关传输，根据一个目标MAC地址是怎么把包最终发到终点的呢？

  作者回复: 根据一个肯定无法到达，每过一个网关就换目标Mac

  2018-05-30

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/6b/68/51e01346.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  桐人

  老师我是学安全 做渗透这个方向的    需要对哪个过程有更深入的理解呢    

  作者回复: 这个听起来好高级啊，不太懂这一块

  2018-05-30

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/98/a4/c22f3028.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Colingo

  比喻，像外包，需求方找到承包方A，说了最原始的需求R1。A再找B，在需求R1上加了R2。以此类推到承包方G的时候，增加到7个需求了R1-R7。

  2018-05-30

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/ca/61/b3f00e6f.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  byte

  复杂系统或者软件都要分层--这个是结论，但是这样做的原因是什么呢？感觉为什么分层没有讲清楚？

  2018-05-28

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/52/f7/e788da80.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  文刀由走de

  寄快递的例子我觉得比较恰当。

  2018-05-28

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/de/17/75e2b624.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  feifei

  如果你也觉得总经理和员工的比喻不恰当，你有更恰当的比喻吗？ 我觉得像送快递跟恰当一定，比如跨国快递 要想学习网络协议，IP 这个概念是最最基本的，那你知道如何查看 IP 地址吗？ windows上使用ipconfig Linux上使用 ifconfig 或者 ip addr

  2018-05-28

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/d8/a8/fc3d4a11.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Sand

  其实跟快递很像，快递一层层的在各种人和路上跑，就像网络包在一层层间传递一样，但是每层的人看的信息不一样，快递员看的是具体的门牌号，从快递收发点往转运中心发看的是省级信息，各级都看信息，但看的信息不一样。

  2018-05-27

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/5f/39/98c07aa3.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  耶风雨

  我想请问一下，文中有说通信到还需要对方的mac，要发消息给对方，只知道ip地址，对方的mac怎么知道？

  2018-05-27

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/43/24/3f9f7c70.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  zixuan

  关于IP层最终IP怎么放的问题思考过，是不是应该有两个槽，一个放下一跳IP，一个放最终IP

  作者回复: 只有一个槽，就是最终ip

  2018-05-27

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/c5/28/343afe04.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  王霖岩

  老师是否会介绍具体文件上传时的一个过程

  作者回复: 会介绍下单的过程

  2018-05-26

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/58/97/8e14e7d0.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  楚人

  老师，应用层是最上层吧，物理链路层是最下层吧?

  作者回复: 是的

  2018-05-25

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/58/97/8e14e7d0.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  楚人

  老师，应用层是最上层，物理链路是最下层吧?

  作者回复: 是的

  2018-05-25

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/a3/13/3c318c90.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  随遇而安

  作为一个还没入门的学生，这一讲是真的完全听不懂了。还是老老实实先学点更基础的吧，以后再来拜读。刘老师辛苦了

  作者回复: 没事儿，往后听完了再回来说不定就好了

  2018-05-25

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/57/8e/67990114.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  sheldon

  今天讲的一些知识，教科书上没有，老师也不讲。只能工作中去学习？如果不是写这么底层的代码，可能一直不会去了解了。

  作者回复: 工作中用到了，自然回去研究，上手，然后就越来越懂

  2018-05-25

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/41/f4/b4492888.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Talent

  文中"我"这个程序，是指什么？网卡？

  作者回复: 是交换机，路由器，服务器上跑的程序

  2018-05-24

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/fa/09/3d804403.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  fogo

  老师，我是小白，你在文中说到的“SSH 登录到公有云主机里面，都需要经历哪些过程？或者说你打开一个电商网站，都需要经历哪些过程”看完这篇理解还是有点模糊，能详细说一下吗

  作者回复: 看完这篇文章还只是第一步，这里面牵扯的东西太多，后面虽然规划了一节讲这个，但是不知道一节是否讲的完

  2018-05-24

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/f2/53/2af50978.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  zwfec

  这个函数里面要加一下 MAC 的头，记录下源 MAC 地址，得到的就是本机器的 MAC 地址和目标的 MAC 地址。不过，这个还要看当前知道不知道，知道就直接加上；不知道的话，就要通过一定的协议处理过程，找到 MAC 地址。反正要填一个，不能空着。 随便填一个？有些不理解.

  2018-05-23

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/f2/53/2af50978.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  zwfec

  原则：必须有下层，上层可以没有

  2018-05-23

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/3d/e7/d04bf0cf.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  wod.Y

  文中的比喻应该是分成两个合作公司，a公司员工让b公司员工做某个关键决定，必须在a公司层层向上请示，双方总经理拍板，再由b公司层层下达指示

  作者回复: 还是应该表达封装的关系

  2018-05-23

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/5f/71/3997eb14.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  扬帆起航

  好的，谢谢老师您推荐抓包的书，还是希望老师您讲到最后能稍微讲解下这个。

  作者回复: 会的会的

  2018-05-23

  **

  **

- ![img](data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABkAAD/4QN5aHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MCA3OS4xNjA0NTEsIDIwMTcvMDUvMDYtMDE6MDg6MjEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YWE3YmZhMDItMzBhMC00MDg3LTg3MmYtOGMwMjMxNjNhZWRjIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI2MTlEODM3NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI2MTlEODM2NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTYyRTNCMDNBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTYyRTNCMDRBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRm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)

  vegetables_bird

  网络为什么要分层 因为，是个复杂的程序都要分层 我想知道，如果不分层会怎么样，分层的意义在于什么？或者说为了解决什么问题？

  作者回复: 不分层的话，如果n个人一起写，你就会发现大家都耦合在一起了，怎么改都不行，但是这是设计模式的课程了，如果在网络课程上说这个有点偏题，可以参考微服务相关课程

  2018-05-23

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/5f/71/3997eb14.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  扬帆起航

  老师，您好，我希望最后您能带着我们一起抓包，怎么样抓，然后去怎样解读一些这些包的内容。

  作者回复: 推荐本书《wireshark网络分析的艺术》

  2018-05-23

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/5e/de/4e7ec66d.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  蠢蠢欲动的腹肌

  看下来还有一个疑问，目标mac地址是如何拿到的呢，文中有说会通过一定的协议拿到，具体是什么协议，如果获取失败了是不是也就意味着网络包不能被发送了

  2018-05-23

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/6c/f7/c6510a3b.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  吴老爷

  请求是怎么知道目标mac地址的呢？

  2018-05-23

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/5f/e6/e5a39ee7.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Navy

  更新太慢，迫不及待要看下一节

  2018-05-23

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/47/b4/73cb239b.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  一片鬼

  讲本节内容前，可不可以先讲解一下上一节布置的问题作业

  作者回复: 其实问题的答案，往往就在后面的章节中

  2018-05-22

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/73/08/dd9a4a38.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  小狼

  一遍看的不是很懂，需要再看看几遍。1 不晓得其他比喻。2 win 命令行看ip:  ipconfig linux下用：ifconfig or ip addr

  2018-05-22

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/5f/fb/af061ca7.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  qpzm7903

  加入一点简单的命令实战会更好哦

  2018-05-22

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/95/96/0020bd67.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  夏洛克的救赎

  所谓的二层设备、三层设备，都是这些设备上跑的程序不同而已。 这些程序指哪些？

  作者回复: 是个设备上面都会有程序啊，只不过盒子里面都是嵌入式程序，反正就是跑着一些代码，这些代码的逻辑不同，导致他是二层，或者三层

  2018-05-22

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/e9/53/5c19021b.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  梁鹏

  刘超老师，这些网络内容会和Linux网络参数或者命令，结合在一起讲嘛？

  作者回复: 会有简单的命令，但是不会有太复杂的命令，但是最后一节会搭建一个实验管理，复杂的命令操作，音频没法弄

  2018-05-22

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/56/20/669aef03.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  小酒

  感觉理解更深了，希望后面有实战案例

  2018-05-22

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/4a/ce/89ae650f.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  sonny

  \1. 为什么要分层，结果就是一句户，因为大系统都要分层。这个是不是有点说的太笼统了。 2 举例经理握手把组长等人揣兜里，这个比喻不是很好，怎么把人揣兜里，这个很难去理解，应该有更好的例子。 3 上述例子也是在说明报文的封装和分总这两个重要概念，可是文中并没有最后指出这两个概念。 4 每一集的内容太少了。

  作者回复: 整个一节都在讲分层的。这一句话是综述。第二点，其实文中就是说这个例子是不准确的。因为这是入门课程，所以需要慢慢来

  2018-05-22

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/3f/8b/5e6a9f27.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  大象

  老师，您好，有个问题请教一下。有两台笔记本在同一个路由器下，路由器绑定了mac，没绑定mac不能上外网，其中一台a可以上外网，另一台b由于mac有限不能上网。 请问如何让b通过a访问外网呢？

  2018-05-22

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/54/da/e2e5ddf7.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  2102

  可以用快递作比喻，快递会包很多层

  2018-05-22

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/ce/14/b488f241.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  o9

  网络基础知识不是很好，表示不是很理解，看完整个系列会有提高吗

  2018-05-22

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/54/da/e2e5ddf7.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  2102

  可以用送快递作比喻，快递通常需要一个小区组成一个大包，一个城市组成一辆车

  2018-05-22

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/43/bf/9a982bc1.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  子悠

  案例 假设A座7楼的A7想给B座七楼的B7送东西，刚好电梯坏了，走楼梯到6楼遇到A6，A6刚好要去给B6送东西，然后就说让A7带着一起，A5，A4，A3，A2，A1都让A7带着，然后A7就抱着个大箱子到B座，从B1到B7一个个给他们送过去。A7送完东西要回来，如果B楼有东西就再让他带回来。 查看ip 这个问题没说查看谁的ip，查看自己的话，可以通过界面就是网络适配器，命令ifconfig 或者ipconfig，针对不同操作系统。看别人的可以ping。

  2018-05-22

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/df/a6/190e2ae0.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  KentonYu

  这个一层 二层 三层 是什么意思。对于小白来讲 最好有个名词解释啊

  作者回复: 这个里面讲了呀

  2018-05-22

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/5a/73/d8db600f.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  F.Y.

  将物品交给快递小哥，小哥拿到后进行打包，然后填写地址和手机号，如果包裏地址就在同城就会先留下并做好派发准备，而如果包裏是在外地就会扔到车上运到下一个网点，新网点的员工重复小哥的工作，同城派发，外地继续运送，最终包裏到达客户手上

  2018-05-22

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/c5/3e/41339003.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  幻影霸者

  上楼下楼

  2018-05-22

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/4f/e7/7e51052a.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  fumeck.com🍋🌴summer sk...

  就像我们拆快递一样，先拆开外面物流的包装袋（物理层）.再拆开产品的包装袋（网络层）.最后拿到物品(传输层).而我们发快递也是一样，拿产品然后包装起来，快递来了再把快递袋包装多一层

  2018-05-21

  **

  **

- ![img](data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABkAAD/4QN5aHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MCA3OS4xNjA0NTEsIDIwMTcvMDUvMDYtMDE6MDg6MjEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YWE3YmZhMDItMzBhMC00MDg3LTg3MmYtOGMwMjMxNjNhZWRjIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI2MTlEODM3NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI2MTlEODM2NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTYyRTNCMDNBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTYyRTNCMDRBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRm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)

  ricky

  老师，我有2个问题 1.路由器是根据ip选择下一跳，为什么还要解开mac，如果mac放到ip的上面不是更好。 2.如果解开mac发现不是自己mac会做什么？就不查ip选择下一跳吗？

  2018-05-21

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/95/96/0020bd67.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  夏洛克的救赎

  谢谢老师的回答。借助思科模拟器做实验如何？

  2018-05-21

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/a9/90/0c5ed3d9.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  颇忒妥

  学习这类东西尽量不要用比喻。因为再恰当的比喻也会失真。

  作者回复: 其实是的，比较赞同这种说法。但是有时候为了理解，人们还是想比喻一下。

  2018-05-21

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/4e/e4/d0f1875d.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  小顿细路

  1.我觉得可以用套娃的比喻，小娃是数据，再套二娃TCP，接着再套三娃IP，最后套四娃MAC。 2.我会用IPCONFIG看

  2018-05-21

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/21/e0/c3b52b4d.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  张周强

  ip是世界唯一的，mac地址是世界唯一的吗？

  作者回复: ip不唯一啊

  2018-05-21

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/45/be/494010aa.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  zcpromising

  老师，网络上跑的包，可以有下层没上层，怎么理解呀，能不能举个例子

  2018-05-21

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/42/9a/183455ca.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  先天专治不服

  我的理解，上层应用会把数据包进一个"盒子"，盒子上"写上"自己的协议。最终的数据是通过物理链路层发送出去的。接收方一层一层拆包装，根据协议讲数据包交给相应的上层程序。有点像洋葱，真正需要的可能就只有中间那么一点，为了发送出去要包一层一层的皮。

  2018-05-21

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/28/1e/76e19bd3.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  张立春

  我觉得这个比喻反了吧，mac最后打包，里面是更高级内容，所以应该是总经理兜里装着经理再装着组长和员工。我想的的比喻就是洋葱吧，一层层剥到里面才是芯

  作者回复: 可是总经理是上层呀

  2018-05-21

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/40/6e/f6b7d8ae.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  kohakuhubo

  网络协议各层的通讯类似于发快递，A城市（简称A市的张三知道B城市（简称B市）的李四的地址，但实际张三要把快递交给A市的快递员，快递员封装上一些信息后交给A市的物流中心，物流中心在封装一些信息交给运输车，运输车运送到B市的物流中心后在取出部分信息后要交给B市的快递员，快递员在根据地址送到李四家

  2018-05-21

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/5c/c2/8ffd2ad0.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  qqq

  \1. 快递的中转派发、打电话。 2. ping

  2018-05-21

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/58/2c/92c7ce3b.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  易轻尘

  快递包裹的比喻比较准确啦，感觉这基本上对整个网络世界都挺适用的～

  2018-05-21

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/55/52/0e90c2d0.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  ltvieri

  感谢。正常补习计网。期待更多更好的内容。

  2018-05-21

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/15/a6/723854ee.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  姜戈

  封装解封装很好理解，就是穿衣服和脱衣服的过程

  作者回复: 哈哈，很形象

  2018-05-21

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/fc/e5/605f423f.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  肖一林

  这篇文章，老师好像是把网络传输的过程抽象成了一个软件程序，隐藏了传输的细节，网络节点都隐藏了，只剩下协议包装和解析的过程。 不过双工通信的话，请求应该包含一对包装和解析，响应也包含一对包装和解析。老师那个示意图只有一对包装和解析，我有点迷惑 大学没学过网络，毕业后跨专业做软件，所以没啥网络基础，不知道我理解对不对？

  2018-05-21

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/0f/63/8f/abb7bfe3.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  bubble

  老师可不可以一天多更新点，意犹未尽，听的看的不过瘾😭😭

  2018-05-21

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/28/de/54667f13.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  jutsu

  这张图学习很多，希望老师后面多加点图解

  2018-05-21

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/11/45/7a/3f8241ef.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  Geek_5b11b8

  有点太理论了，希望多点基础知识加上绘图讲解

  2018-05-21

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/12/1a/8a6a8ac0.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  不爱学习的好孩子

  我想到的是医院看病流程: 挂号-诊断-检查-手术 一条龙。

  2018-05-21

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/2b/58/7e589b77.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)![img](https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_14)

  flyang

  比喻：快递吧，这个可能更接近一点。 你寄快递可以理解成是应用层发起请求，网点收快递则是封装了请求。快递在城市中转站则是完成了传输层的封装。快递到达区域枢纽站则完成了网络层的封装。汽车的接力运输(换人不换车)则可以理解成数据链路层的传输。 至于飞机或者高铁运快递则可以理解成VPN。我对VPN的理解很浅，不知道VPN的比喻合适不

  2018-05-21

  **

  **

- ![img](https://static001.geekbang.org/account/avatar/00/10/0b/d0/e5d26891.jpg?x-oss-process=image/resize,m_fill,h_34,w_34)

  nil

  网卡只有一个，在收到多个协议的时候，是串行执行的吗？如何理解epoll和kqueue?

  作者回复: epoll和kquene在讲socket那一节会讲

  2018-05-21

  **

  **
