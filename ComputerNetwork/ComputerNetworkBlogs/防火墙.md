## 防火墙



## 一、**防火墙概述**



网络防火墙技术是一种用来加强网络之间访问控制，防止外部网络用 户以非法手段通过外部网络进入内部网络，访问内部网络资源，保护内部网络操作环境的特殊网络互联设备。防火墙处于5层网络安全体系中的最底层，属于网络层安全技术范畴。

在计算机科学领域中是一个架设在互联网与企业内网之间的信息安全系统，根据企业预定的策略来监控往来的传输。可以说它是当前最重要的一种网络防护设备，而从专业角度来说，防火墙是位于两个(或多个)网络间，实行网络间访问或控制的一组组件集合的硬件或软件。

防火墙最基本的功能就是隔离网络，通过将网络划分成不同的区域（通常情况下称为ZONE），制定出不同区域之间的访问控制策略来控制不同信任程度区域间传送的数据流。例如互联网是不可信任的区域，而内部网络是高度信任的区域。以避免安全策略中禁止的一些通信。它有控制信息基本的任务在不同信任的区域。 典型信任的区域包括互联网(一个没有信任的区域) 和一个内部网络(一个高信任的区域) 。

它对两个或多个网络之间传输的数据包，如链接方式按照一定的安全策略来实施检查，以决定网络之间的通信是否被允许，并监视网络运行状态。

作为内部网络与外部公共网络之间的第一道屏障，防火墙是最先受到人们 重视的网络安全产品之一。网络防火墙技术是一种用来加强网络之间访问控制，防止外部网络用户以非法手段通过外部网络进入内部网络，访问内部网络资源，保护内部网络操 作环境的特殊网络互联设备。虽然从理论上讲，防火墙处于网络安全的最底层，负责网络间的安全认证与传输，但随着网络安全技术的整体发展和网络应用的不断变化，现代防火墙技术已经逐步走向两络层之外的其他安全层次，不仅要完成传统防火墙的过滤任务，同时还能为各种网络应用提供相应的安全服务。另外还有多种防火墙产品正朝着数据安全与用户认证、防止病毒与黑客入侵等方向发展。

目前的防火墙产品主要有堡垒主机包过滤路由器、应用层网关 (代理服务器)以及电路层网关、屏蔽主机防火墙、双宿主机等类型。



## 二、**防火墙的基本类型**

根据防火墙所采用的技术不同，可以分为四种基本类型 ：包过滤型、网络地址转换 NAT、代理型和监测型。

**1.包过滤型**

包过滤型产品是防火墙的初级产品，其技术依据是网络中的分包传输技术。网络上的数据都是以 “包”为单位进行传输的，数据被分割为一定大小的数据包，每一个数据包中都会包含一些特定信息，如数据的源地址、目标 地址、TCP／UDP源端口和目标端口等。防火墙通过读取数据包中的地址信息来判断这些 “包”是否来自可信任的安全站点，一旦发现来自危险站点的包数据，防火墙便会将这些数据拒之门外。系统管理员也可以根据实际情况灵活制定判断规则。

![](https://mmbiz.qpic.cn/mmbiz_png/88IXhNkSic6djUMn0RYcGwZvPZjN2V3icwWWlkkvVRkJN7yj8nYIW9tE4kfjVgLLicqtUS8aqfBZ5LEicxaFmVqsJw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

**2.网络地址转换—NAT**

网络地址转换是一种用于把 IP地址转换成临时的、外部的、注册的IP地址标准。它允许具有私有的IP地址的内部网络访问因特网。它还意味着用不需 要为其网络中每一台机器取得注册的IP地址。

在内部网络通过网卡访问外部网络时，将产生一个映射记录。系统将外出的源地址和源端口映射为一个伪装的地址和端口，让这个伪装的地址和端口通过非安全网卡访问内部网络时，它并不知道内部网络连接情况，而只是通过一个开放的IP地址和端口来请求访问。OLM 防火墙根据预先定义好的影射规则来判断这个访问是否安全。当符合规则时，防火墙认为是安全的，可以接受访问请求，也可以将连接请求映射到不同的内部计算机中。否则，不能被接受，防火墙将屏蔽外部连接请求。

 **3.代理型防火墙**

代理型防火墙也可破称之为代理服务器，它的安全型要高于包过滤型产品，并已经开始向应用层发展。代理服务器位于客户机与服务器之间，完全阻挡了二者间的数据交流。从客户机来看，代理服务器相当一台真正的服务器；而从服务器来看，代理服务器又是一台真正的客户机。当客户机需要使用服务器上的数据时，首先将数据请求发给代理服务器，代理服务器再根据这一请求向服务器索取数据，然后再由代理服务器将数据传输给客户机。由于外部系统与内部服务器之间没有直接的数据通道，外部的恶意侵害也就很难伤害到企业内部两络系统。代理服务器的优点是安全性较高，可以针对应用层进行侦测和扫描，对付基于应用层的侵入和病毒都。十分有效。其缺点是对系统的整体性能有较大的影响，而且代理服务器必须针对客户机可能产生的所有应用类型逐一进行设置，大大增加了系统管理的复杂性。

**4.监测型防火墙**

监测型防火墙是新一代的产品，这一技术实际已经超越了最初的防火墙定义。监测型防火墙能够对各层的数据进行主动的、实时的监测在对这一数据加以分析的基础上，监测型防火墙能够有效的判断出各层中的非法侵入。同时，这种监测型防火墙产品一般还带有分布式探测器，这些探测器安置在各种应用服务器和其它网络的节点之中，不仅能够监测来自网络外部的攻击，同时对来自内部的恶意破坏也有极强的防范作用。因此，监测型防火墙不仅超越了传统防火墙的定义，而且在安全性上也超越了前两代产品。但由于监测型防火墙技术的实现成本较高，也不易管理，所以，目前在实用中的防火墙仍 然以第二代代理型产品为主，但在某些方面也已经开始使用监测型防火墙。

![](https://mmbiz.qpic.cn/mmbiz_png/88IXhNkSic6djUMn0RYcGwZvPZjN2V3icwepiaxqiamcOUcicKFly5suRIlGZDbIarjclQeNfZGSC2lZoV5dlEtlm9Q/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)


## 三、**防火墙架构**

**1.主机型防火墙**

此防火墙需有两张网卡，一张与互联网连接，另一张与内部网连接，如此互联网与内部网的通道无法直接接通，所有数据包都需要透过主机发送。

**2.双闸型防火墙**

此防火墙除了主机型防火墙的两张网卡外，另安装应用服务转送器的软件，所有网络数据包都须经过此软件检查，此软件将过滤掉不被系统所允许的数据包。

**3.屏障单机型防火墙**

此防火墙的硬件设备除需要主机外，还需要一个路由器，路由器需具有数据包过滤的功能，主机则负责过滤及处理网络服务要求的数据包，当互联网的数据包进入屏障单机型防火墙时，路由器会先检查此数据包是否满足过滤规则，再将过滤成功的数据包，转送到主机进行网络服务层的检查与发送。

**4.屏障双闸型防火墙**

将屏障单机型防火墙的主机换成双闸型防火墙。

**5.屏障子网域型防火墙**

此防火墙借由多台主机与两个路由器组成，计算机分成两个区块，屏障子网域与内部网，数据包经由以下路径，第一个路由器->屏障子网域->第二路由器->内部网，此设计因有阶段式的过滤功能，因此两个路由器可以有不同的过滤规则，让网络数据包更有效率。若一数据包通过第一过滤器数据包，会先在屏障子网域进行服务处理，若要进行更深入内部网的服务，则要通过第二路由器过滤。



## 四、 **防火墙的不足以及未来发展方向**

**防火墙的不足**

虽然防火墙是目前保护网络免遭黑客袭击的有效手段，但也有明显不足：

1、无法防范通过防火墙以外的其他途径的攻击；

2、不能防止来自内部变节者和不经心的用户们带来的威胁；

3、不能完全防止传送已感染病毒的软件或文件；

4、无法防范数据驱动型的攻击；

5、所有互联网的数据包软件都应经过防火墙的过滤，这将造成网络交通的瓶颈。

**未来防火墙发展之路**

实际上，作为当前防火墙产品的主流趋势，大多数代理服务器(也称应用网关) 也集成了包过滤技术，这两种技术的混合应用显然 比单独使用具有更大的优势。由于这种产品是基于应用的，应用网关能提供对协议的过滤，使得应用过 程中的矛盾主要集中在对多种网络应用协议的有效支持和对网络整体性能的影响上 。

随着因特网基础技术的发展，也要求防火墙技术更新，而作为因特网的协议 IP也面临巨大的变革：现在IP协议的四字方式已不能提供足够多的相互独立的IP网址以满足越来越多的因特网用户网址的要求。为了解决这个问题，人们试图将IP地址的组成模块化小，以使有更高比例的理论地址投入实际使用。但这样做不但会引起路由方面的问题，实际上也没有提供更多的地址。因此，人们正在设计的新的IP协议 ---(IPVERslON6) IP协议的变化将对防火墙的建立与运行产生深刻的影响。同时，目前大多数网络上的机器的信息流都有可能被偷看到，但更新的网络技术如异步传输模式(ATM)可将数据包从源地址直接发送给目的地址，从而防止信息流在传输中被泄露。